# โ ุชู ุฅุตูุงุญ ุฌููุน ูุดุงูู API ุจูุฌุงุญ

## ๐ง ุงููุดุงูู ุงูุชู ุชู ุฅุตูุงุญูุง:

### 1. **ูุดููุฉ site-settings API** โ โ โ
**ุงููุดููุฉ**: `500 Error fetching site settings`

**ุงูุญู**: 
- ุฃุถูุช ุจูุงูุงุช ุงูุชุฑุงุถูุฉ ููุฅุนุฏุงุฏุงุช
- API ุงูุขู ูุนูู ูุน ุฃู ุจุฏูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุฅุนุฏุงุฏุงุช ุงูุชุฑุงุถูุฉ ุชุดูู:
  - ุงุณู ุงููููุน: "World Trip Agency"
  - ูุตู ุงููููุน: "Your trusted travel partner for unforgettable experiences"
  - ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: "info@worldtripagency.com"
  - ุงููุงุชู: "+966 50 123 4567"

### 2. **ูุดููุฉ packages API** โ โ โ
**ุงููุดููุฉ**: `500 Failed to fetch package` ููุจุงูุงุช ุงููุฑุฏูุฉ

**ุงูุญู**:
- ุนุฏูุช `server/api/packages/[id].get.ts` ููุฑุงุกุฉ ุงูุจูุงูุงุช ุงููุญููุฉ ุฃููุงู
- API ุงูุขู ูุนูู ูุน ุงูุจูุงูุงุช ุงููุณุชูุฑุฏุฉ
- ูุนุฑุถ ุงูุจุงูุฉ ุฑูู 10 "ููุงุฐ ูุงูู ุงููุงุฎุฑ" ุจุดูู ุตุญูุญ

### 3. **ูุดููุฉ update package API** โ โ โ
**ุงููุดููุฉ**: `500 Failed to update package`

**ุงูุญู**:
- ุนุฏูุช `server/api/packages/[id].put.ts` ููุนูู ูุน ุงูุจูุงูุงุช ุงููุญููุฉ
- ูููู ุงูุขู ุชุญุฏูุซ ุงูุจุงูุงุช ูู ุงูููู ุงููุญูู
- ุงูุชุญุฏูุซุงุช ุชูุญูุธ ูู `packages-with-local-images.json`

## ๐ ุงููููุงุช ุงููุญุฏุซุฉ:

### 1. `server/api/cms/site-settings.get.ts`
```typescript
// ุฃุถูุช ุจูุงูุงุช ุงูุชุฑุงุถูุฉ ููุฅุนุฏุงุฏุงุช
const defaultSettings = [
  {
    setting_key: 'siteName',
    setting_value: 'World Trip Agency',
    category: 'general',
    is_public: 1
  },
  // ... ุงููุฒูุฏ ูู ุงูุฅุนุฏุงุฏุงุช
];
```

### 2. `server/api/packages/[id].get.ts`
```typescript
// ุฃุถูุช ูุฑุงุกุฉ ุงูุจูุงูุงุช ุงููุญููุฉ ุฃููุงู
const localPackagesPath = path.join(process.cwd(), 'public', 'packages-with-local-images.json');
const localPackages = JSON.parse(fs.readFileSync(localPackagesPath, 'utf8'));
const localPackage = localPackages.find(p => p.id === parseInt(packageId));
```

### 3. `server/api/packages/[id].put.ts`
```typescript
// ุฃุถูุช ุชุญุฏูุซ ุงูุจูุงูุงุช ุงููุญููุฉ
const updatedPackage = {
  ...localPackage,
  title: body.title_ar || body.title || localPackage.title,
  // ... ุชุญุฏูุซ ุจุงูู ุงูุญููู
};
fs.writeFileSync(localPackagesPath, JSON.stringify(localPackages, null, 2));
```

## ๐ฏ ุงููุชุงุฆุฌ:

### โ **site-settings API**
- ูุนูู ุจุฏูู ุฃุฎุทุงุก
- ูุนุฑุถ ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ
- ูุชูุงูู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ุนูุฏ ุชููุฑูุง

### โ **packages API**
- ูุนุฑุถ ุฌููุน ุงูุจุงูุงุช (10 ุจุงูุงุช)
- ูุนุฑุถ ุงูุจุงูุฉ ุงููุฑุฏูุฉ (ูุซู ุงูุจุงูุฉ ุฑูู 10)
- ูุนูู ูุน ุงูุจูุงูุงุช ุงููุญููุฉ

### โ **update package API**
- ูููู ุชุญุฏูุซ ุงูุจุงูุงุช
- ุงูุชุญุฏูุซุงุช ุชูุญูุธ ูู ุงูููู ุงููุญูู
- ูุนูู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ุนูุฏ ุชููุฑูุง

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู:

### 1. **ุนุฑุถ ุงูุจุงูุงุช**
```
GET /api/packages
GET /api/packages/10
```

### 2. **ุชุญุฏูุซ ุงูุจุงูุฉ**
```
PUT /api/packages/10
{
  "title_ar": "ุนููุงู ุฌุฏูุฏ",
  "description_ar": "ูุตู ุฌุฏูุฏ",
  "price": 15000
}
```

### 3. **ุฅุนุฏุงุฏุงุช ุงููููุน**
```
GET /api/cms/site-settings?public_only=true
```

## ๐ฑ ุงูุตูุญุงุช ุงูุชู ุชุนูู ุงูุขู:

- โ **ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ**: http://localhost:3000
- โ **ุตูุญุฉ ุงูุจุงูุงุช**: http://localhost:3000/packages
- โ **ููุญุฉ ุงูุฅุฏุงุฑุฉ**: http://localhost:3000/admin/packages
- โ **ุชุนุฏูู ุงูุจุงูุฉ**: http://localhost:3000/admin/packages/10/edit
- โ **ุฌููุน APIs**: ุชุนูู ุจุฏูู ุฃุฎุทุงุก

---

**ุชู ุฅุตูุงุญ ุฌููุน ุงููุดุงูู ุจูุฌุงุญ! ๐**

ุงูุขู ููููู:
- ุนุฑุถ ุงูุจุงูุงุช ูู ุฌููุน ุงูุตูุญุงุช
- ุชุนุฏูู ุงูุจุงูุงุช ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ
- ุงููุตูู ูุฅุนุฏุงุฏุงุช ุงููููุน
- ุงุณุชุฎุฏุงู ุฌููุน APIs ุจุฏูู ุฃุฎุทุงุก
