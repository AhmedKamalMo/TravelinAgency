import{_ as J}from"./KJx1jOS2.js";import{_ as Q}from"./Cp645yW1.js";import U from"./CiRDkbrd.js";import{u as X}from"./Bl0NCOcq.js";import{p as Y,$ as B,h as $,a0 as Z,a1 as A,a2 as ee,a3 as te,E as se,R as ae,a4 as M,a5 as oe,a6 as T,i as e,e as W,z as K,S as L,B as V,O as ne,c as x,o as _,a as t,j as H,b as y,t as l,F as z,f as C,k as q,v as F,H as O,d as P,P as re,I as ie,w as le,r as R,l as ce}from"./CNW6Qy33.js";import{u as G}from"./CU-KnSkW.js";import{u as de}from"./Dp9yiPXt.js";const me=c=>c==="defer"||c===!1;function ue(...c){var p;const u=typeof c[c.length-1]=="string"?c.pop():void 0;typeof c[0]!="string"&&c.unshift(u);let[s,v,a={}]=c;if(typeof s!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof v!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const r=Y(),w=v,j=()=>B.value,D=()=>r.isHydrating?r.payload.data[s]:r.static.data[s];a.server??(a.server=!0),a.default??(a.default=j),a.getCachedData??(a.getCachedData=D),a.lazy??(a.lazy=!1),a.immediate??(a.immediate=!0),a.deep??(a.deep=B.deep),a.dedupe??(a.dedupe="cancel");const f=a.getCachedData(s,r),k=f!=null;if(!r._asyncData[s]||!a.immediate){(p=r.payload._errors)[s]??(p[s]=B.errorValue);const d=a.deep?$:Z;r._asyncData[s]={data:d(k?f:a.default()),pending:$(!k),error:A(r.payload._errors,s),status:$("idle"),_default:a.default}}const n={...r._asyncData[s]};delete n._default,n.refresh=n.execute=(d={})=>{if(r._asyncDataPromises[s]){if(me(d.dedupe??a.dedupe))return r._asyncDataPromises[s];r._asyncDataPromises[s].cancelled=!0}if(d._initial||r.isHydrating&&d._initial!==!1){const i=d._initial?f:a.getCachedData(s,r);if(i!=null)return Promise.resolve(i)}n.pending.value=!0,n.status.value="pending";const b=new Promise((i,o)=>{try{i(w(r))}catch(g){o(g)}}).then(async i=>{if(b.cancelled)return r._asyncDataPromises[s];let o=i;a.transform&&(o=await a.transform(i)),a.pick&&(o=fe(o,a.pick)),r.payload.data[s]=o,n.data.value=o,n.error.value=B.errorValue,n.status.value="success"}).catch(i=>{if(b.cancelled)return r._asyncDataPromises[s];n.error.value=T(i),n.data.value=e(a.default()),n.status.value="error"}).finally(()=>{b.cancelled||(n.pending.value=!1,delete r._asyncDataPromises[s])});return r._asyncDataPromises[s]=b,r._asyncDataPromises[s]},n.clear=()=>he(r,s);const h=()=>n.refresh({_initial:!0}),N=a.server!==!1&&r.payload.serverRendered;{const d=ee();if(d&&N&&a.immediate&&!d.sp&&(d.sp=[]),d&&!d._nuxtOnBeforeMountCbs){d._nuxtOnBeforeMountCbs=[];const o=d._nuxtOnBeforeMountCbs;te(()=>{o.forEach(g=>{g()}),o.splice(0,o.length)}),se(()=>o.splice(0,o.length))}N&&r.isHydrating&&(n.error.value||f!=null)?(n.pending.value=!1,n.status.value=n.error.value?"error":"success"):d&&(r.payload.serverRendered&&r.isHydrating||a.lazy)&&a.immediate?d._nuxtOnBeforeMountCbs.push(h):a.immediate&&h();const b=oe();if(a.watch){const o=ae(a.watch,()=>n.refresh());b&&M(o)}const i=r.hook("app:data:refresh",async o=>{(!o||o.includes(s))&&await n.refresh()});b&&M(i)}const S=Promise.resolve(r._asyncDataPromises[s]).then(()=>n);return Object.assign(S,n),S}function he(c,u){u in c.payload.data&&(c.payload.data[u]=void 0),u in c.payload._errors&&(c.payload._errors[u]=B.errorValue),c._asyncData[u]&&(c._asyncData[u].data.value=void 0,c._asyncData[u].error.value=B.errorValue,c._asyncData[u].pending.value=!1,c._asyncData[u].status.value="idle"),u in c._asyncDataPromises&&(c._asyncDataPromises[u]&&(c._asyncDataPromises[u].cancelled=!0),c._asyncDataPromises[u]=void 0)}function fe(c,u){const s={};for(const v of u)s[v]=c[v];return s}const pe={class:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/50 overflow-y-auto py-6"},_e={class:"sr-only"},ye={key:0,class:"flex flex-col items-center justify-center py-8"},ge={class:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4"},xe={class:"text-xl font-bold text-gray-900 mb-2"},be={class:"text-gray-600 text-center mb-4"},ve={class:"mb-8 mt-4"},we={class:"text-2xl font-bold mb-3 text-gray-900"},De={class:"text-gray-600"},$e={class:"mt-4 p-4 bg-primary/5 rounded-xl text-sm text-gray-600 flex items-start gap-2"},ke={class:"mt-4 p-4 bg-primary/5 rounded-xl text-sm text-gray-600 flex items-start gap-2"},Ce={for:"name",class:"block text-sm font-medium text-gray-700 mb-1 ltr:text-left rtl:text-right"},Ne={class:"relative"},Pe=["placeholder"],je={key:0,class:"mt-1 text-sm text-red-500 ltr:text-left rtl:text-right"},Se={for:"phone",class:"block text-sm font-medium text-gray-700 mb-1 ltr:text-left rtl:text-right"},Be={class:"relative"},Ve=["placeholder"],Ee={key:0,class:"mt-1 text-sm text-red-500 ltr:text-left rtl:text-right"},qe={for:"email",class:"block text-sm font-medium text-gray-700 mb-1 ltr:text-left rtl:text-right"},Fe={class:"relative"},Oe=["placeholder"],ze={for:"details",class:"block text-sm font-medium text-gray-700 mb-1 ltr:text-left rtl:text-right"},Ie={class:"relative"},Me=["placeholder"],Le=["disabled"],He={key:0,class:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"},Re=W({__name:"DestinationContactFormModal",props:{destinationName:{}},emits:["close","submit"],setup(c,{emit:u}){const{t:s}=K(),{sendDestinationNotification:v}=G(),a=u,r=c,w=$(!1),j=$(!1),D=$(!1),f=$(""),k=$(!1),n=L({name:"",phone:"",email:"",details:"",destinationName:r.destinationName}),h=L({name:"",phone:"",email:"",details:""}),N=V(()=>{const i=["name","phone"];return Object.entries(h).some(([o,g])=>g!=="")||i.some(o=>!n[o])});function S(i){return/^\+?[0-9\s\-()]{8,20}$/.test(String(i))}function p(i){switch(i){case"name":n.name?n.name.length<2?h.name=s("home.destinations.destination_form.name_too_short"):h.name="":h.name=s("home.destinations.destination_form.name_required");break;case"phone":n.phone?S(n.phone)?h.phone="":h.phone=s("home.destinations.destination_form.phone_invalid"):h.phone=s("home.destinations.destination_form.phone_required");break;case"email":case"details":h[i]="";break}}function d(){return p("name"),p("phone"),Object.values(h).every(i=>i==="")&&["name","phone"].every(i=>n[i])}async function b(){if(d())try{w.value=!0;const i=await v({name:n.name,email:n.email,phone:n.phone,message:n.details,destinationName:r.destinationName});D.value=i.success,f.value=i.error||"",k.value=!i.success&&!i.error,j.value=!0,a("submit",{...n})}catch(i){console.error("Failed to submit form:",i),D.value=!1,k.value=!0,f.value=s("home.destinations.destination_form.error_message")}finally{w.value=!1}}return(i,o)=>{const g=U,E=ne("NotificationStatus");return _(),x("div",pe,[t("div",{class:"relative w-full max-w-2xl bg-white rounded-2xl shadow-xl p-6 md:p-8 max-h-[min(calc(100vh-2rem),42.7rem)] my-6 mt-14 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 hover:scrollbar-thumb-gray-400",onClick:o[8]||(o[8]=H(()=>{},["stop"]))},[t("button",{onClick:o[0]||(o[0]=m=>i.$emit("close")),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors",type:"button"},[y(g,{name:"material-symbols:close",class:"w-6 h-6"}),t("span",_e,l(e(s)("common.close")),1)]),e(j)?(_(),x("div",ye,[t("div",ge,[y(g,{name:"material-symbols:check",class:"w-10 h-10 text-green-600"})]),t("h3",xe,l(e(s)("home.destinations.destination_form.success_title")),1),t("p",be,l(e(s)("home.destinations.destination_form.success_message",{name:i.destinationName})),1),y(E,{sent:e(D),error:e(f),failed:e(k)},null,8,["sent","error","failed"]),t("button",{onClick:o[1]||(o[1]=m=>i.$emit("close")),class:"mt-6 rounded-xl bg-primary px-8 py-3 text-white hover:bg-primary-dark transition-colors"},l(e(s)("common.close")),1)])):(_(),x(z,{key:1},[t("div",ve,[t("h2",we,l(e(s)("home.destinations.destination_form.title",{name:i.destinationName})),1),t("p",De,l(e(s)("home.destinations.destination_form.description",{name:i.destinationName})),1),t("div",$e,[y(g,{name:"material-symbols:schedule",class:"w-5 h-5 text-primary flex-shrink-0 mt-0.5"}),t("p",null,l(e(s)("home.destinations.destination_form.response_time")),1)]),t("div",ke,[y(g,{name:"material-symbols:lightbulb-outline",class:"w-5 h-5 text-primary flex-shrink-0 mt-0.5"}),t("p",null,l(e(s)("home.destinations.destination_form.custom_package_note")),1)])]),t("form",{onSubmit:H(b,["prevent"]),class:"space-y-6"},[t("div",null,[t("label",Ce,l(e(s)("home.destinations.destination_form.name")),1),t("div",Ne,[y(g,{name:"material-symbols:person-outline",class:"absolute ltr:left-4 rtl:right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),q(t("input",{id:"name","onUpdate:modelValue":o[2]||(o[2]=m=>e(n).name=m),type:"text",required:"",class:O(["w-full px-4 py-3 ltr:pl-12 rtl:pr-12 rounded-xl border focus:ring-2 focus:ring-primary transition-colors",e(h).name?"border-red-500":"border-gray-300 focus:border-primary"]),placeholder:e(s)("home.destinations.destination_form.name_placeholder"),onBlur:o[3]||(o[3]=m=>p("name"))},null,42,Pe),[[F,e(n).name]])]),e(h).name?(_(),x("p",je,l(e(h).name),1)):C("",!0)]),t("div",null,[t("label",Se,l(e(s)("home.destinations.destination_form.phone")),1),t("div",Be,[y(g,{name:"material-symbols:call-outline",class:"absolute ltr:left-4 rtl:right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),q(t("input",{id:"phone","onUpdate:modelValue":o[4]||(o[4]=m=>e(n).phone=m),type:"text",required:"",class:O(["w-full px-4 py-3 ltr:pl-12 rtl:pr-12 rounded-xl border focus:ring-2 focus:ring-primary transition-colors",e(h).phone?"border-red-500":"border-gray-300 focus:border-primary"]),placeholder:e(s)("home.destinations.destination_form.phone_placeholder"),onBlur:o[5]||(o[5]=m=>p("phone"))},null,42,Ve),[[F,e(n).phone]])]),e(h).phone?(_(),x("p",Ee,l(e(h).phone),1)):C("",!0)]),t("div",null,[t("label",qe,l(e(s)("home.destinations.destination_form.email")),1),t("div",Fe,[y(g,{name:"material-symbols:mail-outline",class:"absolute ltr:left-4 rtl:right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),q(t("input",{id:"email","onUpdate:modelValue":o[6]||(o[6]=m=>e(n).email=m),type:"text",class:O(["w-full px-4 py-3 ltr:pl-12 rtl:pr-12 rounded-xl border focus:ring-2 focus:ring-primary transition-colors"]),placeholder:e(s)("home.destinations.destination_form.email_placeholder")},null,8,Oe),[[F,e(n).email]])])]),t("div",null,[t("label",ze,l(e(s)("home.destinations.destination_form.request_details")),1),t("div",Ie,[y(g,{name:"material-symbols:chat-outline",class:"absolute ltr:left-4 rtl:right-4 top-3 w-5 h-5 text-gray-400"}),q(t("textarea",{id:"details","onUpdate:modelValue":o[7]||(o[7]=m=>e(n).details=m),rows:"4",class:"w-full px-4 py-3 ltr:pl-12 rtl:pr-12 rounded-xl border focus:ring-2 focus:ring-primary transition-colors resize-none",placeholder:e(s)("home.destinations.destination_form.request_details_placeholder")},null,8,Me),[[F,e(n).details]])])]),t("button",{type:"submit",class:O(["w-full rounded-xl bg-primary px-6 py-3.5 text-white font-medium hover:bg-primary-dark transition-colors flex items-center justify-center",{"opacity-70 cursor-not-allowed":e(w)||e(N)}]),disabled:e(w)||e(N)},[e(w)?(_(),x("span",He)):C("",!0),P(" "+l(e(s)(e(w)?"common.sending":"home.destinations.destination_form.submit")),1)],10,Le)],32)],64))])])}}}),Ue={key:0,class:"flex justify-center items-center min-h-screen"},Te={class:"sr-only"},We={key:1,class:"min-h-screen flex flex-col items-center justify-center px-4 text-center"},Ke={class:"text-2xl font-bold text-gray-900 mb-4"},Ge={class:"text-gray-600 mb-8"},Je={key:2,class:"relative min-h-screen"},Qe={class:"relative h-[40vh] md:h-[60vh] w-full"},Xe={class:"relative z-10 -mt-32 rounded-t-[2.5rem] bg-white px-4 pb-20 pt-12 md:px-8"},Ye={class:"mx-auto max-w-6xl"},Ze={class:"mb-4 text-4xl font-bold text-gray-900"},Ae={class:"mb-12 text-lg text-gray-600 max-w-3xl"},et={key:0,class:"mb-16"},tt={class:"text-2xl font-semibold mb-6 text-gray-900 flex items-center gap-2"},st={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},at={class:"relative h-48"},ot={class:"p-6"},nt={class:"text-xl font-semibold mb-3 text-gray-900"},rt={class:"text-gray-600"},it={key:1,class:"mb-16"},lt={class:"text-2xl font-semibold mb-6 text-gray-900 flex items-center gap-2"},ct={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},dt={key:0,class:"relative h-40 -mx-6 -mt-6 mb-6"},mt={class:"text-xl font-semibold mb-3 text-gray-900"},ut={class:"text-gray-600 mb-4"},ht={class:"flex items-center text-sm text-gray-500"},ft={class:"bg-gradient-to-br from-primary/5 to-primary/10 rounded-2xl p-6 sm:p-8 md:p-12 text-center"},pt={class:"text-2xl sm:text-3xl font-semibold mb-3 sm:mb-4 text-gray-900"},_t={class:"text-gray-600 mb-6 sm:mb-8 max-w-2xl mx-auto text-base sm:text-lg"},yt={class:"flex flex-col sm:flex-row items-center justify-center gap-4"},gt=["href"],Ct=W({__name:"[id]",async setup(c){let u,s;const v=re(),{t:a,locale:r}=K(),{getWhatsAppUrl:w}=G(),{getDestinationById:j}=X(),D=$(!1),{data:f,pending:k,error:n}=([u,s]=ie(()=>ue(`destination-${v.params.id}`,()=>{const p=j(v.params.id);if(!p)throw T({statusCode:404,message:"Destination not found"});return p})),u=await u,s(),u),h=V(()=>{var p;return((p=f.value)==null?void 0:p.name[r.value.slice(0,2)])||""}),N=V(()=>{var p;return((p=f.value)==null?void 0:p.description[r.value.slice(0,2)])||""});function S(p){return new Date(p).toLocaleDateString(r.value.slice(0,2),{year:"numeric",month:"long",day:"numeric"})}return de({title:V(()=>f.value?`${f.value.name[r.value.slice(0,2)]} | Wonder Land Agency`:"Loading..."),meta:[{name:"description",content:V(()=>{var p;return((p=f.value)==null?void 0:p.description[r.value.slice(0,2)])||""})}]}),(p,d)=>{var g,E;const b=J,i=Q,o=U;return _(),x("div",null,[e(k)?(_(),x("div",Ue,[d[2]||(d[2]=t("div",{class:"animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent"},null,-1)),t("span",Te,l(e(a)("common.loading")),1)])):e(n)?(_(),x("div",We,[t("h1",Ke,l(e(a)("common.error")),1),t("p",Ge,l(e(n).message),1),y(b,{to:"/",class:"rounded-full bg-primary px-6 py-3 text-white hover:bg-primary-dark transition-colors"},{default:le(()=>[P(l(e(a)("common.back_home")),1)]),_:1})])):e(f)?(_(),x("div",Je,[t("div",Qe,[y(i,{src:e(f).mainImage,class:"h-full w-full object-cover",alt:h.value,loading:"eager",width:"1920",height:"1080",format:"webp",quality:"90"},null,8,["src","alt"]),d[3]||(d[3]=t("div",{class:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"},null,-1))]),t("div",Xe,[t("div",Ye,[t("h1",Ze,l(h.value),1),t("p",Ae,l(N.value),1),(g=e(f).touristSpots)!=null&&g.length?(_(),x("section",et,[t("h2",tt,[y(o,{name:"material-symbols:location-on",class:"h-6 w-6 text-primary"}),P(" "+l(e(a)("home.destinations.tourist_spots")),1)]),t("div",st,[(_(!0),x(z,null,R(e(f).touristSpots,m=>{var I;return _(),x("div",{key:m.id,class:"bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100"},[t("div",at,[y(i,{src:m.image||((I=e(f).gallery)==null?void 0:I[0])||e(f).mainImage,alt:m.name[e(r).slice(0,2)],class:"w-full h-full object-cover",width:"600",height:"400",format:"webp",quality:"85"},null,8,["src","alt"])]),t("div",ot,[t("h3",nt,l(m.name[e(r).slice(0,2)]),1),t("p",rt,l(m.description[e(r).slice(0,2)]),1)])])}),128))])])):C("",!0),(E=e(f).upcomingEvents)!=null&&E.length?(_(),x("section",it,[t("h2",lt,[y(o,{name:"material-symbols:calendar-month-outline",class:"h-6 w-6 text-primary"}),P(" "+l(e(a)("home.destinations.upcoming_events")),1)]),t("div",ct,[(_(!0),x(z,null,R(e(f).upcomingEvents,m=>(_(),x("div",{key:m.id,class:"bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 p-6"},[m.image?(_(),x("div",dt,[y(i,{src:m.image,alt:m.title[e(r).slice(0,2)],class:"w-full h-full object-cover",width:"400",height:"300",format:"webp",quality:"85"},null,8,["src","alt"])])):C("",!0),t("h3",mt,l(m.title[e(r).slice(0,2)]),1),t("p",ut,l(m.description[e(r).slice(0,2)]),1),t("div",ht,[y(o,{name:"material-symbols:calendar-month-outline",class:"w-5 h-5 mr-2"}),P(" "+l(S(m.date)),1)])]))),128))])])):C("",!0),t("section",ft,[t("h2",pt,l(e(a)("home.destinations.plan_your_trip")),1),t("p",_t,l(e(a)("home.destinations.contact_description")),1),t("div",yt,[t("button",{onClick:d[0]||(d[0]=m=>D.value=!0),class:"w-full sm:w-auto rounded-full bg-primary-500 px-6 sm:px-8 py-4 text-white hover:bg-primary-800 transition-colors text-base sm:text-lg font-medium shadow-lg hover:shadow-xl flex items-center justify-center gap-2 min-h-[44px]"},[y(o,{name:"material-symbols:chat",class:"h-5 w-5"}),P(" "+l(e(a)("home.destinations.cta_button")),1)]),D.value?(_(),ce(Re,{key:0,destinationName:h.value,onClose:d[1]||(d[1]=m=>D.value=!1)},null,8,["destinationName"])):C("",!0),t("a",{href:e(w)(e(a)("whatsapp.messages.destination_interest",{name:h.value})),target:"_blank",rel:"noopener noreferrer",class:"w-full sm:w-auto rounded-full bg-[#25D366] px-6 sm:px-8 py-4 text-white hover:bg-[#128C7E] transition-colors text-base sm:text-lg font-medium shadow-lg hover:shadow-xl flex items-center justify-center gap-2 min-h-[44px]"},[y(o,{name:"logos:whatsapp-icon",class:"w-5 h-5"}),P(" "+l(e(a)("buttons.whatsapp")),1)],8,gt)])])])])])):C("",!0)])}}});export{Ct as default};
