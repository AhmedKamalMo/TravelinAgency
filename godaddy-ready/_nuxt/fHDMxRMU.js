import{_ as V}from"./Ba-1N6ot.js";import{_ as B,J as I,h as c,m as D,u as R,c as m,o as g,a as s,f as _,I as x,i as n,t as a,b as h,d as f,e as y,K as U}from"./D1nMFiHg.js";import{s as w}from"./x_rD_Ya3.js";const z={class:"min-h-screen bg-gray-50 p-8",dir:"rtl"},E={class:"max-w-4xl mx-auto"},H={class:"bg-white rounded-xl shadow-lg p-8"},J={class:"mb-8"},K={class:"bg-gray-100 rounded-lg p-4"},M={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},P={key:0},W={class:"mr-2"},j={key:1},q={class:"mr-2"},F={class:"mb-8"},G={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},O=["disabled"],Q=["disabled"],X=["disabled"],Y={class:"mb-8"},Z={class:"bg-gray-100 rounded-lg p-4"},ss={class:"text-sm text-gray-700 whitespace-pre-wrap"},ts={class:"mb-8"},es={class:"bg-gray-100 rounded-lg p-4"},os={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ns={class:"mr-2"},as={class:"mr-2"},ls={class:"mr-2"},is={class:"mr-2"},ds={class:"flex flex-wrap gap-4"},rs={__name:"auth-test",setup(us){const{user:l,loading:d,error:k,checkAuth:C,refreshUser:$,logout:A,isAdmin:p}=I(),o=c(""),r=c(""),u=c(!1),v=()=>{r.value=new Date().toLocaleString("ar-SA")},i=()=>{const e=U("auth-token");u.value=!!e.value},T=async()=>{o.value=`جاري اختبار التحقق من المصادقة...
`;try{const e=await C(!0);o.value+=`النتيجة: ${e?"نجح":"فشل"}
`,e&&(o.value+=`المستخدم: ${e.email}
`,o.value+=`الدور: ${e.role}
`)}catch(e){o.value+=`خطأ: ${e.message}
`}i()},N=async()=>{o.value=`جاري اختبار تحديث بيانات المستخدم...
`;try{const e=await $();o.value+=`النتيجة: ${e?"نجح":"فشل"}
`,e&&(o.value+=`المستخدم: ${e.email}
`,o.value+=`الدور: ${e.role}
`)}catch(e){o.value+=`خطأ: ${e.message}
`}i()},L=async()=>{o.value=`جاري اختبار تسجيل الخروج...
`;try{await A(),o.value+=`تم تسجيل الخروج بنجاح
`}catch(e){o.value+=`خطأ: ${e.message}
`}i()},S=()=>{window.location.reload()};return D(()=>{v(),i(),w(v,1e3),w(i,5e3),o.value=`تم تحميل صفحة اختبار المصادقة
`,o.value+=`الوقت: ${r.value}
`,o.value+=`Cookie موجود: ${u.value?"نعم":"لا"}
`}),R({title:"اختبار المصادقة - Wonder Land Admin",meta:[{name:"description",content:"صفحة اختبار تدفق المصادقة في لوحة التحكم"},{name:"robots",content:"noindex, nofollow"}]}),(e,t)=>{const b=V;return g(),m("div",z,[s("div",E,[s("div",H,[t[14]||(t[14]=s("h1",{class:"text-3xl font-bold text-gray-900 mb-8"},"اختبار تدفق المصادقة",-1)),s("div",J,[t[4]||(t[4]=s("h2",{class:"text-xl font-semibold mb-4"},"حالة المصادقة الحالية",-1)),s("div",K,[s("div",M,[s("div",null,[t[0]||(t[0]=s("span",{class:"font-medium"},"المستخدم مسجل:",-1)),s("span",{class:x([n(l)?"text-green-600":"text-red-600","mr-2"])},a(n(l)?"نعم":"لا"),3)]),s("div",null,[t[1]||(t[1]=s("span",{class:"font-medium"},"صلاحيات الإدارة:",-1)),s("span",{class:x([n(p)?"text-green-600":"text-red-600","mr-2"])},a(n(p)?"نعم":"لا"),3)]),n(l)?(g(),m("div",P,[t[2]||(t[2]=s("span",{class:"font-medium"},"البريد الإلكتروني:",-1)),s("span",W,a(n(l).email),1)])):_("",!0),n(l)?(g(),m("div",j,[t[3]||(t[3]=s("span",{class:"font-medium"},"الدور:",-1)),s("span",q,a(n(l).role),1)])):_("",!0)])])]),s("div",F,[t[5]||(t[5]=s("h2",{class:"text-xl font-semibold mb-4"},"اختبارات المصادقة",-1)),s("div",G,[s("button",{onClick:T,disabled:n(d),class:"bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50"}," اختبار التحقق من المصادقة ",8,O),s("button",{onClick:N,disabled:n(d),class:"bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50"}," تحديث بيانات المستخدم ",8,Q),s("button",{onClick:L,disabled:n(d),class:"bg-red-500 text-white px-6 py-3 rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50"}," تسجيل الخروج ",8,X)])]),s("div",Y,[t[6]||(t[6]=s("h2",{class:"text-xl font-semibold mb-4"},"نتائج الاختبار",-1)),s("div",Z,[s("pre",ss,a(n(o)),1)])]),s("div",ts,[t[11]||(t[11]=s("h2",{class:"text-xl font-semibold mb-4"},"معلومات إضافية",-1)),s("div",es,[s("div",os,[s("div",null,[t[7]||(t[7]=s("span",{class:"font-medium"},"Cookie موجود:",-1)),s("span",ns,a(n(u)?"نعم":"لا"),1)]),s("div",null,[t[8]||(t[8]=s("span",{class:"font-medium"},"حالة التحميل:",-1)),s("span",as,a(n(d)?"جاري التحميل...":"مكتمل"),1)]),s("div",null,[t[9]||(t[9]=s("span",{class:"font-medium"},"الخطأ:",-1)),s("span",ls,a(n(k)||"لا يوجد"),1)]),s("div",null,[t[10]||(t[10]=s("span",{class:"font-medium"},"الوقت الحالي:",-1)),s("span",is,a(n(r)),1)])])])]),s("div",ds,[h(b,{to:"/admin/dashboard",class:"bg-indigo-500 text-white px-6 py-3 rounded-lg hover:bg-indigo-600 transition-colors"},{default:f(()=>t[12]||(t[12]=[y(" الذهاب إلى الداشبورد ")])),_:1}),h(b,{to:"/admin/login",class:"bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600 transition-colors"},{default:f(()=>t[13]||(t[13]=[y(" صفحة تسجيل الدخول ")])),_:1}),s("button",{onClick:S,class:"bg-yellow-500 text-white px-6 py-3 rounded-lg hover:bg-yellow-600 transition-colors"}," تحديث الصفحة ")])])])])}}},ps=B(rs,[["__scopeId","data-v-ec82ff51"]]);export{ps as default};
