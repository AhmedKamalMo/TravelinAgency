import I from"./CW2NxIwK.js";import{_ as Q}from"./Ba-1N6ot.js";import{h as m,C as h,Q as q,m as z,c as n,o as i,a as e,b,d as $,e as P,k as _,v as A,i as a,Z as k,S,H,f as R,F as V,r as E,t as l,I as C}from"./D1nMFiHg.js";const Z={class:"space-y-6"},G={class:"flex justify-between items-center"},J={class:"bg-white rounded-xl p-6 shadow-sm border border-gray-200"},K={class:"flex flex-wrap gap-4"},O={class:"flex-1 min-w-64"},W={class:"min-w-48"},X={class:"min-w-48"},Y={class:"bg-white rounded-xl shadow-sm border border-gray-200"},tt={key:0,class:"text-center py-8"},et={key:1,class:"text-center py-8"},st={key:2,class:"overflow-x-auto"},ot={class:"w-full"},at={class:"bg-white divide-y divide-gray-200"},rt={class:"px-6 py-4 whitespace-nowrap"},lt={class:"text-sm font-medium text-gray-900"},nt={class:"text-sm text-gray-500"},it={class:"px-6 py-4 whitespace-nowrap"},dt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ut={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ct={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},pt={class:"flex items-center space-x-3 space-x-reverse"},xt=["onClick"],mt=["onClick"],gt={key:3,class:"px-6 py-4 border-t border-gray-200"},bt={class:"flex items-center justify-between"},yt={class:"text-sm text-gray-700"},vt={class:"flex space-x-2 space-x-reverse"},ft=["disabled"],ht=["onClick"],wt=["disabled"],y=10,$t={__name:"index",setup(_t){const w=m(!0),v=m([]),u=m(""),c=m(""),p=m(""),r=m(1),g=h(()=>{let s=v.value;if(u.value){const t=u.value.toLowerCase();s=s.filter(d=>d.title.toLowerCase().includes(t)||d.slug.toLowerCase().includes(t))}return c.value&&(s=s.filter(t=>t.status===c.value)),p.value&&(s=s.filter(t=>t.template===p.value)),s}),f=h(()=>Math.ceil(g.value.length/y)),L=h(()=>{const s=(r.value-1)*y,t=s+y;return g.value.slice(s,t)}),T=h(()=>{const s=[],t=Math.max(1,r.value-2),d=Math.min(f.value,r.value+2);for(let x=t;x<=d;x++)s.push(x);return s}),D=s=>({published:"منشور",draft:"مسودة",archived:"مؤرشف"})[s]||s,N=s=>({home:"الرئيسية",about:"من نحن",services:"الخدمات",contact:"اتصل بنا",default:"افتراضي"})[s]||s,F=s=>new Date(s).toLocaleDateString("ar-SA"),U=async()=>{try{w.value=!0;const s=await $fetch("/api/cms/pages?limit=1000");v.value=s.data.pages}catch(s){console.error("Error loading pages:",s)}finally{w.value=!1}},B=async s=>{try{const t=s.status==="published"?"draft":"published";await $fetch(`/api/cms/pages/${s.id}`,{method:"PUT",body:{status:t}}),s.status=t}catch(t){console.error("Error updating page status:",t)}},j=async s=>{if(confirm(`هل أنت متأكد من حذف الصفحة "${s.title}"؟`))try{await $fetch(`/api/cms/pages/${s.id}`,{method:"DELETE"}),v.value=v.value.filter(t=>t.id!==s.id)}catch(t){console.error("Error deleting page:",t)}};return q([u,c,p],()=>{r.value=1}),z(()=>{U()}),(s,t)=>{const d=I,x=Q;return i(),n("div",Z,[t[17]||(t[17]=e("div",{class:"h-16"},null,-1)),e("div",G,[t[6]||(t[6]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"إدارة الصفحات"),e("p",{class:"text-gray-600"},"إدارة صفحات الموقع والمحتوى")],-1)),b(x,{to:"/admin/cms/pages/new",class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center"},{default:$(()=>[b(d,{name:"material-symbols:add",class:"h-5 w-5 ml-2"}),t[5]||(t[5]=P(" صفحة جديدة "))]),_:1})]),e("div",J,[e("div",K,[e("div",O,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"البحث",-1)),_(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>k(u)?u.value=o:null),type:"text",placeholder:"البحث في الصفحات...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[A,a(u)]])]),e("div",W,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"الحالة",-1)),_(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>k(c)?c.value=o:null),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},t[8]||(t[8]=[e("option",{value:""},"جميع الحالات",-1),e("option",{value:"published"},"منشور",-1),e("option",{value:"draft"},"مسودة",-1),e("option",{value:"archived"},"مؤرشف",-1)]),512),[[S,a(c)]])]),e("div",X,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"القالب",-1)),_(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>k(p)?p.value=o:null),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},t[10]||(t[10]=[H('<option value="">جميع القوالب</option><option value="home">الرئيسية</option><option value="about">من نحن</option><option value="services">الخدمات</option><option value="contact">اتصل بنا</option><option value="default">افتراضي</option>',6)]),512),[[S,a(p)]])])])]),e("div",Y,[t[16]||(t[16]=e("div",{class:"p-6 border-b border-gray-200"},[e("h2",{class:"text-lg font-semibold text-gray-900"},"الصفحات")],-1)),a(w)?(i(),n("div",tt,[b(d,{name:"material-symbols:refresh",class:"h-8 w-8 text-gray-400 animate-spin mx-auto"}),t[12]||(t[12]=e("p",{class:"text-gray-600 mt-2"},"جاري التحميل...",-1))])):a(g).length===0?(i(),n("div",et,[b(d,{name:"material-symbols:description",class:"h-12 w-12 text-gray-400 mx-auto"}),t[13]||(t[13]=e("p",{class:"text-gray-600 mt-2"},"لا توجد صفحات",-1))])):(i(),n("div",st,[e("table",ot,[t[15]||(t[15]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"الصفحة"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"الحالة"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"القالب"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"آخر تحديث"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"الإجراءات")])],-1)),e("tbody",at,[(i(!0),n(V,null,E(a(L),o=>(i(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",rt,[e("div",null,[e("div",lt,l(o.title),1),e("div",nt,l(o.slug),1)])]),e("td",it,[e("span",{class:C(["px-2 py-1 text-xs font-medium rounded-full",o.status==="published"?"bg-green-100 text-green-800":o.status==="draft"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"])},l(D(o.status)),3)]),e("td",dt,l(N(o.template)),1),e("td",ut,l(F(o.updated_at)),1),e("td",ct,[e("div",pt,[b(x,{to:`/admin/cms/pages/${o.id}`,class:"text-blue-600 hover:text-blue-900"},{default:$(()=>t[14]||(t[14]=[P(" تعديل ")])),_:2},1032,["to"]),e("button",{onClick:M=>B(o),class:C(["px-2 py-1 text-xs rounded",o.status==="published"?"bg-yellow-100 text-yellow-800 hover:bg-yellow-200":"bg-green-100 text-green-800 hover:bg-green-200"])},l(o.status==="published"?"إلغاء النشر":"نشر"),11,xt),e("button",{onClick:M=>j(o),class:"text-red-600 hover:text-red-900"}," حذف ",8,mt)])])]))),128))])])])),a(f)>1?(i(),n("div",gt,[e("div",bt,[e("div",yt," عرض "+l((a(r)-1)*y+1)+" إلى "+l(Math.min(a(r)*y,a(g).length))+" من "+l(a(g).length)+" صفحة ",1),e("div",vt,[e("button",{onClick:t[3]||(t[3]=o=>r.value=Math.max(1,a(r)-1)),disabled:a(r)===1,class:"px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," السابق ",8,ft),(i(!0),n(V,null,E(a(T),o=>(i(),n("span",{key:o,onClick:M=>r.value=o,class:C(["px-3 py-1 text-sm border rounded cursor-pointer",o===a(r)?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50"])},l(o),11,ht))),128)),e("button",{onClick:t[4]||(t[4]=o=>r.value=Math.min(a(f),a(r)+1)),disabled:a(r)===a(f),class:"px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," التالي ",8,wt)])])])):R("",!0)])])}}};export{$t as default};
