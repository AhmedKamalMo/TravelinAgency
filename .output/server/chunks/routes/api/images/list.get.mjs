import{c as e}from"../../../_/nitro.mjs";import{readdir as t,stat as i}from"fs/promises";import{join as o,extname as r}from"path";import"node:http";import"node:https";import"node:events";import"node:buffer";import"vue";import"node:fs";import"node:url";import"@iconify/utils";import"node:crypto";import"consola";import"node:module";import"ipx";import"node:path";const s=e((async e=>{try{const e=o(process.cwd(),"public","images","packages","imported"),s=o(process.cwd(),"public","images","packages","thumbnails"),a=(await t(e)).filter((e=>{const t=r(e).toLowerCase();return[".jpg",".jpeg",".png",".webp",".gif"].includes(t)})),m=[];for(const t of a)try{const a=o(e,t),p=await i(a),g=`thumb_${t}`,n=o(s,g);let c=!1;try{await i(n),c=!0}catch{c=!1}m.push({filename:t,originalName:t,path:`/images/packages/imported/${t}`,thumbnailPath:c?`/images/packages/thumbnails/${g}`:null,size:p.size,type:getMimeType(r(t)),createdAt:p.birthtime,modifiedAt:p.mtime})}catch(e){console.error(`Error processing file ${t}:`,e)}return m.sort(((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())),{success:!0,message:"Images retrieved successfully",images:m}}catch(e){return console.error("Error listing images:",e),{success:!1,message:"Failed to list images",images:[]}}}));function getMimeType(e){return{".jpg":"image/jpeg",".jpeg":"image/jpeg",".png":"image/png",".webp":"image/webp",".gif":"image/gif"}[e.toLowerCase()]||"image/jpeg"}export{s as default};
//# sourceMappingURL=list.get.mjs.map
