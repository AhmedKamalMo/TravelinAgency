import{c as t}from"../../_/nitro.mjs";import{executeQuery as e}from"../../_/database.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"vue";import"node:fs";import"node:url";import"@iconify/utils";import"node:crypto";import"consola";import"ipx";import"node:path";import"mysql2/promise";import"bcryptjs";import"jsonwebtoken";const a=t((async t=>{try{return{success:!0,bookings:(await e("\n      SELECT \n        b.id, \n        b.booking_number,\n        b.customer_name,\n        b.customer_email,\n        b.customer_phone,\n        p.title_ar as package_title,\n        b.departure_date as travel_date,\n        b.return_date,\n        b.guests_count,\n        b.booking_status as status,\n        b.payment_status,\n        b.total_amount,\n        b.paid_amount,\n        b.currency,\n        b.special_requests,\n        b.notes,\n        b.created_at,\n        b.updated_at\n      FROM bookings b\n      LEFT JOIN packages p ON b.package_id = p.id\n      ORDER BY b.created_at DESC\n    ")).map((t=>({id:t.id,booking_number:t.booking_number,customer_name:t.customer_name,customer_email:t.customer_email,customer_phone:t.customer_phone,package_title:t.package_title||"حزمة غير محددة",travel_date:t.travel_date,return_date:t.return_date,adults:t.guests_count||1,children:0,status:t.status||"pending",payment_status:t.payment_status||"pending",total_amount:t.total_amount||0,paid_amount:t.paid_amount||0,currency:t.currency||"SAR",special_requests:t.special_requests,notes:t.notes,created_at:t.created_at,updated_at:t.updated_at})))}}catch(t){return console.error("Error fetching bookings:",t),{error:"Failed to fetch bookings"}}}));export{a as default};
//# sourceMappingURL=bookings.mjs.map
