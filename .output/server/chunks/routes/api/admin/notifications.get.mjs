import{c as n}from"../../../_/nitro.mjs";import{executeQuery as e}from"../../../_/database.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"vue";import"node:fs";import"node:url";import"@iconify/utils";import"node:crypto";import"consola";import"node:module";import"ipx";import"node:path";import"mysql2/promise";import"bcryptjs";import"jsonwebtoken";const t=n((async n=>{try{console.log("üîî Fetching admin notifications...");const n=await e("\n      SELECT \n        id,\n        name,\n        email,\n        phone,\n        message,\n        'contact' as type,\n        'ÿ±ÿ≥ÿßŸÑÿ© ÿ™ŸàÿßÿµŸÑ ÿ¨ÿØŸäÿØÿ©' as title,\n        'ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿ≥ÿßŸÑÿ© ÿ™ŸàÿßÿµŸÑ ÿ¨ÿØŸäÿØÿ© ŸÖŸÜ ÿßŸÑÿπŸÖŸäŸÑ' as description,\n        created_at,\n        is_read\n      FROM contact_messages \n      WHERE is_read = 0\n      ORDER BY created_at DESC\n      LIMIT 10\n    "),t=await e("\n      SELECT \n        id,\n        name,\n        email,\n        phone,\n        message,\n        package_name,\n        'package' as type,\n        'ÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ± ÿπŸÜ ÿ®ÿßŸÇÿ© ÿ¨ÿØŸäÿØÿ©' as title,\n        CONCAT('ÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ± ÿ¨ÿØŸäÿØ ÿπŸÜ ÿ®ÿßŸÇÿ©: ', package_name) as description,\n        created_at,\n        is_read\n      FROM package_inquiries \n      WHERE is_read = 0\n      ORDER BY created_at DESC\n      LIMIT 10\n    "),a=await e("\n      SELECT \n        id,\n        name,\n        email,\n        phone,\n        message,\n        destination_name,\n        'destination' as type,\n        'ÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ± ÿπŸÜ Ÿàÿ¨Ÿáÿ© ÿ¨ÿØŸäÿØÿ©' as title,\n        CONCAT('ÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ± ÿ¨ÿØŸäÿØ ÿπŸÜ Ÿàÿ¨Ÿáÿ©: ', destination_name) as description,\n        created_at,\n        is_read\n      FROM destination_inquiries \n      WHERE is_read = 0\n      ORDER BY created_at DESC\n      LIMIT 10\n    "),i=await e("\n      SELECT \n        id,\n        customer_name as name,\n        customer_email as email,\n        customer_phone as phone,\n        'ÿ≠ÿ¨ÿ≤ ÿ¨ÿØŸäÿØ' as message,\n        package_name,\n        'booking' as type,\n        'ÿ≠ÿ¨ÿ≤ ÿ¨ÿØŸäÿØ' as title,\n        CONCAT('ÿ≠ÿ¨ÿ≤ ÿ¨ÿØŸäÿØ ŸÑŸÑÿ®ÿßŸÇÿ©: ', package_name) as description,\n        created_at,\n        is_read\n      FROM bookings \n      WHERE is_read = 0\n      ORDER BY created_at DESC\n      LIMIT 10\n    "),o=[...n,...t,...a,...i].sort(((n,e)=>new Date(e.created_at).getTime()-new Date(n.created_at).getTime())),s=o.filter((n=>!n.is_read)).length;return{success:!0,data:{notifications:o.slice(0,20),totalUnread:s,counts:{contact:n.length,package:t.length,destination:a.length,booking:i.length}}}}catch(n){return console.error("‚ùå Error fetching admin notifications:",n),{success:!0,data:{notifications:[],totalUnread:0,counts:{contact:0,package:0,destination:0,booking:0}}}}}));export{t as default};
//# sourceMappingURL=notifications.get.mjs.map
