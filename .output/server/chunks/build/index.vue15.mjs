import{i as e}from"./AdminPageHeader.vue.mjs";import{q as t}from"./index2.mjs";import{M as s}from"./nuxt-link.mjs";import{ref as a,computed as r,watch as i,mergeProps as n,withCtx as o,createVNode as l,unref as d,createTextVNode as c,useSSRContext as m}from"vue";import{ssrRenderAttrs as u,ssrRenderComponent as p,ssrRenderAttr as v,ssrIncludeBooleanAttr as x,ssrLooseContain as g,ssrLooseEqual as b,ssrRenderList as y,ssrInterpolate as h,ssrRenderClass as w}from"vue/server-renderer";import{p as f}from"./useExcelExport.mjs";import{H as _}from"./server.mjs";import"@iconify/utils/lib/css/icon";import"@iconify/vue";import"fs";import"stream";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:url";import"@iconify/utils";import"node:crypto";import"consola";import"node:module";import"ipx";import"node:path";import"vue-router";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"unhead/utils";import"devalue";import"unhead/plugins";import"@unhead/schema-org";import"@unhead/schema-org/vue";import"floating-vue";const $={__name:"index",__ssrInlineRender:!0,setup(m){const $=a([]),L=a(!0),C=a(""),A=a(""),j=a(""),k=a(1),D=r((()=>{let e=$.value;return C.value&&(e=e.filter((e=>e.name_ar&&e.name_ar.toLowerCase().includes(C.value.toLowerCase())||e.name_en&&e.name_en.toLowerCase().includes(C.value.toLowerCase())||e.name&&e.name.toLowerCase().includes(C.value.toLowerCase())||e.description_ar&&e.description_ar.toLowerCase().includes(C.value.toLowerCase())||e.description_en&&e.description_en.toLowerCase().includes(C.value.toLowerCase())||e.description&&e.description.toLowerCase().includes(C.value.toLowerCase())))),A.value&&(e=e.filter((e=>e.category===A.value))),j.value&&(e=e.filter((e=>{const t=1===e.active||!0===e.active;return"active"===j.value?t:!t}))),e.slice(10*(k.value-1),10*k.value)})),E=r((()=>{let e=$.value;return C.value&&(e=e.filter((e=>e.name_ar&&e.name_ar.toLowerCase().includes(C.value.toLowerCase())||e.name_en&&e.name_en.toLowerCase().includes(C.value.toLowerCase())||e.name&&e.name.toLowerCase().includes(C.value.toLowerCase())||e.description_ar&&e.description_ar.toLowerCase().includes(C.value.toLowerCase())||e.description_en&&e.description_en.toLowerCase().includes(C.value.toLowerCase())||e.description&&e.description.toLowerCase().includes(C.value.toLowerCase())))),A.value&&(e=e.filter((e=>e.category===A.value))),j.value&&(e=e.filter((e=>{const t=1===e.active||!0===e.active;return"active"===j.value?t:!t}))),e.length})),S=r((()=>Math.ceil(E.value/10))),H$1=()=>{try{const{exportDestinationsToExcel:e}=f();e($.value)?console.log("تم تصدير الوجهات بنجاح"):console.error("فشل في تصدير الوجهات")}catch(e){console.error("خطأ في تصدير الوجهات:",e)}},z=e=>({saudi:"bg-green-100 text-green-800",international:"bg-blue-100 text-blue-800"}[e]||"bg-gray-100 text-gray-800"),Q=e=>({active:"bg-green-100 text-green-800",inactive:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800");return i([C,A,j],(()=>{k.value=1})),_({title:"إدارة الوجهات - Wonder Land Admin",meta:[{name:"description",content:"إدارة وتحرير الوجهات السياحية"},{name:"robots",content:"noindex, nofollow"}]}),(a,r,i,m)=>{const f=e,_=t,$=s;r(`<div${u(n({class:"space-y-6"},m))}><div class="h-16"></div>`),r(p(f,{title:"إدارة الوجهات السياحية",description:"إدارة وتحرير الوجهات السياحية المتاحة"},{actions:o(((e,t,s,a)=>{if(!t)return[l("button",{onClick:H$1,class:"inline-flex items-center px-3 sm:px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm"},[l(_,{name:"material-symbols:download",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),l("span",{class:"hidden sm:inline"},"تصدير البيانات"),l("span",{class:"sm:hidden"},"تصدير")]),l($,{to:"/admin/destinations/create",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm"},{default:o((()=>[l(_,{name:"material-symbols:add",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),l("span",{class:"hidden sm:inline"},"إضافة وجهة جديدة"),l("span",{class:"sm:hidden"},"إضافة")])),_:1})];t(`<button class="inline-flex items-center px-3 sm:px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm"${a}>`),t(p(_,{name:"material-symbols:download",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"},null,s,a)),t(`<span class="hidden sm:inline"${a}>تصدير البيانات</span><span class="sm:hidden"${a}>تصدير</span></button>`),t(p($,{to:"/admin/destinations/create",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm"},{default:o(((e,t,s,a)=>{if(!t)return[l(_,{name:"material-symbols:add",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),l("span",{class:"hidden sm:inline"},"إضافة وجهة جديدة"),l("span",{class:"sm:hidden"},"إضافة")];t(p(_,{name:"material-symbols:add",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"},null,s,a)),t(`<span class="hidden sm:inline"${a}>إضافة وجهة جديدة</span><span class="sm:hidden"${a}>إضافة</span>`)})),_:1},s,a))})),_:1},i)),r('<div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6"><div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="relative">'),r(p(_,{name:"material-symbols:search",class:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"},null,i)),r(`<input${v("value",d(C))} type="text" placeholder="البحث في الوجهات..." class="w-full pr-10 pl-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></div><select class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"><option value=""${x(Array.isArray(d(A))?g(d(A),""):b(d(A),""))?" selected":""}>جميع الأنواع</option><option value="saudi"${x(Array.isArray(d(A))?g(d(A),"saudi"):b(d(A),"saudi"))?" selected":""}>سعودي</option><option value="international"${x(Array.isArray(d(A))?g(d(A),"international"):b(d(A),"international"))?" selected":""}>عالمي</option></select><select class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"><option value=""${x(Array.isArray(d(j))?g(d(j),""):b(d(j),""))?" selected":""}>جميع الحالات</option><option value="active"${x(Array.isArray(d(j))?g(d(j),"active"):b(d(j),"active"))?" selected":""}>نشط</option><option value="inactive"${x(Array.isArray(d(j))?g(d(j),"inactive"):b(d(j),"inactive"))?" selected":""}>غير نشط</option></select></div></div><div class="bg-white rounded-lg shadow-sm border border-gray-200">`),d(L)?(r('<div class="flex justify-center items-center py-12">'),r(p(_,{name:"material-symbols:progress-activity",class:"animate-spin h-8 w-8 text-blue-600"},null,i)),r('<span class="mr-3 text-gray-600">جارٍ تحميل الوجهات...</span></div>')):d(D).length>0?(r('<div class="overflow-x-auto"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"> الوجهة </th><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"> النوع </th><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"> الحالة </th><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"> تاريخ الإنشاء </th><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"> الإجراءات </th></tr></thead><tbody class="bg-white divide-y divide-gray-200">\x3c!--[--\x3e'),y(d(D),(e=>{r(`<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap"><div class="flex items-center"><img${v("src",e.image||e.image_url||"/images/placeholder.jpg")}${v("alt",e.name_ar||e.name_en)} class="h-12 w-12 rounded-lg object-cover ml-4" loading="lazy"><div><div class="text-sm font-medium text-gray-900">${h(e.name_ar||e.name_en||e.name)}</div><div class="text-sm text-gray-500">${h(((e,t)=>e?e.length>t?e.substring(0,t)+"...":e:"")(e.description_ar||e.description_en||e.description,50))}</div></div></div></td><td class="px-6 py-4 whitespace-nowrap"><span class="${w([z(e.category),"px-2 py-1 text-xs font-medium rounded-full"])}">${h((e=>({saudi:"سعودي",international:"عالمي"}[e]||e))(e.category))}</span></td><td class="px-6 py-4 whitespace-nowrap"><span class="${w([Q(e.active?"active":"inactive"),"px-2 py-1 text-xs font-medium rounded-full"])}">${h((e=>({active:"نشط",inactive:"غير نشط"}[e]||e))(e.active?"active":"inactive"))}</span></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${h((e=>new Date(e).toLocaleDateString("ar-SA"))(e.created_at))}</td><td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium"><div class="flex items-center space-x-2 space-x-reverse">`),r(p($,{to:`/admin/destinations/${e.id}`,class:"text-blue-600 hover:text-blue-900 p-1 rounded",title:"عرض"},{default:o(((e,t,s,a)=>{if(!t)return[l(_,{name:"material-symbols:visibility",class:"h-4 w-4"})];t(p(_,{name:"material-symbols:visibility",class:"h-4 w-4"},null,s,a))})),_:2},i)),r(p($,{to:`/admin/destinations/${e.id}/edit`,class:"text-green-600 hover:text-green-900 p-1 rounded",title:"تحرير"},{default:o(((e,t,s,a)=>{if(!t)return[l(_,{name:"material-symbols:edit",class:"h-4 w-4"})];t(p(_,{name:"material-symbols:edit",class:"h-4 w-4"},null,s,a))})),_:2},i)),r(`<button class="${w([e.active?"text-orange-600 hover:text-orange-900":"text-green-600 hover:text-green-900","p-1 rounded"])}"${v("title",e.active?"إلغاء التفعيل":"تفعيل")}>`),r(p(_,{name:e.active?"material-symbols:pause":"material-symbols:play-arrow",class:"h-4 w-4"},null,i)),r('</button><button class="text-red-600 hover:text-red-900 p-1 rounded" title="حذف">'),r(p(_,{name:"material-symbols:delete",class:"h-4 w-4"},null,i)),r("</button></div></td></tr>")})),r("\x3c!--]--\x3e</tbody></table></div>")):(r('<div class="text-center py-12">'),r(p(_,{name:"material-symbols:place",class:"h-16 w-16 text-gray-300 mx-auto mb-4"},null,i)),r('<h3 class="text-lg font-medium text-gray-900 mb-2">لا توجد وجهات</h3><p class="text-gray-500 mb-6">لم يتم العثور على أي وجهات سياحية</p>'),r(p($,{to:"/admin/destinations/create",class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},{default:o(((e,t,s,a)=>{if(!t)return[l(_,{name:"material-symbols:add",class:"h-5 w-5 ml-2"}),c(" إضافة وجهة جديدة ")];t(p(_,{name:"material-symbols:add",class:"h-5 w-5 ml-2"},null,s,a)),t(" إضافة وجهة جديدة ")})),_:1},i)),r("</div>")),r("</div>"),d(S)>1?r(`<div class="flex items-center justify-between"><div class="text-sm text-gray-700"> عرض ${h(10*(d(k)-1)+1)} إلى ${h(Math.min(10*d(k),d(E)))} من أصل ${h(d(E))} وجهة </div><div class="flex space-x-1 space-x-reverse"><button${x(1===d(k))?" disabled":""} class="px-3 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"> السابق </button><span class="px-3 py-2 text-sm bg-blue-600 text-white border border-blue-600 rounded-md">${h(d(k))}</span><button${x(d(k)===d(S))?" disabled":""} class="px-3 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"> التالي </button></div></div>`):r("\x3c!----\x3e"),r("</div>")}}},L=$.setup;$.setup=(e,t)=>{const s=m();return(s.modules||(s.modules=new Set)).add("pages/admin/destinations/index.vue"),L?L(e,t):void 0};export{$ as default};
//# sourceMappingURL=index.vue15.mjs.map
