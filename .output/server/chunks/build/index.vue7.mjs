import{i as e}from"./AdminPageHeader.vue.mjs";import{M as t}from"./nuxt-link.mjs";import{q as s}from"./index2.mjs";import{d as a}from"./AdminStats.vue.mjs";import{ref as l,computed as r,watch as n,mergeProps as i,withCtx as o,createVNode as d,unref as m,createTextVNode as c,useSSRContext as u}from"vue";import{ssrRenderAttrs as p,ssrRenderComponent as g,ssrRenderAttr as b,ssrIncludeBooleanAttr as h,ssrLooseContain as x,ssrLooseEqual as y,ssrRenderList as v,ssrInterpolate as w,ssrRenderClass as f}from"vue/server-renderer";import{H as $}from"./server.mjs";import"@iconify/utils/lib/css/icon";import"@iconify/vue";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:url";import"@iconify/utils";import"node:crypto";import"consola";import"node:module";import"ipx";import"node:path";import"vue-router";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"unhead/utils";import"devalue";import"unhead/plugins";import"@unhead/schema-org";import"@unhead/schema-org/vue";import"floating-vue";const C={__name:"index",__ssrInlineRender:!0,setup(u){const C=l([]),L=l(!0),A=l(""),k=l(""),j=l(""),S=l(1),D=r((()=>{let e=C.value;return A.value&&(e=e.filter((e=>e.title_ar&&e.title_ar.toLowerCase().includes(A.value.toLowerCase())||e.title_en&&e.title_en.toLowerCase().includes(A.value.toLowerCase())||e.title&&e.title.toLowerCase().includes(A.value.toLowerCase())||e.content_ar&&e.content_ar.toLowerCase().includes(A.value.toLowerCase())||e.content_en&&e.content_en.toLowerCase().includes(A.value.toLowerCase())||e.content&&e.content.toLowerCase().includes(A.value.toLowerCase())))),k.value&&(e=e.filter((e=>e.status===k.value))),j.value&&(e=e.filter((e=>e.type===j.value))),e.slice(10*(S.value-1),10*S.value)})),O=r((()=>{let e=C.value;return A.value&&(e=e.filter((e=>e.title_ar&&e.title_ar.toLowerCase().includes(A.value.toLowerCase())||e.title_en&&e.title_en.toLowerCase().includes(A.value.toLowerCase())||e.title&&e.title.toLowerCase().includes(A.value.toLowerCase())||e.content_ar&&e.content_ar.toLowerCase().includes(A.value.toLowerCase())||e.content_en&&e.content_en.toLowerCase().includes(A.value.toLowerCase())||e.content&&e.content.toLowerCase().includes(A.value.toLowerCase())))),k.value&&(e=e.filter((e=>e.status===k.value))),j.value&&(e=e.filter((e=>e.type===j.value))),e.length})),B=r((()=>Math.ceil(O.value/10))),M=r((()=>C.value.length)),P=r((()=>C.value.filter((e=>"published"===e.status)).length)),H=r((()=>C.value.filter((e=>"draft"===e.status)).length)),W=r((()=>{const e=new Date;return e.setHours(0,0,0,0),C.value.filter((t=>new Date(t.created_at)>=e)).length})),z=r((()=>[{key:"total",label:"إجمالي الصفحات",value:M.value,icon:"material-symbols:article",iconBg:"bg-blue-100",iconColor:"text-blue-600"},{key:"published",label:"منشور",value:P.value,icon:"material-symbols:visibility",iconBg:"bg-green-100",iconColor:"text-green-600"},{key:"draft",label:"مسودة",value:H.value,icon:"material-symbols:edit",iconBg:"bg-orange-100",iconColor:"text-orange-600"},{key:"today",label:"اليوم",value:W.value,icon:"material-symbols:today",iconBg:"bg-purple-100",iconColor:"text-purple-600"}]));r((()=>{const e=C.value.reduce(((e,t)=>(e[t.type]=(e[t.type]||0)+1,e)),{});return{labels:Object.keys(e).map((e=>_(e))),datasets:[{data:Object.values(e),backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)"],borderColor:["rgb(59, 130, 246)","rgb(16, 185, 129)","rgb(245, 158, 11)","rgb(239, 68, 68)"]}]}})),r((()=>{const e=C.value.reduce(((e,t)=>(e[t.status]=(e[t.status]||0)+1,e)),{});return{labels:Object.keys(e).map((e=>E(e))),datasets:[{data:Object.values(e),backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(245, 158, 11, 0.8)","rgba(107, 114, 128, 0.8)"],borderColor:["rgb(34, 197, 94)","rgb(245, 158, 11)","rgb(107, 114, 128)"]}]}})),r((()=>{const e={},t=["يناير","فبراير","مارس","أبريل","مايو","يونيو"];return t.forEach((t=>{e[t]=0})),C.value.forEach((s=>{if("published"===s.status){const a=new Date(s.created_at).getMonth();a<6&&e[t[a]]++}})),{labels:t,datasets:[{label:"عدد الصفحات المنشورة",data:Object.values(e),backgroundColor:"rgba(139, 92, 246, 0.8)",borderColor:"rgb(139, 92, 246)",borderWidth:1}]}})),l({plugins:{legend:{position:"bottom",labels:{padding:15,usePointStyle:!0}}}}),l({plugins:{legend:{position:"bottom",labels:{padding:15,usePointStyle:!0}}}}),l({plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}});const _=e=>({page:"صفحة",post:"مقال",news:"أخبار"}[e]||e),K=e=>({page:"bg-blue-100 text-blue-800",post:"bg-green-100 text-green-800",news:"bg-purple-100 text-purple-800"}[e]||"bg-gray-100 text-gray-800"),E=e=>({published:"منشور",draft:"مسودة",archived:"مؤرشف"}[e]||e),U=e=>({published:"bg-green-100 text-green-800",draft:"bg-orange-100 text-orange-800",archived:"bg-gray-100 text-gray-800"}[e]||"bg-gray-100 text-gray-800");return n([A,k,j],(()=>{S.value=1})),$({title:"إدارة المحتوى - Wonder Land Admin",meta:[{name:"description",content:"إدارة صفحات الموقع والمحتوى"},{name:"robots",content:"noindex, nofollow"}]}),(l,r,n,u)=>{const $=e,C=t,M=s,P=a;r(`<div${p(i({class:"space-y-6"},u))}><div class="h-16"></div>`),r(g($,{title:"إدارة المحتوى",description:"إدارة صفحات الموقع والمحتوى"},{actions:o(((e,t,s,a)=>{if(!t)return[d(C,{to:"/admin/content/analytics",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-sm"},{default:o((()=>[d(M,{name:"material-symbols:analytics",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),d("span",{class:"hidden sm:inline"},"الإحصائيات"),d("span",{class:"sm:hidden"},"إحصائيات")])),_:1}),d(C,{to:"/admin/content/templates",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm"},{default:o((()=>[d(M,{name:"material-symbols:widgets",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),d("span",{class:"hidden sm:inline"},"القوالب"),d("span",{class:"sm:hidden"},"قوالب")])),_:1}),d(C,{to:"/admin/content/editor",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm"},{default:o((()=>[d(M,{name:"material-symbols:edit",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),d("span",{class:"hidden sm:inline"},"محرر المحتوى"),d("span",{class:"sm:hidden"},"محرر")])),_:1}),d(C,{to:"/admin/content/create",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm"},{default:o((()=>[d(M,{name:"material-symbols:add",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),d("span",{class:"hidden sm:inline"},"إضافة صفحة جديدة"),d("span",{class:"sm:hidden"},"إضافة")])),_:1})];t(g(C,{to:"/admin/content/analytics",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-sm"},{default:o(((e,t,s,a)=>{if(!t)return[d(M,{name:"material-symbols:analytics",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),d("span",{class:"hidden sm:inline"},"الإحصائيات"),d("span",{class:"sm:hidden"},"إحصائيات")];t(g(M,{name:"material-symbols:analytics",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"},null,s,a)),t(`<span class="hidden sm:inline"${a}>الإحصائيات</span><span class="sm:hidden"${a}>إحصائيات</span>`)})),_:1},s,a)),t(g(C,{to:"/admin/content/templates",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm"},{default:o(((e,t,s,a)=>{if(!t)return[d(M,{name:"material-symbols:widgets",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),d("span",{class:"hidden sm:inline"},"القوالب"),d("span",{class:"sm:hidden"},"قوالب")];t(g(M,{name:"material-symbols:widgets",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"},null,s,a)),t(`<span class="hidden sm:inline"${a}>القوالب</span><span class="sm:hidden"${a}>قوالب</span>`)})),_:1},s,a)),t(g(C,{to:"/admin/content/editor",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm"},{default:o(((e,t,s,a)=>{if(!t)return[d(M,{name:"material-symbols:edit",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),d("span",{class:"hidden sm:inline"},"محرر المحتوى"),d("span",{class:"sm:hidden"},"محرر")];t(g(M,{name:"material-symbols:edit",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"},null,s,a)),t(`<span class="hidden sm:inline"${a}>محرر المحتوى</span><span class="sm:hidden"${a}>محرر</span>`)})),_:1},s,a)),t(g(C,{to:"/admin/content/create",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm"},{default:o(((e,t,s,a)=>{if(!t)return[d(M,{name:"material-symbols:add",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),d("span",{class:"hidden sm:inline"},"إضافة صفحة جديدة"),d("span",{class:"sm:hidden"},"إضافة")];t(g(M,{name:"material-symbols:add",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"},null,s,a)),t(`<span class="hidden sm:inline"${a}>إضافة صفحة جديدة</span><span class="sm:hidden"${a}>إضافة</span>`)})),_:1},s,a))})),_:1},n)),r(g(P,{stats:m(z)},null,n)),r('<div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6"><div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="relative">'),r(g(M,{name:"material-symbols:search",class:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"},null,n)),r(`<input${b("value",m(A))} type="text" placeholder="البحث في الصفحات..." class="w-full pr-10 pl-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></div><select class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"><option value=""${h(Array.isArray(m(k))?x(m(k),""):y(m(k),""))?" selected":""}>جميع الحالات</option><option value="published"${h(Array.isArray(m(k))?x(m(k),"published"):y(m(k),"published"))?" selected":""}>منشور</option><option value="draft"${h(Array.isArray(m(k))?x(m(k),"draft"):y(m(k),"draft"))?" selected":""}>مسودة</option><option value="archived"${h(Array.isArray(m(k))?x(m(k),"archived"):y(m(k),"archived"))?" selected":""}>مؤرشف</option></select><select class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"><option value=""${h(Array.isArray(m(j))?x(m(j),""):y(m(j),""))?" selected":""}>جميع الأنواع</option><option value="page"${h(Array.isArray(m(j))?x(m(j),"page"):y(m(j),"page"))?" selected":""}>صفحة</option><option value="post"${h(Array.isArray(m(j))?x(m(j),"post"):y(m(j),"post"))?" selected":""}>مقال</option><option value="news"${h(Array.isArray(m(j))?x(m(j),"news"):y(m(j),"news"))?" selected":""}>أخبار</option></select></div></div><div class="bg-white rounded-lg shadow-sm border border-gray-200">`),m(L)?(r('<div class="flex justify-center items-center py-12">'),r(g(M,{name:"material-symbols:progress-activity",class:"animate-spin h-8 w-8 text-blue-600"},null,n)),r('<span class="mr-3 text-gray-600">جارٍ تحميل الصفحات...</span></div>')):m(D).length>0?(r('<div class="overflow-x-auto"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"> الصفحة </th><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"> النوع </th><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"> الحالة </th><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"> تاريخ الإنشاء </th><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"> الإجراءات </th></tr></thead><tbody class="bg-white divide-y divide-gray-200">\x3c!--[--\x3e'),v(m(D),(e=>{r('<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap"><div class="flex items-center"><div class="flex-shrink-0 h-10 w-10"><div class="h-10 w-10 rounded-lg bg-gray-300 flex items-center justify-center">'),r(g(M,{name:"material-symbols:article",class:"h-6 w-6 text-gray-600"},null,n)),r(`</div></div><div class="mr-4"><div class="text-sm font-medium text-gray-900">${w(e.title_ar||e.title_en||e.title)}</div><div class="text-sm text-gray-500">${w(((e,t)=>e?e.length>t?e.substring(0,t)+"...":e:"")(e.content_ar||e.content_en||e.content,50))}</div></div></div></td><td class="px-6 py-4 whitespace-nowrap"><span class="${f([K(e.type),"px-2 py-1 text-xs font-medium rounded-full"])}">${w(_(e.type))}</span></td><td class="px-6 py-4 whitespace-nowrap"><span class="${f([U(e.status),"px-2 py-1 text-xs font-medium rounded-full"])}">${w(E(e.status))}</span></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${w((e=>new Date(e).toLocaleDateString("ar-SA"))(e.created_at))}</td><td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium"><div class="flex items-center space-x-2 space-x-reverse">`),r(g(C,{to:`/admin/content/preview/${e.id}`,class:"text-blue-600 hover:text-blue-900 p-1 rounded",title:"معاينة"},{default:o(((e,t,s,a)=>{if(!t)return[d(M,{name:"material-symbols:visibility",class:"h-4 w-4"})];t(g(M,{name:"material-symbols:visibility",class:"h-4 w-4"},null,s,a))})),_:2},n)),r(g(C,{to:`/admin/content/editor?page=${e.id}`,class:"text-purple-600 hover:text-purple-900 p-1 rounded",title:"تحرير متقدم"},{default:o(((e,t,s,a)=>{if(!t)return[d(M,{name:"material-symbols:design-services",class:"h-4 w-4"})];t(g(M,{name:"material-symbols:design-services",class:"h-4 w-4"},null,s,a))})),_:2},n)),r(g(C,{to:`/admin/content/${e.id}/edit`,class:"text-green-600 hover:text-green-900 p-1 rounded",title:"تحرير"},{default:o(((e,t,s,a)=>{if(!t)return[d(M,{name:"material-symbols:edit",class:"h-4 w-4"})];t(g(M,{name:"material-symbols:edit",class:"h-4 w-4"},null,s,a))})),_:2},n)),r(`<button class="${f(["published"===e.status?"text-orange-600 hover:text-orange-900":"text-green-600 hover:text-green-900","p-1 rounded"])}"${b("title","published"===e.status?"إلغاء النشر":"نشر")}>`),r(g(M,{name:"published"===e.status?"material-symbols:visibility-off":"material-symbols:visibility",class:"h-4 w-4"},null,n)),r('</button><button class="text-red-600 hover:text-red-900 p-1 rounded" title="حذف">'),r(g(M,{name:"material-symbols:delete",class:"h-4 w-4"},null,n)),r("</button></div></td></tr>")})),r("\x3c!--]--\x3e</tbody></table></div>")):(r('<div class="text-center py-12">'),r(g(M,{name:"material-symbols:article",class:"h-16 w-16 text-gray-300 mx-auto mb-4"},null,n)),r('<h3 class="text-lg font-medium text-gray-900 mb-2">لا توجد صفحات</h3><p class="text-gray-500 mb-6">لم يتم العثور على أي صفحات</p>'),r(g(C,{to:"/admin/content/create",class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},{default:o(((e,t,s,a)=>{if(!t)return[d(M,{name:"material-symbols:add",class:"h-5 w-5 ml-2"}),c(" إضافة صفحة جديدة ")];t(g(M,{name:"material-symbols:add",class:"h-5 w-5 ml-2"},null,s,a)),t(" إضافة صفحة جديدة ")})),_:1},n)),r("</div>")),r("</div>"),m(B)>1?r(`<div class="flex items-center justify-between"><div class="text-sm text-gray-700"> عرض ${w(10*(m(S)-1)+1)} إلى ${w(Math.min(10*m(S),m(O)))} من أصل ${w(m(O))} صفحة </div><div class="flex space-x-1 space-x-reverse"><button${h(1===m(S))?" disabled":""} class="px-3 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"> السابق </button><span class="px-3 py-2 text-sm bg-blue-600 text-white border border-blue-600 rounded-md">${w(m(S))}</span><button${h(m(S)===m(B))?" disabled":""} class="px-3 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"> التالي </button></div></div>`):r("\x3c!----\x3e"),r("</div>")}}},L=C.setup;C.setup=(e,t)=>{const s=u();return(s.modules||(s.modules=new Set)).add("pages/admin/content/index.vue"),L?L(e,t):void 0};export{C as default};
//# sourceMappingURL=index.vue7.mjs.map
