import{i as e}from"./AdminPageHeader.vue.mjs";import{q as t}from"./index2.mjs";import{M as s}from"./nuxt-link.mjs";import{t as a,l,u as i}from"./AdminSelect.vue.mjs";import{mergeProps as n,useSSRContext as o,computed as d,unref as m,ref as c,watch as u,withCtx as p,createVNode as x,isRef as g,createTextVNode as v,toDisplayString as y}from"vue";import{ssrRenderAttrs as b,ssrRenderComponent as h,ssrRenderList as f,ssrInterpolate as w,ssrRenderSlot as $,ssrRenderClass as _,ssrRenderAttr as L,ssrIncludeBooleanAttr as P}from"vue/server-renderer";import{$ as C,H as V}from"./server.mjs";import{p as A}from"./useExcelExport.mjs";import"@iconify/utils/lib/css/icon";import"@iconify/vue";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:url";import"@iconify/utils";import"node:crypto";import"consola";import"ipx";import"node:path";import"vue-router";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"unhead/utils";import"devalue";import"unhead/plugins";import"@unhead/schema-org";import"@unhead/schema-org/vue";import"floating-vue";import"fs";import"stream";const S={__name:"AdminTable",__ssrInlineRender:!0,props:{items:{type:Array,default:()=>[]},columns:{type:Array,required:!0},actions:{type:Array,default:null},loading:{type:Boolean,default:!1},emptyIcon:{type:String,default:"material-symbols:inbox"},emptyTitle:{type:String,default:"لا توجد بيانات"},emptyDescription:{type:String,default:"لم يتم العثور على أي بيانات"},emptyAction:{type:Object,default:null}},setup(e){const r=(e,t)=>t.split(".").reduce(((e,t)=>null==e?void 0:e[t]),e);return(s,a,l,i)=>{const o=t;a(`<div${b(n({class:"bg-white rounded-lg shadow-sm border border-gray-200"},i))}>`),e.loading?(a('<div class="flex justify-center items-center py-12">'),a(h(o,{name:"material-symbols:progress-activity",class:"animate-spin h-8 w-8 text-blue-600"},null,l)),a('<span class="mr-3 text-gray-600">جارٍ التحميل...</span></div>')):e.items.length>0?(a('<div class="hidden md:block overflow-x-auto"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr>\x3c!--[--\x3e'),f(e.columns,(e=>{a(`<th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">${w(e.label)}</th>`)})),a("\x3c!--]--\x3e"),e.actions?a('<th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"> الإجراءات </th>'):a("\x3c!----\x3e"),a('</tr></thead><tbody class="bg-white divide-y divide-gray-200">\x3c!--[--\x3e'),f(e.items,(t=>{a('<tr class="hover:bg-gray-50">\x3c!--[--\x3e'),f(e.columns,(e=>{a('<td class="px-6 py-4 whitespace-nowrap">'),$(s.$slots,`column-${e.key}`,{item:t,value:r(t,e.key)},(()=>{a(`${w(r(t,e.key))}`)}),a,l),a("</td>")})),a("\x3c!--]--\x3e"),e.actions?(a('<td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">'),$(s.$slots,"actions",{item:t},(()=>{a('<div class="flex items-center space-x-2 space-x-reverse">\x3c!--[--\x3e'),f(e.actions,(e=>{a(`<button class="${_([e.class,"p-1 rounded"])}"${L("title",e.title)}>`),a(h(o,{name:e.icon,class:"h-4 w-4"},null,l)),a("</button>")})),a("\x3c!--]--\x3e</div>")}),a,l),a("</td>")):a("\x3c!----\x3e"),a("</tr>")})),a("\x3c!--]--\x3e</tbody></table></div>")):e.items.length>0?(a('<div class="md:hidden divide-y divide-gray-200">\x3c!--[--\x3e'),f(e.items,(t=>{a('<div class="p-4 hover:bg-gray-50 transition-colors"><div class="space-y-3">\x3c!--[--\x3e'),f(e.columns,(e=>{a(`<div class="flex justify-between items-start"><div class="flex-1"><p class="text-xs font-medium text-gray-500 mb-1">${w(e.label)}</p><div class="text-sm text-gray-900">`),$(s.$slots,`column-${e.key}`,{item:t,value:r(t,e.key)},(()=>{a(`${w(r(t,e.key))}`)}),a,l),a("</div></div></div>")})),a("\x3c!--]--\x3e"),e.actions?(a('<div class="flex items-center justify-end space-x-2 space-x-reverse pt-2 border-t border-gray-100">'),$(s.$slots,"actions",{item:t},(()=>{a("\x3c!--[--\x3e"),f(e.actions,(e=>{a(`<button class="${_([e.class,"p-2 rounded-lg text-sm font-medium"])}"${L("title",e.title)}>`),a(h(o,{name:e.icon,class:"h-4 w-4 ml-1"},null,l)),a(` ${w(e.label)}</button>`)})),a("\x3c!--]--\x3e")}),a,l),a("</div>")):a("\x3c!----\x3e"),a("</div></div>")})),a("\x3c!--]--\x3e</div>")):(a('<div class="text-center py-12">'),a(h(o,{name:e.emptyIcon,class:"h-16 w-16 text-gray-300 mx-auto mb-4"},null,l)),a(`<h3 class="text-lg font-medium text-gray-900 mb-2">${w(e.emptyTitle)}</h3><p class="text-gray-500 mb-6">${w(e.emptyDescription)}</p>`),$(s.$slots,"empty-actions",{},(()=>{e.emptyAction?(a(`<button class="${_([e.emptyAction.class,"inline-flex items-center px-4 py-2 rounded-lg transition-colors"])}">`),a(h(o,{name:e.emptyAction.icon,class:"h-5 w-5 ml-2"},null,l)),a(` ${w(e.emptyAction.label)}</button>`)):a("\x3c!----\x3e")}),a,l),a("</div>")),a("</div>")}}},U=S.setup;S.setup=(e,t)=>{const s=o();return(s.modules||(s.modules=new Set)).add("components/admin/AdminTable.vue"),U?U(e,t):void 0};const N={__name:"AdminPagination",__ssrInlineRender:!0,props:{currentPage:{type:Number,required:!0},totalPages:{type:Number,required:!0},totalItems:{type:Number,required:!0},itemsPerPage:{type:Number,default:10},itemName:{type:String,default:"عنصر"},maxVisiblePages:{type:Number,default:5}},emits:["update:currentPage"],setup(e,{emit:t}){const s=d((()=>{const e=[],t=Math.max(1,currentPage.value-Math.floor(maxVisiblePages/2)),s=Math.min(totalPages.value,t+maxVisiblePages-1);for(let a=t;a<=s;a++)e.push(a);return e}));return(t,a,l,i)=>{e.totalPages>1?(a(`<div${b(n({class:"flex flex-col sm:flex-row items-center justify-between gap-4"},i))}><div class="text-xs sm:text-sm text-gray-700 text-center sm:text-right"> عرض ${w((e.currentPage-1)*e.itemsPerPage+1)} إلى ${w(Math.min(e.currentPage*e.itemsPerPage,e.totalItems))} من أصل ${w(e.totalItems)} ${w(e.itemName)}</div><div class="flex items-center space-x-1 space-x-reverse"><button${P(1===e.currentPage)?" disabled":""} class="px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"> السابق </button><div class="flex items-center space-x-1 space-x-reverse">\x3c!--[--\x3e`),f(m(s),(t=>{a(`<button class="${_(["px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm border rounded-md transition-colors",t===e.currentPage?"bg-blue-600 text-white border-blue-600":"bg-white border-gray-300 hover:bg-gray-50"])}">${w(t)}</button>`)})),a(`\x3c!--]--\x3e</div><button${P(e.currentPage===e.totalPages)?" disabled":""} class="px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"> التالي </button></div></div>`)):a("\x3c!----\x3e")}}},T=N.setup;N.setup=(e,t)=>{const s=o();return(s.modules||(s.modules=new Set)).add("components/admin/AdminPagination.vue"),T?T(e,t):void 0};const E={__name:"index",__ssrInlineRender:!0,setup(o){const f=c([]),$=c(!0),P=c(""),U=c(""),T=c(""),E=c(1),R=d((()=>{let e=f.value;return P.value&&(e=e.filter((e=>e.title_ar&&e.title_ar.toLowerCase().includes(P.value.toLowerCase())||e.title_en&&e.title_en.toLowerCase().includes(P.value.toLowerCase())||e.title&&e.title.toLowerCase().includes(P.value.toLowerCase())||e.description_ar&&e.description_ar.toLowerCase().includes(P.value.toLowerCase())||e.description_en&&e.description_en.toLowerCase().includes(P.value.toLowerCase())||e.description&&e.description.toLowerCase().includes(P.value.toLowerCase())))),U.value&&(e=e.filter((e=>e.status===U.value))),T.value&&(e=e.filter((e=>e.category===T.value))),e.slice(10*(E.value-1),10*E.value)})),D=d((()=>{let e=f.value;return P.value&&(e=e.filter((e=>e.title_ar&&e.title_ar.toLowerCase().includes(P.value.toLowerCase())||e.title_en&&e.title_en.toLowerCase().includes(P.value.toLowerCase())||e.title&&e.title.toLowerCase().includes(P.value.toLowerCase())||e.description_ar&&e.description_ar.toLowerCase().includes(P.value.toLowerCase())||e.description_en&&e.description_en.toLowerCase().includes(P.value.toLowerCase())||e.description&&e.description.toLowerCase().includes(P.value.toLowerCase())))),U.value&&(e=e.filter((e=>e.status===U.value))),T.value&&(e=e.filter((e=>e.category===T.value))),e.length})),M=d((()=>Math.ceil(D.value/10))),q=d((()=>[{value:"active",label:"نشط"},{value:"inactive",label:"غير نشط"},{value:"draft",label:"مسودة"}])),B=d((()=>[{value:"domestic",label:"محلي"},{value:"international",label:"دولي"},{value:"religious",label:"ديني"},{value:"adventure",label:"مغامرة"}])),H=d((()=>[{key:"title",label:"الباقة"},{key:"category",label:"الفئة"},{key:"status",label:"الحالة"},{key:"price",label:"السعر"},{key:"created_at",label:"تاريخ الإنشاء"}])),W=d((()=>[{key:"view",icon:"material-symbols:visibility",label:"عرض",class:"text-blue-600 hover:text-blue-900",title:"عرض",handler:e=>C(`/admin/packages/${e.id}`)},{key:"edit",icon:"material-symbols:edit",label:"تحرير",class:"text-green-600 hover:text-green-900",title:"تحرير",handler:e=>C(`/admin/packages/${e.id}/edit`)},{key:"toggle",icon:"material-symbols:play-arrow",label:"تفعيل",class:"text-orange-600 hover:text-orange-900",title:"تفعيل/إلغاء تفعيل",handler:e=>I(e)},{key:"delete",icon:"material-symbols:delete",label:"حذف",class:"text-red-600 hover:text-red-900",title:"حذف",handler:e=>k(e)}])),I=async e=>{try{const t="active"===e.status?"inactive":"active",s=f.value.findIndex((t=>t.id===e.id));-1!==s&&(f.value[s].status=t),console.log(`تم ${"active"===t?"تفعيل":"إلغاء تفعيل"} الباقة بنجاح`)}catch(e){console.error("خطأ في تغيير حالة الباقة:",e)}},k=async e=>{if(confirm("هل أنت متأكد من حذف هذه الباقة؟ لا يمكن التراجع عن هذا الإجراء."))try{await $fetch(`/api/packages/${e.id}`,{method:"DELETE"}),f.value=f.value.filter((t=>t.id!==e.id)),console.log("تم حذف الباقة بنجاح")}catch(e){console.error("خطأ في حذف الباقة:",e)}},ee=()=>{try{const{exportPackagesToExcel:e}=A();e(f.value)?console.log("تم تصدير الباقات بنجاح"):console.error("فشل في تصدير الباقات")}catch(e){console.error("خطأ في تصدير الباقات:",e)}},j=e=>new Intl.NumberFormat("ar-SA",{style:"currency",currency:"SAR"}).format(e),F=e=>new Date(e).toLocaleDateString("ar-SA"),z=(e,t)=>e?e.length>t?e.substring(0,t)+"...":e:"",H$1=e=>({domestic:"محلي",international:"دولي",religious:"ديني",adventure:"مغامرة"}[e]||e),O=e=>({domestic:"bg-blue-100 text-blue-800",international:"bg-green-100 text-green-800",religious:"bg-purple-100 text-purple-800",adventure:"bg-orange-100 text-orange-800"}[e]||"bg-gray-100 text-gray-800"),M$1=e=>({active:"نشط",inactive:"غير نشط",draft:"مسودة"}[e]||e),Q=e=>({active:"bg-green-100 text-green-800",inactive:"bg-red-100 text-red-800",draft:"bg-yellow-100 text-yellow-800"}[e]||"bg-gray-100 text-gray-800");return u([P,U,T],(()=>{E.value=1})),V({title:"إدارة الباقات - Wonder Land Admin",meta:[{name:"description",content:"إدارة وتحرير الباقات السياحية"},{name:"robots",content:"noindex, nofollow"}]}),(o,d,c,u)=>{const f=e,V=t,A=s,G=a,J=l,K=i,X=S,Y=N;d(`<div${b(n({class:"space-y-6"},u))}><div class="h-16"></div>`),d(h(f,{title:"إدارة الباقات السياحية",description:"إدارة وتحرير الباقات السياحية المتاحة"},{actions:p(((e,t,s,a)=>{if(!t)return[x("button",{onClick:ee,class:"inline-flex items-center px-3 sm:px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm"},[x(V,{name:"material-symbols:download",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),x("span",{class:"hidden sm:inline"},"تصدير البيانات"),x("span",{class:"sm:hidden"},"تصدير")]),x(A,{to:"/admin/packages/images",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm"},{default:p((()=>[x(V,{name:"material-symbols:image",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),x("span",{class:"hidden sm:inline"},"إدارة الصور"),x("span",{class:"sm:hidden"},"الصور")])),_:1}),x(A,{to:"/admin/packages/create",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm"},{default:p((()=>[x(V,{name:"material-symbols:add",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),x("span",{class:"hidden sm:inline"},"إضافة باقة جديدة"),x("span",{class:"sm:hidden"},"إضافة")])),_:1})];t(`<button class="inline-flex items-center px-3 sm:px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm"${a}>`),t(h(V,{name:"material-symbols:download",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"},null,s,a)),t(`<span class="hidden sm:inline"${a}>تصدير البيانات</span><span class="sm:hidden"${a}>تصدير</span></button>`),t(h(A,{to:"/admin/packages/images",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm"},{default:p(((e,t,s,a)=>{if(!t)return[x(V,{name:"material-symbols:image",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),x("span",{class:"hidden sm:inline"},"إدارة الصور"),x("span",{class:"sm:hidden"},"الصور")];t(h(V,{name:"material-symbols:image",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"},null,s,a)),t(`<span class="hidden sm:inline"${a}>إدارة الصور</span><span class="sm:hidden"${a}>الصور</span>`)})),_:1},s,a)),t(h(A,{to:"/admin/packages/create",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm"},{default:p(((e,t,s,a)=>{if(!t)return[x(V,{name:"material-symbols:add",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),x("span",{class:"hidden sm:inline"},"إضافة باقة جديدة"),x("span",{class:"sm:hidden"},"إضافة")];t(h(V,{name:"material-symbols:add",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"},null,s,a)),t(`<span class="hidden sm:inline"${a}>إضافة باقة جديدة</span><span class="sm:hidden"${a}>إضافة</span>`)})),_:1},s,a))})),_:1},c)),d(h(G,null,{default:p(((e,t,s,a)=>{if(!t)return[x(J,{modelValue:m(P),"onUpdate:modelValue":e=>g(P)?P.value=e:null,placeholder:"البحث في الباقات..."},null,8,["modelValue","onUpdate:modelValue"]),x(K,{modelValue:m(U),"onUpdate:modelValue":e=>g(U)?U.value=e:null,options:m(q),placeholder:"جميع الحالات"},null,8,["modelValue","onUpdate:modelValue","options"]),x(K,{modelValue:m(T),"onUpdate:modelValue":e=>g(T)?T.value=e:null,options:m(B),placeholder:"جميع الفئات"},null,8,["modelValue","onUpdate:modelValue","options"])];t(h(J,{modelValue:m(P),"onUpdate:modelValue":e=>g(P)?P.value=e:null,placeholder:"البحث في الباقات..."},null,s,a)),t(h(K,{modelValue:m(U),"onUpdate:modelValue":e=>g(U)?U.value=e:null,options:m(q),placeholder:"جميع الحالات"},null,s,a)),t(h(K,{modelValue:m(T),"onUpdate:modelValue":e=>g(T)?T.value=e:null,options:m(B),placeholder:"جميع الفئات"},null,s,a))})),_:1},c)),d(h(X,{items:m(R),columns:m(H),actions:m(W),loading:m($),"empty-icon":"material-symbols:package-2-outline","empty-title":"لا توجد حزم","empty-description":"لم يتم العثور على أي حزم سياحية","empty-action":{label:"إضافة باقة جديدة",icon:"material-symbols:add",class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",handler:()=>("navigateTo"in o?o.navigateTo:m(C))("/admin/packages/create")}},{"column-title":p((({item:e},t,s,a)=>{if(!t)return[x("div",{class:"flex items-center"},[x("img",{src:e.image||e.image_url||"/images/placeholder.jpg",alt:e.title_ar||e.title_en||e.title,class:"h-10 w-10 sm:h-12 sm:w-12 rounded-lg object-cover ml-3 sm:ml-4 flex-shrink-0",loading:"lazy"},null,8,["src","alt"]),x("div",{class:"min-w-0 flex-1"},[x("div",{class:"text-sm font-medium text-gray-900 truncate"},y(e.title_ar||e.title_en||e.title),1),x("div",{class:"text-sm text-gray-500 truncate"},y(z(e.description_ar||e.description_en||e.description,30)),1)])])];t(`<div class="flex items-center"${a}><img${L("src",e.image||e.image_url||"/images/placeholder.jpg")}${L("alt",e.title_ar||e.title_en||e.title)} class="h-10 w-10 sm:h-12 sm:w-12 rounded-lg object-cover ml-3 sm:ml-4 flex-shrink-0" loading="lazy"${a}><div class="min-w-0 flex-1"${a}><div class="text-sm font-medium text-gray-900 truncate"${a}>${w(e.title_ar||e.title_en||e.title)}</div><div class="text-sm text-gray-500 truncate"${a}>${w(z(e.description_ar||e.description_en||e.description,30))}</div></div></div>`)})),"column-category":p((({item:e},t,s,a)=>{if(!t)return[x("span",{class:[O(e.category),"px-2 py-1 text-xs font-medium rounded-full"]},y(H$1(e.category)),3)];t(`<span class="${_([O(e.category),"px-2 py-1 text-xs font-medium rounded-full"])}"${a}>${w(H$1(e.category))}</span>`)})),"column-status":p((({item:e},t,s,a)=>{if(!t)return[x("span",{class:[Q(e.status),"px-2 py-1 text-xs font-medium rounded-full"]},y(M$1(e.status)),3)];t(`<span class="${_([Q(e.status),"px-2 py-1 text-xs font-medium rounded-full"])}"${a}>${w(M$1(e.status))}</span>`)})),"column-price":p((({item:e},t,s,a)=>{if(!t)return[x("div",null,[x("div",{class:"text-sm font-medium text-gray-900"},y(j(e.price)),1),x("div",{class:"text-sm text-gray-500"},y(e.currency||"SAR"),1)])];t(`<div${a}><div class="text-sm font-medium text-gray-900"${a}>${w(j(e.price))}</div><div class="text-sm text-gray-500"${a}>${w(e.currency||"SAR")}</div></div>`)})),"column-created_at":p((({item:e},t,s,a)=>{if(!t)return[v(y(F(e.created_at)),1)];t(`${w(F(e.created_at))}`)})),_:1},c)),d(h(Y,{"current-page":m(E),"onUpdate:currentPage":e=>g(E)?E.value=e:null,"total-pages":m(M),"total-items":m(D),"items-per-page":10,"item-name":"حزمة"},null,c)),d("</div>")}}},R=E.setup;E.setup=(e,t)=>{const s=o();return(s.modules||(s.modules=new Set)).add("pages/admin/packages/index.vue"),R?R(e,t):void 0};export{E as default};
//# sourceMappingURL=index.vue12.mjs.map
