import{M as e}from"./nuxt-link.mjs";import{q as t}from"./index2.mjs";import{ref as r,computed as a,watch as s,mergeProps as o,unref as l,withCtx as n,createVNode as i,createTextVNode as d,useSSRContext as u}from"vue";import{ssrRenderAttrs as c,ssrRenderComponent as p,ssrRenderAttr as m,ssrIncludeBooleanAttr as b,ssrLooseContain as g,ssrLooseEqual as v,ssrRenderList as f,ssrInterpolate as x}from"vue/server-renderer";import{j as _,H as h}from"./server.mjs";import"@iconify/utils/lib/css/icon";import"@iconify/vue";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:url";import"@iconify/utils";import"node:crypto";import"consola";import"node:module";import"ipx";import"node:path";import"vue-router";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"unhead/utils";import"devalue";import"unhead/plugins";import"@unhead/schema-org";import"@unhead/schema-org/vue";import"floating-vue";const k={__name:"edit",__ssrInlineRender:!0,setup(u){const k=_().params.id,$=r(!0),w=r(!1),A=r([]),j=r(null),S=r({customer_name:"",customer_email:"",customer_phone:"",package_id:"",guests_count:1,departure_date:"",return_date:"",total_amount:0,paid_amount:0,currency:"SAR",payment_method:"",payment_reference:"",booking_status:"pending",payment_status:"pending",special_requests:"",notes:"",booking_number:"",confirmed_at:"",cancellation_reason:""}),q=a((()=>S.value.customer_name&&S.value.customer_email&&S.value.customer_phone&&S.value.package_id&&S.value.departure_date&&S.value.total_amount>0)),y=e=>e?new Intl.NumberFormat("ar-SA",{style:"currency",currency:"SAR"}).format(e):"0.00 ر.س";return s((()=>S.value.guests_count),(()=>{j.value&&(S.value.total_amount=j.value.price*S.value.guests_count)})),s((()=>S.value.departure_date),(()=>{var e;if(S.value.departure_date&&null!=(e=j.value)&&e.duration_days){const e=new Date(S.value.departure_date),t=new Date(e);t.setDate(t.getDate()+j.value.duration_days),S.value.return_date=t.toISOString().split("T")[0]}})),h({title:"تحرير الحجز - Wonder Land Admin",meta:[{name:"description",content:"تحرير تفاصيل الحجز"},{name:"robots",content:"noindex, nofollow"}]}),(r,a,s,u)=>{const _=e,h=t;a(`<div${c(o({class:"space-y-6"},u))}><div class="h-16"></div><div class="flex flex-col sm:flex-row sm:items-center sm:justify-between"><div><h1 class="text-2xl font-bold text-gray-900">تحرير الحجز</h1><p class="mt-1 text-sm text-gray-600">تعديل تفاصيل الحجز</p></div><div class="mt-4 sm:mt-0 flex space-x-3 space-x-reverse">`),a(p(_,{to:`/admin/bookings/${l(k)}`,class:"inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors"},{default:n(((e,t,r,a)=>{if(!t)return[i(h,{name:"material-symbols:visibility",class:"h-5 w-5 ml-2"}),d(" عرض ")];t(p(h,{name:"material-symbols:visibility",class:"h-5 w-5 ml-2"},null,r,a)),t(" عرض ")})),_:1},s)),a(p(_,{to:"/admin/bookings",class:"inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors"},{default:n(((e,t,r,a)=>{if(!t)return[i(h,{name:"material-symbols:arrow-back",class:"h-5 w-5 ml-2"}),d(" العودة ")];t(p(h,{name:"material-symbols:arrow-back",class:"h-5 w-5 ml-2"},null,r,a)),t(" العودة ")})),_:1},s)),a("</div></div>"),l($)?(a('<div class="flex justify-center items-center py-12">'),a(p(h,{name:"material-symbols:progress-activity",class:"animate-spin h-8 w-8 text-blue-600"},null,s)),a('<span class="mr-3 text-gray-600">جارٍ تحميل الحجز...</span></div>')):(a(`<form class="space-y-6"><div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6"><div class="grid grid-cols-1 lg:grid-cols-3 gap-6"><div class="lg:col-span-2 space-y-6"><div><h2 class="text-lg font-semibold text-gray-900 mb-4">معلومات العميل</h2><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">اسم العميل *</label><input${m("value",l(S).customer_name)} type="text" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="أدخل اسم العميل"></div><div><label class="block text-sm font-medium text-gray-700 mb-2">البريد الإلكتروني *</label><input${m("value",l(S).customer_email)} type="email" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="أدخل البريد الإلكتروني"></div><div><label class="block text-sm font-medium text-gray-700 mb-2">رقم الهاتف *</label><input${m("value",l(S).customer_phone)} type="tel" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="+966501234567"></div><div><label class="block text-sm font-medium text-gray-700 mb-2">عدد الضيوف *</label><input${m("value",l(S).guests_count)} type="number" min="1" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></div></div></div><div><h2 class="text-lg font-semibold text-gray-900 mb-4">تفاصيل الباقة</h2><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">اختيار الباقة *</label><select required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"><option value=""${b(Array.isArray(l(S).package_id)?g(l(S).package_id,""):v(l(S).package_id,""))?" selected":""}>اختر الباقة</option>\x3c!--[--\x3e`),f(l(A),(e=>{a(`<option${m("value",e.id)}${b(Array.isArray(l(S).package_id)?g(l(S).package_id,e.id):v(l(S).package_id,e.id))?" selected":""}>${x(e.title_ar||e.title_en||e.title)} - ${x(y(e.price))}</option>`)})),a("\x3c!--]--\x3e</select></div>"),l(j)?a(`<div><label class="block text-sm font-medium text-gray-700 mb-2">مدة الرحلة</label><input${m("value",l(j).duration_days+" أيام")} type="text" readonly class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"></div>`):a("\x3c!----\x3e"),a(`<div><label class="block text-sm font-medium text-gray-700 mb-2">تاريخ المغادرة *</label><input${m("value",l(S).departure_date)} type="date" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></div><div><label class="block text-sm font-medium text-gray-700 mb-2">تاريخ العودة</label><input${m("value",l(S).return_date)} type="date" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></div></div>`),l(j)?a(`<div class="mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200"><h3 class="text-sm font-medium text-blue-900 mb-2">تفاصيل الباقة المختارة</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-800"><div><span class="font-medium">العنوان:</span> ${x(l(j).title_ar||l(j).title_en||l(j).title)}</div><div><span class="font-medium">السعر:</span> ${x(y(l(j).price))}</div><div><span class="font-medium">المدة:</span> ${x(l(j).duration_days)} أيام </div><div><span class="font-medium">الوجهة:</span> ${x(l(j).location||l(j).travel_period)}</div></div></div>`):a("\x3c!----\x3e"),a(`</div><div><h2 class="text-lg font-semibold text-gray-900 mb-4">تفاصيل الدفع</h2><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">المبلغ الإجمالي *</label><input${m("value",l(S).total_amount)} type="number" min="0" step="0.01" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0.00"></div><div><label class="block text-sm font-medium text-gray-700 mb-2">المبلغ المدفوع</label><input${m("value",l(S).paid_amount)} type="number" min="0" step="0.01" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0.00"></div><div><label class="block text-sm font-medium text-gray-700 mb-2">العملة</label><select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"><option value="SAR"${b(Array.isArray(l(S).currency)?g(l(S).currency,"SAR"):v(l(S).currency,"SAR"))?" selected":""}>ريال سعودي (SAR)</option><option value="USD"${b(Array.isArray(l(S).currency)?g(l(S).currency,"USD"):v(l(S).currency,"USD"))?" selected":""}>دولار أمريكي (USD)</option><option value="EUR"${b(Array.isArray(l(S).currency)?g(l(S).currency,"EUR"):v(l(S).currency,"EUR"))?" selected":""}>يورو (EUR)</option><option value="AED"${b(Array.isArray(l(S).currency)?g(l(S).currency,"AED"):v(l(S).currency,"AED"))?" selected":""}>درهم إماراتي (AED)</option></select></div><div><label class="block text-sm font-medium text-gray-700 mb-2">طريقة الدفع</label><select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"><option value=""${b(Array.isArray(l(S).payment_method)?g(l(S).payment_method,""):v(l(S).payment_method,""))?" selected":""}>اختر طريقة الدفع</option><option value="cash"${b(Array.isArray(l(S).payment_method)?g(l(S).payment_method,"cash"):v(l(S).payment_method,"cash"))?" selected":""}>نقداً</option><option value="bank_transfer"${b(Array.isArray(l(S).payment_method)?g(l(S).payment_method,"bank_transfer"):v(l(S).payment_method,"bank_transfer"))?" selected":""}>تحويل بنكي</option><option value="credit_card"${b(Array.isArray(l(S).payment_method)?g(l(S).payment_method,"credit_card"):v(l(S).payment_method,"credit_card"))?" selected":""}>بطاقة ائتمان</option><option value="online"${b(Array.isArray(l(S).payment_method)?g(l(S).payment_method,"online"):v(l(S).payment_method,"online"))?" selected":""}>دفع إلكتروني</option></select></div><div><label class="block text-sm font-medium text-gray-700 mb-2">مرجع الدفع</label><input${m("value",l(S).payment_reference)} type="text" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="رقم المرجع أو المعاملة"></div></div></div><div><h2 class="text-lg font-semibold text-gray-900 mb-4">طلبات خاصة وملاحظات</h2><div class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">طلبات خاصة</label><textarea rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="أي طلبات خاصة من العميل">${x(l(S).special_requests)}</textarea></div><div><label class="block text-sm font-medium text-gray-700 mb-2">ملاحظات إدارية</label><textarea rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ملاحظات إدارية أو تفاصيل إضافية">${x(l(S).notes)}</textarea></div></div></div></div><div class="space-y-6"><div class="bg-gray-50 rounded-lg p-4"><h3 class="text-lg font-semibold text-gray-900 mb-4">حالة الحجز</h3><div class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">حالة الحجز *</label><select required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"><option value="pending"${b(Array.isArray(l(S).booking_status)?g(l(S).booking_status,"pending"):v(l(S).booking_status,"pending"))?" selected":""}>في الانتظار</option><option value="confirmed"${b(Array.isArray(l(S).booking_status)?g(l(S).booking_status,"confirmed"):v(l(S).booking_status,"confirmed"))?" selected":""}>مؤكدة</option><option value="cancelled"${b(Array.isArray(l(S).booking_status)?g(l(S).booking_status,"cancelled"):v(l(S).booking_status,"cancelled"))?" selected":""}>ملغية</option><option value="completed"${b(Array.isArray(l(S).booking_status)?g(l(S).booking_status,"completed"):v(l(S).booking_status,"completed"))?" selected":""}>مكتملة</option></select></div><div><label class="block text-sm font-medium text-gray-700 mb-2">حالة الدفع *</label><select required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"><option value="pending"${b(Array.isArray(l(S).payment_status)?g(l(S).payment_status,"pending"):v(l(S).payment_status,"pending"))?" selected":""}>في الانتظار</option><option value="partial"${b(Array.isArray(l(S).payment_status)?g(l(S).payment_status,"partial"):v(l(S).payment_status,"partial"))?" selected":""}>مدفوع جزئياً</option><option value="paid"${b(Array.isArray(l(S).payment_status)?g(l(S).payment_status,"paid"):v(l(S).payment_status,"paid"))?" selected":""}>مدفوع بالكامل</option><option value="refunded"${b(Array.isArray(l(S).payment_status)?g(l(S).payment_status,"refunded"):v(l(S).payment_status,"refunded"))?" selected":""}>مسترد</option></select></div></div></div><div class="bg-blue-50 rounded-lg border border-blue-200 p-4"><h3 class="text-lg font-semibold text-blue-900 mb-3">ملخص الحجز</h3><div class="space-y-2 text-sm text-blue-800"><div class="flex justify-between"><span>العميل:</span><span>${x(l(S).customer_name||"غير محدد")}</span></div><div class="flex justify-between"><span>عدد الضيوف:</span><span>${x(l(S).guests_count||0)}</span></div><div class="flex justify-between"><span>تاريخ المغادرة:</span><span>${x(l(S).departure_date||"غير محدد")}</span></div><div class="flex justify-between"><span>المبلغ الإجمالي:</span><span>${x(y(l(S).total_amount))}</span></div><div class="flex justify-between"><span>المبلغ المدفوع:</span><span>${x(y(l(S).paid_amount))}</span></div><div class="flex justify-between"><span>المتبقي:</span><span>${x(y(l(S).total_amount-l(S).paid_amount))}</span></div><div class="flex justify-between"><span>حالة الحجز:</span><span>${x((e=>({confirmed:"مؤكدة",pending:"في الانتظار",cancelled:"ملغية",completed:"مكتملة"}[e]||e))(l(S).booking_status))}</span></div><div class="flex justify-between"><span>حالة الدفع:</span><span>${x((e=>({paid:"مدفوع",partial:"مدفوع جزئياً",pending:"في الانتظار",refunded:"مسترد"}[e]||e))(l(S).payment_status))}</span></div></div></div><div class="bg-gray-50 rounded-lg p-4"><h3 class="text-lg font-semibold text-gray-900 mb-4">معلومات إضافية</h3><div class="space-y-3"><div><label class="block text-sm font-medium text-gray-700 mb-2">رقم الحجز</label><input${m("value",l(S).booking_number)} type="text" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="رقم الحجز"></div><div><label class="block text-sm font-medium text-gray-700 mb-2">تاريخ التأكيد</label><input${m("value",l(S).confirmed_at)} type="datetime-local" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></div>`),"cancelled"===l(S).booking_status?a(`<div><label class="block text-sm font-medium text-gray-700 mb-2">سبب الإلغاء</label><textarea rows="2" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="سبب إلغاء الحجز">${x(l(S).cancellation_reason)}</textarea></div>`):a("\x3c!----\x3e"),a('</div></div></div></div><div class="flex justify-end space-x-3 space-x-reverse pt-6 border-t border-gray-200">'),a(p(_,{to:`/admin/bookings/${l(k)}`,class:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},{default:n(((e,t,r,a)=>{if(!t)return[d(" إلغاء ")];t(" إلغاء ")})),_:1},s)),a(`<button type="submit"${b(l(w)||!l(q))?" disabled":""} class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50">`),l(w)?a(p(h,{name:"material-symbols:progress-activity",class:"animate-spin h-4 w-4 ml-2 inline"},null,s)):a("\x3c!----\x3e"),a(` ${x(l(w)?"جاري الحفظ...":"حفظ التغييرات")}</button></div></div></form>`)),a("</div>")}}},$=k.setup;k.setup=(e,t)=>{const r=u();return(r.modules||(r.modules=new Set)).add("pages/admin/bookings/[id]/edit.vue"),$?$(e,t):void 0};export{k as default};
//# sourceMappingURL=edit.vue3.mjs.map
