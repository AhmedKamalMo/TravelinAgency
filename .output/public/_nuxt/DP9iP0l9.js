import{a6 as W,a5 as C,i as _,C as S,h as O,S as P,p as j,a3 as x}from"./Btm4-m5n.js";function I(e){return W()?(C(e),!0):!1}function h(e){return typeof e=="function"?e():_(e)}const M=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const L=e=>e!=null,k=Object.prototype.toString,D=e=>k.call(e)==="[object Object]",m=()=>{},F=B();function B(){var e,n;return M&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((n=window==null?void 0:window.navigator)==null?void 0:n.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function G(e,n){function r(...t){return new Promise((d,l)=>{Promise.resolve(e(()=>n.apply(this,t),{fn:n,thisArg:this,args:t})).then(d).catch(l)})}return r}function N(e,n={}){let r,t,d=m;const l=a=>{clearTimeout(a),d(),d=m};return a=>{const f=h(e),p=h(n.maxWait);return r&&l(r),f<=0||p!==void 0&&p<=0?(t&&(l(t),t=null),Promise.resolve(a())):new Promise((s,c)=>{d=n.rejectOnCancel?c:s,p&&!t&&(t=setTimeout(()=>{r&&l(r),t=null,s(a())},p)),r=setTimeout(()=>{t&&l(t),t=null,s(a())},f)})}}function $(e,n=200,r={}){return G(N(n,r),e)}function w(e){var n;const r=h(e);return(n=r==null?void 0:r.$el)!=null?n:r}const g=M?window:void 0;function y(...e){let n,r,t,d;if(typeof e[0]=="string"||Array.isArray(e[0])?([r,t,d]=e,n=g):[n,r,t,d]=e,!n)return m;Array.isArray(r)||(r=[r]),Array.isArray(t)||(t=[t]);const l=[],v=()=>{l.forEach(s=>s()),l.length=0},a=(s,c,o,i)=>(s.addEventListener(c,o,i),()=>s.removeEventListener(c,o,i)),f=P(()=>[w(n),h(d)],([s,c])=>{if(v(),!s)return;const o=D(c)?{...c}:c;l.push(...r.flatMap(i=>t.map(u=>a(s,i,u,o))))},{immediate:!0,flush:"post"}),p=()=>{f(),v()};return I(p),p}let E=!1;function z(e,n,r={}){const{window:t=g,ignore:d=[],capture:l=!0,detectIframe:v=!1}=r;if(!t)return m;F&&!E&&(E=!0,Array.from(t.document.body.children).forEach(o=>o.addEventListener("click",m)),t.document.documentElement.addEventListener("click",m));let a=!0;const f=o=>d.some(i=>{if(typeof i=="string")return Array.from(t.document.querySelectorAll(i)).some(u=>u===o.target||o.composedPath().includes(u));{const u=w(i);return u&&(o.target===u||o.composedPath().includes(u))}}),s=[y(t,"click",o=>{const i=w(e);if(!(!i||i===o.target||o.composedPath().includes(i))){if(o.detail===0&&(a=!f(o)),!a){a=!0;return}n(o)}},{passive:!0,capture:l}),y(t,"pointerdown",o=>{const i=w(e);a=!f(o)&&!!(i&&!o.composedPath().includes(i))},{passive:!0}),v&&y(t,"blur",o=>{setTimeout(()=>{var i;const u=w(e);((i=t.document.activeElement)==null?void 0:i.tagName)==="IFRAME"&&!(u!=null&&u.contains(t.document.activeElement))&&n(o)},0)})].filter(Boolean);return()=>s.forEach(o=>o())}function R(){const e=O(!1),n=x();return n&&j(()=>{e.value=!0},n),e}function q(e){const n=R();return S(()=>(n.value,!!e()))}function H(e,n,r={}){const{root:t,rootMargin:d="0px",threshold:l=.1,window:v=g,immediate:a=!0}=r,f=q(()=>v&&"IntersectionObserver"in v),p=S(()=>{const u=h(e);return(Array.isArray(u)?u:[u]).map(w).filter(L)});let s=m;const c=O(a),o=f.value?P(()=>[p.value,w(t),c.value],([u,T])=>{if(s(),!c.value||!u.length)return;const b=new IntersectionObserver(n,{root:w(T),rootMargin:d,threshold:l});u.forEach(A=>A&&b.observe(A)),s=()=>{b.disconnect(),s=m}},{immediate:a,flush:"post"}):m,i=()=>{s(),o(),c.value=!1};return I(i),{isSupported:f,isActive:c,pause(){s(),c.value=!1},resume(){c.value=!0},stop:i}}export{$ as a,z as o,H as u};
