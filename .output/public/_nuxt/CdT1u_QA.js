import E from"./CBGl2SH_.js";import{_ as U}from"./BRbu2fQj.js";import{A as $,g as b,m as B,B as S,O as W,c as f,o as p,b as t,a,k as y,l as g,h as o,i,v as x,T as w,j as N,e as T,t as j,w as q,J as I}from"./CvlND2yj.js";import{u as M}from"./0ltj-c_F.js";const Y={class:"space-y-6"},A={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},C={class:"mt-4 sm:mt-0 flex space-x-3 space-x-reverse"},L={key:0,class:"flex justify-center items-center py-12"},P={key:1,class:"bg-white rounded-lg shadow-sm border border-gray-200"},D={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},O={class:"border-t pt-6"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},J={class:"flex items-center justify-end space-x-3 space-x-reverse pt-6 border-t"},R=["disabled"],z={key:2,class:"text-center py-12"},ee={__name:"edit",setup(F){const d=$().params.id,l=b(null),v=b(!0),u=b(!1),s=b({title_ar:"",title_en:"",content_ar:"",content_en:"",type:"",status:"draft",meta_description_ar:"",meta_description_en:""}),k=async()=>{try{v.value=!0;const r=await $fetch(`/api/content/${d}`);r.success&&r.page?(l.value=r.page,s.value={title_ar:l.value.title_ar||"",title_en:l.value.title_en||"",content_ar:l.value.content_ar||"",content_en:l.value.content_en||"",type:l.value.type||"",status:l.value.status||"draft",meta_description_ar:l.value.meta_description_ar||"",meta_description_en:l.value.meta_description_en||""}):l.value=null}catch(r){console.error("خطأ في تحميل الصفحة:",r),l.value=null}finally{v.value=!1}},V=async()=>{try{u.value=!0;const r=await $fetch(`/api/content/${d}`,{method:"PUT",body:s.value});r.success?await I(`/admin/content/${d}`):console.error("خطأ في تحديث الصفحة:",r.error)}catch(r){console.error("خطأ في تحديث الصفحة:",r)}finally{u.value=!1}};return B(()=>{k()}),M({title:S(()=>l.value?`تعديل ${l.value.title_ar||l.value.title_en} - Wonder Land Admin`:"تعديل الصفحة - Wonder Land Admin"),meta:[{name:"description",content:"تعديل محتوى الصفحة"},{name:"robots",content:"noindex, nofollow"}]}),(r,e)=>{const m=E,c=U,_=W("WYSIWYGEditor");return p(),f("div",Y,[e[27]||(e[27]=t("div",{class:"h-16"},null,-1)),t("div",A,[e[10]||(e[10]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"تعديل الصفحة"),t("p",{class:"mt-1 text-sm text-gray-600"},"تعديل محتوى الصفحة")],-1)),t("div",C,[a(c,{to:`/admin/content/${o(d)}`,class:"inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors"},{default:y(()=>[a(m,{name:"material-symbols:visibility",class:"h-5 w-5 ml-2"}),e[8]||(e[8]=g(" عرض "))]),_:1},8,["to"]),a(c,{to:"/admin/content",class:"inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors"},{default:y(()=>[a(m,{name:"material-symbols:arrow-back",class:"h-5 w-5 ml-2"}),e[9]||(e[9]=g(" العودة للقائمة "))]),_:1})])]),o(v)?(p(),f("div",L,[a(m,{name:"material-symbols:progress-activity",class:"animate-spin h-8 w-8 text-blue-600"}),e[11]||(e[11]=t("span",{class:"mr-3 text-gray-600"},"جارٍ تحميل الصفحة...",-1))])):o(l)?(p(),f("div",P,[t("form",{onSubmit:q(V,["prevent"]),class:"p-6 space-y-6"},[t("div",D,[t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," العنوان بالعربية * ",-1)),i(t("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>o(s).title_ar=n),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل العنوان بالعربية"},null,512),[[x,o(s).title_ar]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," العنوان بالإنجليزية * ",-1)),i(t("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>o(s).title_en=n),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter title in English"},null,512),[[x,o(s).title_en]])])]),t("div",G,[t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," نوع المحتوى * ",-1)),i(t("select",{"onUpdate:modelValue":e[2]||(e[2]=n=>o(s).type=n),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},e[14]||(e[14]=[t("option",{value:""},"اختر النوع",-1),t("option",{value:"page"},"صفحة",-1),t("option",{value:"post"},"مقال",-1),t("option",{value:"news"},"أخبار",-1)]),512),[[w,o(s).type]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," الحالة * ",-1)),i(t("select",{"onUpdate:modelValue":e[3]||(e[3]=n=>o(s).status=n),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},e[16]||(e[16]=[t("option",{value:"draft"},"مسودة",-1),t("option",{value:"published"},"منشور",-1),t("option",{value:"archived"},"مؤرشف",-1)]),512),[[w,o(s).status]])])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," المحتوى بالعربية * ",-1)),a(_,{modelValue:o(s).content_ar,"onUpdate:modelValue":e[4]||(e[4]=n=>o(s).content_ar=n),placeholder:"أدخل المحتوى بالعربية"},null,8,["modelValue"])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," المحتوى بالإنجليزية * ",-1)),a(_,{modelValue:o(s).content_en,"onUpdate:modelValue":e[5]||(e[5]=n=>o(s).content_en=n),placeholder:"Enter content in English"},null,8,["modelValue"])]),t("div",O,[e[22]||(e[22]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"إعدادات SEO",-1)),t("div",H,[t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," وصف الصفحة بالعربية ",-1)),i(t("textarea",{"onUpdate:modelValue":e[6]||(e[6]=n=>o(s).meta_description_ar=n),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"وصف مختصر للصفحة بالعربية"},null,512),[[x,o(s).meta_description_ar]])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," وصف الصفحة بالإنجليزية ",-1)),i(t("textarea",{"onUpdate:modelValue":e[7]||(e[7]=n=>o(s).meta_description_en=n),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Brief page description in English"},null,512),[[x,o(s).meta_description_en]])])])]),t("div",J,[a(c,{to:`/admin/content/${o(d)}`,class:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"},{default:y(()=>e[23]||(e[23]=[g(" إلغاء ")])),_:1},8,["to"]),t("button",{type:"submit",disabled:o(u),class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center"},[o(u)?(p(),N(m,{key:0,name:"material-symbols:progress-activity",class:"animate-spin h-4 w-4 ml-2"})):T("",!0),g(" "+j(o(u)?"جاري الحفظ...":"حفظ التغييرات"),1)],8,R)])],32)])):(p(),f("div",z,[a(m,{name:"material-symbols:article",class:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e[25]||(e[25]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"الصفحة غير موجودة",-1)),e[26]||(e[26]=t("p",{class:"text-gray-500 mb-6"},"لم يتم العثور على الصفحة المطلوبة",-1)),a(c,{to:"/admin/content",class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},{default:y(()=>e[24]||(e[24]=[g(" العودة للقائمة ")])),_:1})]))])}}};export{ee as default};
