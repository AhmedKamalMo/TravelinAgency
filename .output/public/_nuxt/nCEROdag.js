import w from"./jn7r9_3C.js";import{h as c,c as o,o as a,b as s,a as u,i,e as n,t as h}from"./Btm4-m5n.js";const v={class:"min-h-screen bg-gray-100 flex items-center justify-center"},_={class:"max-w-md mx-auto bg-white rounded-lg shadow-lg p-8 text-center"},b={class:"mb-6"},f={key:0,class:"space-y-4"},y=["disabled"],x={key:0,class:"text-sm text-gray-600"},k={class:"mt-2 space-y-1"},C={key:0},S={key:1},P={key:2},T={key:3},W={key:1,class:"space-y-4"},B={class:"text-green-600"},H={__name:"cleanup",setup(N){const l=c(!1),g=c(!1),r=c({unregistering:!1,clearingCache:!1,clearingStorage:!1,redirecting:!1}),m=async()=>{l.value=!0;try{if(r.value.unregistering=!0,"serviceWorker"in navigator){const t=await navigator.serviceWorker.getRegistrations();for(const e of t)await e.unregister(),console.log("Service Worker unregistered:",e)}if(await new Promise(t=>setTimeout(t,1e3)),r.value.clearingCache=!0,"caches"in window){const t=await caches.keys();await Promise.all(t.map(e=>(console.log("Deleting cache:",e),caches.delete(e))))}await new Promise(t=>setTimeout(t,1e3)),r.value.clearingStorage=!0,"localStorage"in window&&localStorage.clear(),"sessionStorage"in window&&sessionStorage.clear(),await new Promise(t=>setTimeout(t,1e3)),r.value.redirecting=!0,await new Promise(t=>setTimeout(t,1e3)),g.value=!0}catch(t){console.error("Cleanup error:",t)}},p=()=>{window.location.href="/"};return(t,e)=>{const d=w;return a(),o("div",v,[s("div",_,[s("div",b,[u(d,{name:"material-symbols:cleaning-services",class:"h-16 w-16 text-blue-600 mx-auto mb-4"}),e[0]||(e[0]=s("h1",{class:"text-2xl font-bold text-gray-900 mb-2"},"Service Worker Cleanup",-1)),e[1]||(e[1]=s("p",{class:"text-gray-600"},"This page will remove all cached service workers and clear browser cache.",-1))]),i(g)?(a(),o("div",W,[s("div",B,[u(d,{name:"material-symbols:check-circle",class:"h-12 w-12 mx-auto mb-2"}),e[3]||(e[3]=s("p",{class:"font-semibold"},"Cleanup Complete!",-1))]),e[4]||(e[4]=s("p",{class:"text-sm text-gray-600"},"All service workers have been removed and cache cleared.",-1)),s("button",{onClick:p,class:"w-full bg-green-600 text-white py-3 px-6 rounded-lg hover:bg-green-700 transition-colors"}," Go to Home Page ")])):(a(),o("div",f,[s("button",{onClick:m,disabled:i(l),class:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},h(i(l)?"Cleaning...":"Start Cleanup"),9,y),i(l)?(a(),o("div",x,[e[2]||(e[2]=s("p",null,"Cleaning up service workers and cache...",-1)),s("div",k,[i(r).unregistering?(a(),o("p",C,"✓ Unregistering service workers")):n("",!0),i(r).clearingCache?(a(),o("p",S,"✓ Clearing browser cache")):n("",!0),i(r).clearingStorage?(a(),o("p",P,"✓ Clearing local storage")):n("",!0),i(r).redirecting?(a(),o("p",T,"✓ Preparing redirect")):n("",!0)])])):n("",!0)]))])])}}};export{H as default};
