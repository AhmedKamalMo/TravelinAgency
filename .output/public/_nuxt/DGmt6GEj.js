import G from"./jn7r9_3C.js";import{_ as J}from"./DyW0L63n.js";import{B as z,h as f,p as F,u as W,C as H,c as l,o as r,b as t,i as o,F as k,a as g,m as v,l as $,k as C,t as u,e as m,I as U,w as K,j as p,v as w,U as S,V as O,K as R}from"./Btm4-m5n.js";import{_ as Q}from"./CWOS8PLP.js";import{u as x}from"./BiO7gD21.js";import"./x_rD_Ya3.js";const X={class:"space-y-6"},Y={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},Z={class:"mt-4 sm:mt-0 flex space-x-3 space-x-reverse"},ee=["disabled"],te=["disabled"],se={key:0,class:"flex justify-center items-center py-12"},oe={key:1,class:"space-y-6"},ae={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},ne={key:0,class:"h-64 bg-gray-100"},re=["src","alt"],ie={class:"p-6"},le={class:"flex items-start justify-between mb-4"},de={class:"text-3xl font-bold text-gray-900 mb-2"},ue={key:0,class:"text-lg text-gray-600"},ce={class:"flex space-x-2 space-x-reverse"},me={key:0,class:"px-3 py-1 text-sm font-medium rounded-full bg-yellow-100 text-yellow-800"},ge={class:"mb-6"},pe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ye={key:0},xe={class:"text-gray-600"},be={key:1},fe={class:"text-gray-600"},ve={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},_e={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},we={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},he={class:"md:col-span-2"},ke={class:"flex items-center space-x-4 space-x-reverse"},Ee={class:"flex items-center"},Ve={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},$e={class:"text-gray-900"},Ce={key:0},Ue={class:"text-gray-900"},Se={key:1},Ne={class:"text-gray-900"},je={key:2},De={class:"text-gray-900"},Me={key:3},Te={class:"text-gray-900 text-sm"},Be={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ie={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},qe={class:"space-y-3"},Le={class:"flex justify-between"},Pe={class:"text-sm font-medium text-gray-900"},Ae={class:"flex justify-between"},Ge={class:"text-sm font-medium text-gray-900"},Je={class:"flex justify-between"},ze={class:"text-sm font-medium text-gray-900"},Fe={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},We={class:"space-y-3"},He={key:2,class:"text-center py-12"},tt={__name:"[id]",setup(Ke){const _=z().params.id,N=()=>{b.value=!0,s.value&&(n.value={name_ar:s.value.name_ar||"",name_en:s.value.name_en||"",description_ar:s.value.description_ar||"",description_en:s.value.description_en||"",category:s.value.category||"international",image_url:s.value.image_url||s.value.image||"",active:s.value.active===1||s.value.active===!0,featured:s.value.featured===1||s.value.featured===!0})},j=()=>{b.value=!1},D=a=>{const{showSuccess:e}=x();e("تم رفع الصورة","تم رفع الصورة بنجاح!")},M=a=>{const{showError:e}=x();e("خطأ في رفع الصورة",a.message||"حدث خطأ في رفع الصورة")},E=async()=>{const{showSuccess:a,showError:e,showWarning:i}=x();try{if(y.value=!0,!n.value.name_ar||!n.value.name_en||!n.value.description_ar||!n.value.description_en){i("حقول مطلوبة","يرجى ملء جميع الحقول المطلوبة");return}const c=await $fetch(`/api/destinations/${_}`,{method:"PUT",body:n.value});c.success?(s.value=c.data,b.value=!1,a("تم الحفظ بنجاح","تم حفظ التغييرات بنجاح!")):e("فشل في الحفظ","فشل في حفظ التغييرات. يرجى المحاولة مرة أخرى.")}catch(c){console.error("خطأ في حفظ التغييرات:",c),e("خطأ في الحفظ","حدث خطأ في حفظ التغييرات. يرجى المحاولة مرة أخرى.")}finally{y.value=!1}},h=f(!0),s=f(null),b=f(!1),y=f(!1),n=f({name_ar:"",name_en:"",description_ar:"",description_en:"",category:"international",image_url:"",active:!0,featured:!1}),T=async()=>{const{showError:a}=x();try{h.value=!0;const e=await $fetch(`/api/destinations/${_}`);e.success&&e.data?s.value=e.data:s.value=null}catch(e){console.error("خطأ في تحميل بيانات الوجهة:",e),s.value=null,a("خطأ في التحميل","حدث خطأ في تحميل بيانات الوجهة. يرجى المحاولة مرة أخرى.")}finally{h.value=!1}},B=async()=>{const{showSuccess:a,showError:e}=x();if(confirm(`هل أنت متأكد من ${s.value.active?"إلغاء تفعيل":"تفعيل"} هذه الوجهة؟`))try{const i=s.value.active?"inactive":"active",c=s.value.active?0:1;await $fetch(`/api/destinations/${_}`,{method:"PUT",body:{...s.value,active:c,status:i}}),s.value.active=c,s.value.status=i,a("تم التحديث بنجاح",`تم ${i==="active"?"تفعيل":"إلغاء تفعيل"} الوجهة بنجاح`)}catch(i){console.error("خطأ في تغيير حالة الوجهة:",i),e("خطأ في التحديث","حدث خطأ في تغيير حالة الوجهة. يرجى المحاولة مرة أخرى.")}},I=async()=>{const{showSuccess:a,showError:e}=x();if(confirm("هل أنت متأكد من حذف هذه الوجهة؟ لا يمكن التراجع عن هذا الإجراء."))try{await $fetch(`/api/destinations/${_}`,{method:"DELETE"}),a("تم الحذف بنجاح","تم حذف الوجهة بنجاح"),await R("/admin/destinations")}catch(i){console.error("خطأ في حذف الوجهة:",i),e("خطأ في الحذف","حدث خطأ في حذف الوجهة. يرجى المحاولة مرة أخرى.")}},V=a=>new Date(a).toLocaleDateString("ar-SA"),q=a=>{if(!a)return"";try{if(typeof a=="object")return`${a.latitude}, ${a.longitude}`;if(typeof a=="string"){const e=JSON.parse(a);return`${e.latitude}, ${e.longitude}`}return""}catch(e){return console.error("Error parsing coordinates:",e),""}},L=a=>({saudi:"سعودي",international:"عالمي"})[a]||a,P=a=>({active:"نشط",inactive:"غير نشط"})[a]||a,A=a=>({active:"bg-green-100 text-green-800",inactive:"bg-red-100 text-red-800"})[a]||"bg-gray-100 text-gray-800";return F(()=>{T()}),W({title:H(()=>{var a;return`تفاصيل ${((a=s.value)==null?void 0:a.name_ar)||"الوجهة"} - Wonder Land Admin`}),meta:[{name:"description",content:"تفاصيل الوجهة السياحية"},{name:"robots",content:"noindex, nofollow"}]}),(a,e)=>{const i=G,c=J;return r(),l("div",X,[e[40]||(e[40]=t("div",{class:"h-16"},null,-1)),t("div",Y,[e[11]||(e[11]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"تفاصيل الوجهة"),t("p",{class:"mt-1 text-sm text-gray-600"},"عرض تفاصيل الوجهة السياحية")],-1)),t("div",Z,[o(b)?(r(),l(k,{key:1},[t("button",{onClick:E,disabled:o(y),class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[o(y)?(r(),C(i,{key:0,name:"material-symbols:progress-activity",class:"animate-spin h-5 w-5 ml-2"})):(r(),C(i,{key:1,name:"material-symbols:save",class:"h-5 w-5 ml-2"})),v(" "+u(o(y)?"جاري الحفظ...":"حفظ التغييرات"),1)],8,ee),t("button",{onClick:j,disabled:o(y),class:"inline-flex items-center px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[g(i,{name:"material-symbols:close",class:"h-5 w-5 ml-2"}),e[10]||(e[10]=v(" إلغاء "))],8,te)],64)):(r(),l(k,{key:0},[t("button",{onClick:N,class:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"},[g(i,{name:"material-symbols:edit",class:"h-5 w-5 ml-2"}),e[8]||(e[8]=v(" تحرير "))]),g(c,{to:"/admin/destinations",class:"inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors"},{default:$(()=>[g(i,{name:"material-symbols:arrow-back",class:"h-5 w-5 ml-2"}),e[9]||(e[9]=v(" العودة للقائمة "))]),_:1})],64))])]),o(h)?(r(),l("div",se,[g(i,{name:"material-symbols:progress-activity",class:"animate-spin h-8 w-8 text-blue-600"}),e[12]||(e[12]=t("span",{class:"mr-3 text-gray-600"},"جارٍ تحميل بيانات الوجهة...",-1))])):o(s)?(r(),l("div",oe,[t("div",ae,[o(s).image_url||o(s).image?(r(),l("div",ne,[t("img",{src:o(s).image_url||o(s).image,alt:o(s).name_ar||o(s).name_en,class:"w-full h-full object-cover",loading:"lazy"},null,8,re)])):m("",!0),t("div",ie,[o(b)?(r(),l("form",{key:1,onSubmit:K(E,["prevent"]),class:"space-y-6"},[t("div",ve,[t("div",null,[e[16]||(e[16]=t("label",{for:"name_ar",class:"block text-sm font-medium text-gray-700 mb-2"}," الاسم بالعربية * ",-1)),p(t("input",{id:"name_ar","onUpdate:modelValue":e[0]||(e[0]=d=>o(n).name_ar=d),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل اسم الوجهة بالعربية"},null,512),[[w,o(n).name_ar]])]),t("div",null,[e[17]||(e[17]=t("label",{for:"name_en",class:"block text-sm font-medium text-gray-700 mb-2"}," الاسم بالإنجليزية * ",-1)),p(t("input",{id:"name_en","onUpdate:modelValue":e[1]||(e[1]=d=>o(n).name_en=d),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter destination name in English"},null,512),[[w,o(n).name_en]])])]),t("div",_e,[t("div",null,[e[18]||(e[18]=t("label",{for:"description_ar",class:"block text-sm font-medium text-gray-700 mb-2"}," الوصف بالعربية * ",-1)),p(t("textarea",{id:"description_ar","onUpdate:modelValue":e[2]||(e[2]=d=>o(n).description_ar=d),required:"",rows:"4",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل وصف الوجهة بالعربية"},null,512),[[w,o(n).description_ar]])]),t("div",null,[e[19]||(e[19]=t("label",{for:"description_en",class:"block text-sm font-medium text-gray-700 mb-2"}," الوصف بالإنجليزية * ",-1)),p(t("textarea",{id:"description_en","onUpdate:modelValue":e[3]||(e[3]=d=>o(n).description_en=d),required:"",rows:"4",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter destination description in English"},null,512),[[w,o(n).description_en]])])]),t("div",we,[t("div",null,[e[21]||(e[21]=t("label",{for:"category",class:"block text-sm font-medium text-gray-700 mb-2"}," نوع الوجهة * ",-1)),p(t("select",{id:"category","onUpdate:modelValue":e[4]||(e[4]=d=>o(n).category=d),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},e[20]||(e[20]=[t("option",{value:"international"},"عالمي",-1),t("option",{value:"saudi"},"سعودي",-1)]),512),[[S,o(n).category]])]),t("div",he,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," صورة الوجهة ",-1)),g(Q,{modelValue:o(n).image_url,"onUpdate:modelValue":e[5]||(e[5]=d=>o(n).image_url=d),alt:"صورة الوجهة",onUploadComplete:D,onUploadError:M},null,8,["modelValue"]),e[23]||(e[23]=t("p",{class:"mt-2 text-xs text-gray-500"}," يمكنك رفع صورة JPG, PNG, JPEG بحجم أقصى 5MB ",-1))]),t("div",null,[e[25]||(e[25]=t("label",{for:"active",class:"block text-sm font-medium text-gray-700 mb-2"}," حالة الوجهة ",-1)),p(t("select",{id:"active","onUpdate:modelValue":e[6]||(e[6]=d=>o(n).active=d),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},e[24]||(e[24]=[t("option",{value:!0},"نشط",-1),t("option",{value:!1},"غير نشط",-1)]),512),[[S,o(n).active]])])]),t("div",ke,[t("label",Ee,[p(t("input",{"onUpdate:modelValue":e[7]||(e[7]=d=>o(n).featured=d),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[O,o(n).featured]]),e[26]||(e[26]=t("span",{class:"mr-2 text-sm text-gray-700"},"وجهة مميزة",-1))])])],32)):(r(),l(k,{key:0},[t("div",le,[t("div",null,[t("h2",de,u(o(s).name_ar||o(s).name_en),1),o(s).name_en&&o(s).name_ar?(r(),l("p",ue,u(o(s).name_en),1)):m("",!0)]),t("div",ce,[t("span",{class:U([A(o(s).active?"active":"inactive"),"px-3 py-1 text-sm font-medium rounded-full"])},u(P(o(s).active?"active":"inactive")),3),o(s).featured?(r(),l("span",me," مميز ")):m("",!0)])]),t("div",ge,[e[15]||(e[15]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"الوصف",-1)),t("div",pe,[o(s).description_ar?(r(),l("div",ye,[e[13]||(e[13]=t("h4",{class:"text-sm font-medium text-gray-700 mb-1"},"بالعربية",-1)),t("p",xe,u(o(s).description_ar),1)])):m("",!0),o(s).description_en?(r(),l("div",be,[e[14]||(e[14]=t("h4",{class:"text-sm font-medium text-gray-700 mb-1"},"بالإنجليزية",-1)),t("p",fe,u(o(s).description_en),1)])):m("",!0)])])],64)),t("div",Ve,[t("div",null,[e[27]||(e[27]=t("h4",{class:"text-sm font-medium text-gray-700 mb-1"},"نوع الوجهة",-1)),t("p",$e,u(L(o(s).category)),1)]),o(s).region_ar||o(s).region_en?(r(),l("div",Ce,[e[28]||(e[28]=t("h4",{class:"text-sm font-medium text-gray-700 mb-1"},"المنطقة",-1)),t("p",Ue,u(o(s).region_ar||o(s).region_en),1)])):m("",!0),o(s).location_type_ar||o(s).location_type_en?(r(),l("div",Se,[e[29]||(e[29]=t("h4",{class:"text-sm font-medium text-gray-700 mb-1"},"نوع الموقع",-1)),t("p",Ne,u(o(s).location_type_ar||o(s).location_type_en),1)])):m("",!0),o(s).destination_type_ar||o(s).destination_type_en?(r(),l("div",je,[e[30]||(e[30]=t("h4",{class:"text-sm font-medium text-gray-700 mb-1"},"نوع الوجهة",-1)),t("p",De,u(o(s).destination_type_ar||o(s).destination_type_en),1)])):m("",!0),o(s).coordinates?(r(),l("div",Me,[e[31]||(e[31]=t("h4",{class:"text-sm font-medium text-gray-700 mb-1"},"الإحداثيات",-1)),t("p",Te,u(q(o(s).coordinates)),1)])):m("",!0)])])]),t("div",Be,[t("div",Ie,[e[35]||(e[35]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"معلومات النظام",-1)),t("div",qe,[t("div",Le,[e[32]||(e[32]=t("span",{class:"text-sm text-gray-600"},"معرف الوجهة",-1)),t("span",Pe,u(o(s).id),1)]),t("div",Ae,[e[33]||(e[33]=t("span",{class:"text-sm text-gray-600"},"تاريخ الإنشاء",-1)),t("span",Ge,u(V(o(s).created_at)),1)]),t("div",Je,[e[34]||(e[34]=t("span",{class:"text-sm text-gray-600"},"آخر تحديث",-1)),t("span",ze,u(V(o(s).updated_at)),1)])])]),t("div",Fe,[e[36]||(e[36]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"الإجراءات السريعة",-1)),t("div",We,[t("button",{onClick:B,class:U([o(s).active?"bg-orange-100 text-orange-800 hover:bg-orange-200":"bg-green-100 text-green-800 hover:bg-green-200","w-full px-4 py-2 rounded-lg transition-colors"])},u(o(s).active?"إلغاء التفعيل":"تفعيل الوجهة"),3),t("button",{onClick:I,class:"w-full px-4 py-2 bg-red-100 text-red-800 rounded-lg hover:bg-red-200 transition-colors"}," حذف الوجهة ")])])])])):(r(),l("div",He,[g(i,{name:"material-symbols:place",class:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e[38]||(e[38]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"الوجهة غير موجودة",-1)),e[39]||(e[39]=t("p",{class:"text-gray-500 mb-6"},"لم يتم العثور على الوجهة المطلوبة",-1)),g(c,{to:"/admin/destinations",class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},{default:$(()=>e[37]||(e[37]=[v(" العودة للقائمة ")])),_:1})]))])}}};export{tt as default};
