import D from"./CW2NxIwK.js";import{_ as te}from"./Ba-1N6ot.js";import{_ as se}from"./DrZeAxfx.js";import{_ as ae,a as le,b as ne}from"./BbFKslBj.js";import{c as r,o as c,b as m,a as n,f as C,F as v,r as p,t as u,Y as P,e as $,I as _,C as f,i as g,h as w,Q as oe,m as ie,u as re,d as b,Z as L,n as V}from"./D1nMFiHg.js";import{u as ce}from"./NS4odysN.js";const de={class:"bg-white rounded-lg shadow-sm border border-gray-200"},ue={key:0,class:"flex justify-center items-center py-12"},me={key:1,class:"hidden md:block overflow-x-auto"},ye={class:"min-w-full divide-y divide-gray-200"},ge={class:"bg-gray-50"},xe={key:0,class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},be={class:"bg-white divide-y divide-gray-200"},ve={key:0,class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},pe={class:"flex items-center space-x-2 space-x-reverse"},fe=["onClick","title"],he={key:2,class:"md:hidden divide-y divide-gray-200"},we={class:"space-y-3"},_e={class:"flex-1"},Pe={class:"text-xs font-medium text-gray-500 mb-1"},Ce={class:"text-sm text-gray-900"},$e={key:0,class:"flex items-center justify-end space-x-2 space-x-reverse pt-2 border-t border-gray-100"},ke=["onClick","title"],Le={key:3,class:"text-center py-12"},Ae={class:"text-lg font-medium text-gray-900 mb-2"},Se={class:"text-gray-500 mb-6"},Ve={__name:"AdminTable",props:{items:{type:Array,default:()=>[]},columns:{type:Array,required:!0},actions:{type:Array,default:null},loading:{type:Boolean,default:!1},emptyIcon:{type:String,default:"material-symbols:inbox"},emptyTitle:{type:String,default:"لا توجد بيانات"},emptyDescription:{type:String,default:"لم يتم العثور على أي بيانات"},emptyAction:{type:Object,default:null}},setup(s){const y=(x,o)=>o.split(".").reduce((d,a)=>d==null?void 0:d[a],x);return(x,o)=>{const d=D;return c(),r("div",de,[s.loading?(c(),r("div",ue,[m(d,{name:"material-symbols:progress-activity",class:"animate-spin h-8 w-8 text-blue-600"}),o[1]||(o[1]=n("span",{class:"mr-3 text-gray-600"},"جارٍ التحميل...",-1))])):s.items.length>0?(c(),r("div",me,[n("table",ye,[n("thead",ge,[n("tr",null,[(c(!0),r(v,null,p(s.columns,a=>(c(),r("th",{key:a.key,class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},u(a.label),1))),128)),s.actions?(c(),r("th",xe," الإجراءات ")):C("",!0)])]),n("tbody",be,[(c(!0),r(v,null,p(s.items,a=>(c(),r("tr",{key:a.id,class:"hover:bg-gray-50"},[(c(!0),r(v,null,p(s.columns,l=>(c(),r("td",{key:l.key,class:"px-6 py-4 whitespace-nowrap"},[P(x.$slots,`column-${l.key}`,{item:a,value:y(a,l.key)},()=>[$(u(y(a,l.key)),1)])]))),128)),s.actions?(c(),r("td",ve,[P(x.$slots,"actions",{item:a},()=>[n("div",pe,[(c(!0),r(v,null,p(s.actions,l=>(c(),r("button",{key:l.key,onClick:S=>l.handler(a),class:_([l.class,"p-1 rounded"]),title:l.title},[m(d,{name:l.icon,class:"h-4 w-4"},null,8,["name"])],10,fe))),128))])])])):C("",!0)]))),128))])])])):s.items.length>0?(c(),r("div",he,[(c(!0),r(v,null,p(s.items,a=>(c(),r("div",{key:a.id,class:"p-4 hover:bg-gray-50 transition-colors"},[n("div",we,[(c(!0),r(v,null,p(s.columns,l=>(c(),r("div",{key:l.key,class:"flex justify-between items-start"},[n("div",_e,[n("p",Pe,u(l.label),1),n("div",Ce,[P(x.$slots,`column-${l.key}`,{item:a,value:y(a,l.key)},()=>[$(u(y(a,l.key)),1)])])])]))),128)),s.actions?(c(),r("div",$e,[P(x.$slots,"actions",{item:a},()=>[(c(!0),r(v,null,p(s.actions,l=>(c(),r("button",{key:l.key,onClick:S=>l.handler(a),class:_([l.class,"p-2 rounded-lg text-sm font-medium"]),title:l.title},[m(d,{name:l.icon,class:"h-4 w-4 ml-1"},null,8,["name"]),$(" "+u(l.label),1)],10,ke))),128))])])):C("",!0)])]))),128))])):(c(),r("div",Le,[m(d,{name:s.emptyIcon,class:"h-16 w-16 text-gray-300 mx-auto mb-4"},null,8,["name"]),n("h3",Ae,u(s.emptyTitle),1),n("p",Se,u(s.emptyDescription),1),P(x.$slots,"empty-actions",{},()=>[s.emptyAction?(c(),r("button",{key:0,onClick:o[0]||(o[0]=(...a)=>s.emptyAction.handler&&s.emptyAction.handler(...a)),class:_([s.emptyAction.class,"inline-flex items-center px-4 py-2 rounded-lg transition-colors"])},[m(d,{name:s.emptyAction.icon,class:"h-5 w-5 ml-2"},null,8,["name"]),$(" "+u(s.emptyAction.label),1)],2)):C("",!0)])]))])}}},Ne={key:0,class:"flex flex-col sm:flex-row items-center justify-between gap-4"},Ie={class:"text-xs sm:text-sm text-gray-700 text-center sm:text-right"},De={class:"flex items-center space-x-1 space-x-reverse"},Te=["disabled"],je={class:"flex items-center space-x-1 space-x-reverse"},Me=["onClick"],Ee=["disabled"],Fe={__name:"AdminPagination",props:{currentPage:{type:Number,required:!0},totalPages:{type:Number,required:!0},totalItems:{type:Number,required:!0},itemsPerPage:{type:Number,default:10},itemName:{type:String,default:"عنصر"},maxVisiblePages:{type:Number,default:5}},emits:["update:currentPage"],setup(s,{emit:y}){const x=f(()=>{const o=[],d=Math.max(1,currentPage.value-Math.floor(maxVisiblePages/2)),a=Math.min(totalPages.value,d+maxVisiblePages-1);for(let l=d;l<=a;l++)o.push(l);return o});return(o,d)=>s.totalPages>1?(c(),r("div",Ne,[n("div",Ie," عرض "+u((s.currentPage-1)*s.itemsPerPage+1)+" إلى "+u(Math.min(s.currentPage*s.itemsPerPage,s.totalItems))+" من أصل "+u(s.totalItems)+" "+u(s.itemName),1),n("div",De,[n("button",{onClick:d[0]||(d[0]=a=>o.$emit("update:currentPage",Math.max(1,s.currentPage-1))),disabled:s.currentPage===1,class:"px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," السابق ",8,Te),n("div",je,[(c(!0),r(v,null,p(g(x),a=>(c(),r("button",{key:a,onClick:l=>o.$emit("update:currentPage",a),class:_(["px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm border rounded-md transition-colors",a===s.currentPage?"bg-blue-600 text-white border-blue-600":"bg-white border-gray-300 hover:bg-gray-50"])},u(a),11,Me))),128))]),n("button",{onClick:d[1]||(d[1]=a=>o.$emit("update:currentPage",Math.min(s.totalPages,s.currentPage+1))),disabled:s.currentPage===s.totalPages,class:"px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," التالي ",8,Ee)])])):C("",!0)}},Re={class:"space-y-6"},Ue={class:"flex items-center"},Oe=["src","alt"],qe={class:"min-w-0 flex-1"},Be={class:"text-sm font-medium text-gray-900 truncate"},ze={class:"text-sm text-gray-500 truncate"},He={class:"text-sm font-medium text-gray-900"},Qe={class:"text-sm text-gray-500"},A=10,Xe={__name:"index",setup(s){const y=w([]),x=w(!0),o=w(""),d=w(""),a=w(""),l=w(1),S=f(()=>{let t=y.value;return o.value&&(t=t.filter(e=>e.title_ar&&e.title_ar.toLowerCase().includes(o.value.toLowerCase())||e.title_en&&e.title_en.toLowerCase().includes(o.value.toLowerCase())||e.title&&e.title.toLowerCase().includes(o.value.toLowerCase())||e.description_ar&&e.description_ar.toLowerCase().includes(o.value.toLowerCase())||e.description_en&&e.description_en.toLowerCase().includes(o.value.toLowerCase())||e.description&&e.description.toLowerCase().includes(o.value.toLowerCase()))),d.value&&(t=t.filter(e=>e.status===d.value)),a.value&&(t=t.filter(e=>e.category===a.value)),t.slice((l.value-1)*A,l.value*A)}),N=f(()=>{let t=y.value;return o.value&&(t=t.filter(e=>e.title_ar&&e.title_ar.toLowerCase().includes(o.value.toLowerCase())||e.title_en&&e.title_en.toLowerCase().includes(o.value.toLowerCase())||e.title&&e.title.toLowerCase().includes(o.value.toLowerCase())||e.description_ar&&e.description_ar.toLowerCase().includes(o.value.toLowerCase())||e.description_en&&e.description_en.toLowerCase().includes(o.value.toLowerCase())||e.description&&e.description.toLowerCase().includes(o.value.toLowerCase()))),d.value&&(t=t.filter(e=>e.status===d.value)),a.value&&(t=t.filter(e=>e.category===a.value)),t.length}),T=f(()=>Math.ceil(N.value/A)),j=f(()=>[{value:"active",label:"نشط"},{value:"inactive",label:"غير نشط"},{value:"draft",label:"مسودة"}]),M=f(()=>[{value:"domestic",label:"محلي"},{value:"international",label:"دولي"},{value:"religious",label:"ديني"},{value:"adventure",label:"مغامرة"}]),E=f(()=>[{key:"title",label:"الباقة"},{key:"category",label:"الفئة"},{key:"status",label:"الحالة"},{key:"price",label:"السعر"},{key:"created_at",label:"تاريخ الإنشاء"}]),F=f(()=>[{key:"view",icon:"material-symbols:visibility",label:"عرض",class:"text-blue-600 hover:text-blue-900",title:"عرض",handler:t=>V(`/admin/packages/${t.id}`)},{key:"edit",icon:"material-symbols:edit",label:"تحرير",class:"text-green-600 hover:text-green-900",title:"تحرير",handler:t=>V(`/admin/packages/${t.id}/edit`)},{key:"toggle",icon:"material-symbols:play-arrow",label:"تفعيل",class:"text-orange-600 hover:text-orange-900",title:"تفعيل/إلغاء تفعيل",handler:t=>U(t)},{key:"delete",icon:"material-symbols:delete",label:"حذف",class:"text-red-600 hover:text-red-900",title:"حذف",handler:t=>O(t)}]),R=async()=>{try{x.value=!0;const t=await $fetch("/api/packages");console.log("API Response:",t),t.success&&t.data?y.value=t.data:y.value=[]}catch(t){console.error("خطأ في تحميل الباقات:",t),y.value=[{id:1,title_ar:"رحلة إلى دبي",title_en:"Dubai Trip",description_ar:"رحلة سياحية مميزة إلى دبي لمدة 5 أيام",description_en:"Amazing 5-day trip to Dubai",price:2500,category:"international",status:"active",image:"/images/packages/dubai.jpg",created_at:new Date().toISOString()},{id:2,title_ar:"عمرة رمضان",title_en:"Ramadan Umrah",description_ar:"برنامج عمرة رمضان المبارك",description_en:"Ramadan Umrah program",price:1800,category:"religious",status:"active",image:"/images/packages/umrah.jpg",created_at:new Date(Date.now()-864e5).toISOString()}]}finally{x.value=!1}},U=async t=>{try{const e=t.status==="active"?"inactive":"active",h=y.value.findIndex(k=>k.id===t.id);h!==-1&&(y.value[h].status=e),console.log(`تم ${e==="active"?"تفعيل":"إلغاء تفعيل"} الباقة بنجاح`)}catch(e){console.error("خطأ في تغيير حالة الباقة:",e)}},O=async t=>{if(confirm("هل أنت متأكد من حذف هذه الباقة؟ لا يمكن التراجع عن هذا الإجراء."))try{await $fetch(`/api/packages/${t.id}`,{method:"DELETE"}),y.value=y.value.filter(e=>e.id!==t.id),console.log("تم حذف الباقة بنجاح")}catch(e){console.error("خطأ في حذف الباقة:",e)}},q=()=>{try{const{exportPackagesToExcel:t}=ce();t(y.value)?console.log("تم تصدير الباقات بنجاح"):console.error("فشل في تصدير الباقات")}catch(t){console.error("خطأ في تصدير الباقات:",t)}},B=t=>new Intl.NumberFormat("ar-SA",{style:"currency",currency:"SAR"}).format(t),z=t=>new Date(t).toLocaleDateString("ar-SA"),H=(t,e)=>t?t.length>e?t.substring(0,e)+"...":t:"",Q=t=>({domestic:"محلي",international:"دولي",religious:"ديني",adventure:"مغامرة"})[t]||t,W=t=>({domestic:"bg-blue-100 text-blue-800",international:"bg-green-100 text-green-800",religious:"bg-purple-100 text-purple-800",adventure:"bg-orange-100 text-orange-800"})[t]||"bg-gray-100 text-gray-800",Y=t=>({active:"نشط",inactive:"غير نشط",draft:"مسودة"})[t]||t,Z=t=>({active:"bg-green-100 text-green-800",inactive:"bg-red-100 text-red-800",draft:"bg-yellow-100 text-yellow-800"})[t]||"bg-gray-100 text-gray-800";return oe([o,d,a],()=>{l.value=1}),ie(()=>{R()}),re({title:"إدارة الباقات - Wonder Land Admin",meta:[{name:"description",content:"إدارة وتحرير الباقات السياحية"},{name:"robots",content:"noindex, nofollow"}]}),(t,e)=>{const h=D,k=te,G=se,J=ae,I=le,K=ne,X=Ve,ee=Fe;return c(),r("div",Re,[e[10]||(e[10]=n("div",{class:"h-16"},null,-1)),m(G,{title:"إدارة الباقات السياحية",description:"إدارة وتحرير الباقات السياحية المتاحة"},{actions:b(()=>[n("button",{onClick:q,class:"inline-flex items-center px-3 sm:px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm"},[m(h,{name:"material-symbols:download",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),e[4]||(e[4]=n("span",{class:"hidden sm:inline"},"تصدير البيانات",-1)),e[5]||(e[5]=n("span",{class:"sm:hidden"},"تصدير",-1))]),m(k,{to:"/admin/packages/images",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm"},{default:b(()=>[m(h,{name:"material-symbols:image",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),e[6]||(e[6]=n("span",{class:"hidden sm:inline"},"إدارة الصور",-1)),e[7]||(e[7]=n("span",{class:"sm:hidden"},"الصور",-1))]),_:1}),m(k,{to:"/admin/packages/create",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm"},{default:b(()=>[m(h,{name:"material-symbols:add",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),e[8]||(e[8]=n("span",{class:"hidden sm:inline"},"إضافة باقة جديدة",-1)),e[9]||(e[9]=n("span",{class:"sm:hidden"},"إضافة",-1))]),_:1})]),_:1}),m(K,null,{default:b(()=>[m(J,{modelValue:g(o),"onUpdate:modelValue":e[0]||(e[0]=i=>L(o)?o.value=i:null),placeholder:"البحث في الباقات..."},null,8,["modelValue"]),m(I,{modelValue:g(d),"onUpdate:modelValue":e[1]||(e[1]=i=>L(d)?d.value=i:null),options:g(j),placeholder:"جميع الحالات"},null,8,["modelValue","options"]),m(I,{modelValue:g(a),"onUpdate:modelValue":e[2]||(e[2]=i=>L(a)?a.value=i:null),options:g(M),placeholder:"جميع الفئات"},null,8,["modelValue","options"])]),_:1}),m(X,{items:g(S),columns:g(E),actions:g(F),loading:g(x),"empty-icon":"material-symbols:package-2-outline","empty-title":"لا توجد حزم","empty-description":"لم يتم العثور على أي حزم سياحية","empty-action":{label:"إضافة باقة جديدة",icon:"material-symbols:add",class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",handler:()=>("navigateTo"in t?t.navigateTo:g(V))("/admin/packages/create")}},{"column-title":b(({item:i})=>[n("div",Ue,[n("img",{src:i.image||i.image_url||"/images/placeholder.jpg",alt:i.title_ar||i.title_en||i.title,class:"h-10 w-10 sm:h-12 sm:w-12 rounded-lg object-cover ml-3 sm:ml-4 flex-shrink-0",loading:"lazy"},null,8,Oe),n("div",qe,[n("div",Be,u(i.title_ar||i.title_en||i.title),1),n("div",ze,u(H(i.description_ar||i.description_en||i.description,30)),1)])])]),"column-category":b(({item:i})=>[n("span",{class:_([W(i.category),"px-2 py-1 text-xs font-medium rounded-full"])},u(Q(i.category)),3)]),"column-status":b(({item:i})=>[n("span",{class:_([Z(i.status),"px-2 py-1 text-xs font-medium rounded-full"])},u(Y(i.status)),3)]),"column-price":b(({item:i})=>[n("div",null,[n("div",He,u(B(i.price)),1),n("div",Qe,u(i.currency||"SAR"),1)])]),"column-created_at":b(({item:i})=>[$(u(z(i.created_at)),1)]),_:1},8,["items","columns","actions","loading","empty-action"]),m(ee,{"current-page":g(l),"onUpdate:currentPage":e[3]||(e[3]=i=>L(l)?l.value=i:null),"total-pages":g(T),"total-items":g(N),"items-per-page":A,"item-name":"حزمة"},null,8,["current-page","total-pages","total-items"])])}}};export{Xe as default};
