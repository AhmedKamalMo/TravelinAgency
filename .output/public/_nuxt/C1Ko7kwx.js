import $ from"./CBGl2SH_.js";import{_ as N}from"./BRbu2fQj.js";import{A as B,g as b,m as M,B as T,c as f,o as p,b as t,a as n,k as x,l as c,h as o,i as d,v as y,T as _,U as q,j as C,e as D,t as I,w as S,aD as h,J as j}from"./CvlND2yj.js";import{_ as P}from"./DcuaUXI9.js";import{u as v}from"./Cg_6Ly4o.js";import{u as G}from"./0ltj-c_F.js";import"./x_rD_Ya3.js";const J={class:"space-y-6"},L={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},A={class:"mt-4 sm:mt-0 flex space-x-3 space-x-reverse"},W={key:0,class:"flex justify-center items-center py-12"},H={key:1,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},R={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},z={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},F={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},K={class:"md:col-span-2"},O={class:"flex items-center space-x-4 space-x-reverse"},Q={class:"flex items-center"},X={class:"flex items-center justify-end space-x-4 space-x-reverse pt-6 border-t border-gray-200"},Y=["disabled"],Z={key:2,class:"text-center py-12"},de={__name:"edit",setup(ee){const g=B().params.id,w=b(!0),u=b(!1),m=b(null),s=b({name_ar:"",name_en:"",description_ar:"",description_en:"",category:"international",image_url:"",active:!0,featured:!1}),k=async()=>{const{showError:r}=v();try{w.value=!0;const e=await $fetch(`/api/destinations/${g}`);e.success&&e.data?(m.value=e.data,await h(),s.value={name_ar:e.data.name_ar||"",name_en:e.data.name_en||"",description_ar:e.data.description_ar||"",description_en:e.data.description_en||"",category:e.data.category||"international",image_url:e.data.image_url||e.data.image||"",active:e.data.active===1||e.data.active===!0,featured:e.data.featured===1||e.data.featured===!0}):m.value=null}catch(e){console.error("خطأ في تحميل بيانات الوجهة:",e),m.value=null,r("خطأ في التحميل","حدث خطأ في تحميل بيانات الوجهة. يرجى المحاولة مرة أخرى.")}finally{w.value=!1}},U=r=>{const{showSuccess:e}=v();e("تم رفع الصورة","تم رفع الصورة بنجاح!")},V=r=>{const{showError:e}=v();e("خطأ في رفع الصورة",r.message||"حدث خطأ في رفع الصورة")},E=async()=>{const{showSuccess:r,showError:e,showWarning:l}=v();try{if(u.value=!0,!s.value.name_ar||!s.value.name_en||!s.value.description_ar||!s.value.description_en){l("حقول مطلوبة","يرجى ملء جميع الحقول المطلوبة");return}(await $fetch(`/api/destinations/${g}`,{method:"PUT",body:s.value})).success?(r("تم التحديث بنجاح","تم تحديث الوجهة بنجاح!"),await j(`/admin/destinations/${g}`)):e("فشل في التحديث","فشل في تحديث الوجهة. يرجى المحاولة مرة أخرى.")}catch(i){console.error("خطأ في تحديث الوجهة:",i),e("خطأ في التحديث","حدث خطأ في تحديث الوجهة. يرجى المحاولة مرة أخرى.")}finally{u.value=!1}};return M(()=>{k()}),G({title:T(()=>{var r;return`تحرير ${((r=m.value)==null?void 0:r.name_ar)||"الوجهة"} - Wonder Land Admin`}),meta:[{name:"description",content:"تحرير معلومات الوجهة السياحية"},{name:"robots",content:"noindex, nofollow"}]}),(r,e)=>{const l=$,i=N;return p(),f("div",J,[e[27]||(e[27]=t("div",{class:"h-16"},null,-1)),t("div",L,[e[10]||(e[10]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"تحرير الوجهة"),t("p",{class:"mt-1 text-sm text-gray-600"},"تحرير معلومات الوجهة السياحية")],-1)),t("div",A,[n(i,{to:`/admin/destinations/${o(g)}`,class:"inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors"},{default:x(()=>[n(l,{name:"material-symbols:visibility",class:"h-5 w-5 ml-2"}),e[8]||(e[8]=c(" عرض "))]),_:1},8,["to"]),n(i,{to:"/admin/destinations",class:"inline-flex items-center px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"},{default:x(()=>[n(l,{name:"material-symbols:arrow-back",class:"h-5 w-5 ml-2"}),e[9]||(e[9]=c(" العودة للقائمة "))]),_:1})])]),o(w)?(p(),f("div",W,[n(l,{name:"material-symbols:progress-activity",class:"animate-spin h-8 w-8 text-blue-600"}),e[11]||(e[11]=t("span",{class:"mr-3 text-gray-600"},"جارٍ تحميل بيانات الوجهة...",-1))])):o(m)?(p(),f("div",H,[t("form",{onSubmit:S(E,["prevent"]),class:"space-y-6"},[t("div",R,[t("div",null,[e[12]||(e[12]=t("label",{for:"name_ar",class:"block text-sm font-medium text-gray-700 mb-2"}," الاسم بالعربية * ",-1)),d(t("input",{id:"name_ar","onUpdate:modelValue":e[0]||(e[0]=a=>o(s).name_ar=a),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل اسم الوجهة بالعربية"},null,512),[[y,o(s).name_ar]])]),t("div",null,[e[13]||(e[13]=t("label",{for:"name_en",class:"block text-sm font-medium text-gray-700 mb-2"}," الاسم بالإنجليزية * ",-1)),d(t("input",{id:"name_en","onUpdate:modelValue":e[1]||(e[1]=a=>o(s).name_en=a),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter destination name in English"},null,512),[[y,o(s).name_en]])])]),t("div",z,[t("div",null,[e[14]||(e[14]=t("label",{for:"description_ar",class:"block text-sm font-medium text-gray-700 mb-2"}," الوصف بالعربية * ",-1)),d(t("textarea",{id:"description_ar","onUpdate:modelValue":e[2]||(e[2]=a=>o(s).description_ar=a),required:"",rows:"4",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل وصف الوجهة بالعربية"},null,512),[[y,o(s).description_ar]])]),t("div",null,[e[15]||(e[15]=t("label",{for:"description_en",class:"block text-sm font-medium text-gray-700 mb-2"}," الوصف بالإنجليزية * ",-1)),d(t("textarea",{id:"description_en","onUpdate:modelValue":e[3]||(e[3]=a=>o(s).description_en=a),required:"",rows:"4",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter destination description in English"},null,512),[[y,o(s).description_en]])])]),t("div",F,[t("div",null,[e[17]||(e[17]=t("label",{for:"category",class:"block text-sm font-medium text-gray-700 mb-2"}," نوع الوجهة * ",-1)),d(t("select",{id:"category","onUpdate:modelValue":e[4]||(e[4]=a=>o(s).category=a),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},e[16]||(e[16]=[t("option",{value:"international"},"عالمي",-1),t("option",{value:"saudi"},"سعودي",-1)]),512),[[_,o(s).category]])]),t("div",K,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," صورة الوجهة ",-1)),n(P,{modelValue:o(s).image_url,"onUpdate:modelValue":e[5]||(e[5]=a=>o(s).image_url=a),alt:"صورة الوجهة",onUploadComplete:U,onUploadError:V},null,8,["modelValue"]),e[19]||(e[19]=t("p",{class:"mt-2 text-xs text-gray-500"}," يمكنك رفع صورة JPG, PNG, JPEG بحجم أقصى 5MB ",-1))]),t("div",null,[e[21]||(e[21]=t("label",{for:"active",class:"block text-sm font-medium text-gray-700 mb-2"}," حالة الوجهة ",-1)),d(t("select",{id:"active","onUpdate:modelValue":e[6]||(e[6]=a=>o(s).active=a),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},e[20]||(e[20]=[t("option",{value:!0},"نشط",-1),t("option",{value:!1},"غير نشط",-1)]),512),[[_,o(s).active]])])]),t("div",O,[t("label",Q,[d(t("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>o(s).featured=a),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[q,o(s).featured]]),e[22]||(e[22]=t("span",{class:"mr-2 text-sm text-gray-700"},"وجهة مميزة",-1))])]),t("div",X,[n(i,{to:"/admin/destinations",class:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},{default:x(()=>e[23]||(e[23]=[c(" إلغاء ")])),_:1}),t("button",{type:"submit",disabled:o(u),class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[o(u)?(p(),C(l,{key:0,name:"material-symbols:progress-activity",class:"animate-spin h-5 w-5 ml-2"})):D("",!0),c(" "+I(o(u)?"جاري الحفظ...":"حفظ التغييرات"),1)],8,Y)])],32)])):(p(),f("div",Z,[n(l,{name:"material-symbols:place",class:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e[25]||(e[25]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"الوجهة غير موجودة",-1)),e[26]||(e[26]=t("p",{class:"text-gray-500 mb-6"},"لم يتم العثور على الوجهة المطلوبة",-1)),n(i,{to:"/admin/destinations",class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},{default:x(()=>e[24]||(e[24]=[c(" العودة للقائمة ")])),_:1})]))])}}};export{de as default};
