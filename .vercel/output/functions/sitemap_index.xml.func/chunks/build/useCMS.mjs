import{m as t}from"./server.mjs";import{readonly as e}from"vue";const _=()=>{const n=t("cms.siteSettings",(()=>({}))),a=t("cms.navigation",(()=>({}))),r=t("cms.currentPage",(()=>null)),l=async()=>{try{const t=await $fetch("/api/public/site-settings");return n.value=t.data.settings,t.data.settings}catch(t){return console.error("Error loading site settings:",t),{}}},g=async t=>{try{const e=t?`/api/public/navigation?menu_name=${t}&t=${Date.now()}`:`/api/public/navigation?t=${Date.now()}`,n=await $fetch(e);return a.value=n.data.menus,n.data.menus}catch(t){return console.error("Error loading navigation:",t),{}}};return{siteSettings:e(n),navigation:e(a),currentPage:e(r),loadSiteSettings:l,loadNavigation:g,refreshNavigation:async t=>{try{const e=await $fetch("/api/public/navigation/refresh",{method:"POST",body:{menu_name:t||"main",t:Date.now()}});return a.value=e.data.menus,e.data.menus}catch(t){return console.error("Error refreshing navigation:",t),{}}},loadPage:async t=>{try{const e=await $fetch(`/api/public/pages/${t}`);return r.value=e.data,e.data}catch(t){return console.error("Error loading page:",t),null}},getSetting:(t,e,a="")=>{var r;return(null==(r=n.value[t])?void 0:r[e])||a},getMenu:t=>a.value[t]||[],getCurrentPage:()=>r.value,getPageSection:t=>{var e;return null!=(e=r.value)&&e.sections?r.value.sections.find((e=>e.section_type===t)):null},getPageSections:t=>{var e;return null!=(e=r.value)&&e.sections?r.value.sections.filter((e=>e.section_type===t)):[]},getSectionBlocks:(t,e)=>{var n;if(null==(n=r.value)||!n.sections)return[];const a=r.value.sections.find((e=>e.id===t));return null!=a&&a.content_blocks?e?a.content_blocks.filter((t=>t.block_type===e)):a.content_blocks:[]},initializeCMS:async()=>{await Promise.all([l(),g()])}}};export{_};
//# sourceMappingURL=useCMS.mjs.map
