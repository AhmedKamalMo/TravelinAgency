import{d as e}from"../../_/nitro.mjs";import{executeQuery as t}from"../../_/database.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"vue";import"@iconify/utils";import"node:crypto";import"consola";import"node:url";import"ipx";import"node:fs";import"node:path";import"mysql2/promise";import"bcryptjs";import"jsonwebtoken";const a=e((async e=>{try{const e=await t("\n      SELECT \n        id, \n        title_ar,\n        title_en,\n        description_ar,\n        description_en,\n        price,\n        duration_days as duration,\n        image_url as image,\n        travel_period as location,\n        max_persons,\n        category,\n        featured,\n        active as status,\n        features,\n        itinerary,\n        included,\n        excluded,\n        created_at,\n        updated_at\n      FROM packages \n      ORDER BY created_at DESC\n    ");if(!e)return{success:!1,message:"No packages found",data:[]};const getImagePath=e=>e?e.startsWith("/images/packages/")||e.startsWith("/")?e:`/images/packages/${e}`:"/images/placeholder.svg";return{success:!0,message:"Packages retrieved successfully",data:e.map((e=>({id:e.id,image_url:getImagePath(e.image),image:getImagePath(e.image),title_ar:e.title_ar,title_en:e.title_en,title:e.title_ar||e.title_en,description_ar:e.description_ar,description_en:e.description_en,description:e.description_ar||e.description_en,travel_period:e.location,duration_days:e.duration,price:e.price,max_persons:e.max_persons||10,category:e.category||"domestic",featured:e.featured,location:e.location,status:1===e.status?"active":"inactive",features:JSON.parse(e.features||"[]"),itinerary:JSON.parse(e.itinerary||"[]"),included:JSON.parse(e.included||"[]"),excluded:JSON.parse(e.excluded||"[]"),created_at:e.created_at,updated_at:e.updated_at})))}}catch(e){return console.error("Error fetching packages:",e),{success:!1,message:"Failed to fetch packages",error:"Internal server error",data:[]}}}));export{a as default};
//# sourceMappingURL=index.get2.mjs.map
