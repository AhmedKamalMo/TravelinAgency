import{d as e,r as t,c as o}from"../../../_/nitro.mjs";import{unlink as r}from"fs/promises";import{join as s}from"path";import"node:http";import"node:https";import"node:events";import"node:buffer";import"vue";import"@iconify/utils";import"node:crypto";import"consola";import"node:url";import"ipx";import"node:fs";import"node:path";const i=e((async e=>{try{const i=await t(e),{filename:a}=i;if(!a)throw o({statusCode:400,statusMessage:"Filename is required"});const m=s(process.cwd(),"public","images","packages","imported"),p=s(process.cwd(),"public","images","packages","thumbnails"),c=s(m,a),n=s(p,`thumb_${a}`);try{await r(c)}catch(e){console.error(`Error deleting image ${a}:`,e)}try{await r(n)}catch(e){console.error(`Error deleting thumbnail for ${a}:`,e)}return{success:!0,message:"Image deleted successfully"}}catch(e){if(console.error("Error deleting image:",e),e.statusCode)throw e;throw o({statusCode:500,statusMessage:"Failed to delete image"})}}));export{i as default};
//# sourceMappingURL=delete.post.mjs.map
