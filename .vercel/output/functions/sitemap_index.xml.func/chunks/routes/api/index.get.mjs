import{d as t}from"../../_/nitro.mjs";import{executeQuery as e}from"../../_/database.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"vue";import"@iconify/utils";import"node:crypto";import"consola";import"node:url";import"ipx";import"node:fs";import"node:path";import"mysql2/promise";import"bcryptjs";import"jsonwebtoken";const a=t((async t=>{try{try{const t=await e("\n        SELECT \n          id, \n          title_ar,\n          title_en,\n          content_ar,\n          content_en,\n          type,\n          status,\n          url,\n          slug,\n          created_at,\n          updated_at\n        FROM content_pages \n        ORDER BY created_at DESC\n      ");if(t&&t.length>0){return{success:!0,message:"Content retrieved successfully from database",pages:t.map((t=>({id:t.id,title:t.title_ar||t.title_en,title_ar:t.title_ar,title_en:t.title_en,content:t.content_ar||t.content_en,content_ar:t.content_ar,content_en:t.content_en,type:t.type||"page",status:t.status||"draft",url:t.url||`/${t.slug||""}`,created_at:t.created_at,updated_at:t.updated_at})))}}}catch(t){}let t={};try{const e=await import("fs/promises"),a=(await import("path")).join(process.cwd(),"page-statuses.json"),n=await e.readFile(a,"utf-8");t=JSON.parse(n)}catch(e){t={}}return{success:!0,message:"Content retrieved successfully from default data",pages:[{id:1,title_ar:"الصفحة الرئيسية",title_en:"Home Page",content_ar:"الصفحة الرئيسية لموقع وكالة السفر",content_en:"Main homepage of the travel agency website",type:"page",status:t[1]||"published",url:"/",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},{id:2,title_ar:"الباقات السياحية",title_en:"Travel Packages",content_ar:"عرض جميع الباقات السياحية المتاحة",content_en:"View all available travel packages",type:"page",status:t[2]||"published",url:"/packages/",created_at:new Date(Date.now()-864e5).toISOString(),updated_at:new Date(Date.now()-864e5).toISOString()},{id:3,title_ar:"باقة مخصصة",title_en:"Custom Package",content_ar:"إنشاء باقة سياحية مخصصة حسب احتياجاتك",content_en:"Create a custom travel package according to your needs",type:"page",status:t[3]||"published",url:"/custom-package/",created_at:new Date(Date.now()-1728e5).toISOString(),updated_at:new Date(Date.now()-1728e5).toISOString()},{id:4,title_ar:"من نحن",title_en:"About Us",content_ar:"تعرف على وكالة السفر وخدماتنا",content_en:"Learn about our travel agency and services",type:"page",status:t[4]||"published",url:"/about/",created_at:new Date(Date.now()-2592e5).toISOString(),updated_at:new Date(Date.now()-2592e5).toISOString()}]}}catch(t){return console.error("Error fetching content:",t),{success:!1,message:"Failed to fetch content",error:"Internal server error",pages:[]}}}));export{a as default};
//# sourceMappingURL=index.get.mjs.map
