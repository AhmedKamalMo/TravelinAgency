import{d as t,g as e,c as a}from"../../../_/nitro.mjs";import{executeQuery as i}from"../../../_/database.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"vue";import"@iconify/utils";import"node:crypto";import"consola";import"node:url";import"ipx";import"node:fs";import"node:path";import"mysql2/promise";import"bcryptjs";import"jsonwebtoken";const r=t((async t=>{try{const r=e(t,"id");if(!r)throw a({statusCode:400,statusMessage:"Package ID is required"});try{const t=await i("\n        SELECT \n          id, \n          title_ar,\n          title_en,\n          description_ar,\n          description_en,\n          price,\n          duration_days as duration,\n          image_url as image,\n          travel_period as location,\n          max_persons,\n          featured,\n          active as status,\n          created_at,\n          updated_at\n        FROM packages \n        WHERE numeric_id = ? OR id = ?\n      ",[r,r]);if(t&&t.length>0){const e=t[0];return{package:{id:e.id,title:e.title_ar||e.title_en,title_ar:e.title_ar,title_en:e.title_en,description:e.description_ar||e.description_en,description_ar:e.description_ar,description_en:e.description_en,price:e.price,duration:`${e.duration} days`,duration_days:e.duration,image:e.image,image_url:e.image,destination:e.location,location:e.location,travel_period:e.location,max_persons:e.max_persons||10,category:"international",featured:e.featured,status:1===e.status?"active":"inactive",features:[],itinerary:[],included:[],excluded:[],created_at:e.created_at,updated_at:e.updated_at}}}}catch(t){console.log("Database package not available, trying local data...")}try{const t=await import("fs"),e=(await import("path")).join(process.cwd(),"public","packages-with-local-images.json"),a=t.readFileSync(e,"utf8"),i=JSON.parse(a).find((t=>t.id===parseInt(r)));if(i)return{package:{id:i.id,title:i.title,title_ar:i.title,title_en:i.title,description:i.description,description_ar:i.description,description_en:i.description,price:i.price,duration:i.duration,duration_days:7,image:i.image,image_url:i.image,destination:i.destination,location:i.destination,travel_period:i.destination,max_persons:10,category:"international",featured:i.featured,status:i.status,features:[],itinerary:[],included:[],excluded:[],created_at:i.created_at,updated_at:i.updated_at}}}catch(t){console.log("Local package not available")}throw a({statusCode:404,statusMessage:"Package not found"})}catch(t){if(console.error("Error fetching package:",t),t.statusCode)throw t;throw a({statusCode:500,statusMessage:"Failed to fetch package"})}}));export{r as default};
//# sourceMappingURL=_id_.get.mjs.map
