import{d as e,c as t,r as s}from"../../../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"vue";import"@iconify/utils";import"node:crypto";import"consola";import"node:url";import"ipx";import"node:fs";import"node:path";const a=e((async e=>{try{const r=await getServerSession(e);if(!r?.user?.role||!["admin","moderator"].includes(r.user.role))throw t({statusCode:403,statusMessage:"غير مصرح بالوصول"});const i=await s(e);if(!i.email||!i.password||!i.full_name)throw t({statusCode:400,statusMessage:"البريد الإلكتروني وكلمة المرور والاسم الكامل مطلوبة"});if(o=i.email,!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o))throw t({statusCode:400,statusMessage:"البريد الإلكتروني غير صحيح"});if(i.password.length<6)throw t({statusCode:400,statusMessage:"كلمة المرور يجب أن تكون 6 أحرف على الأقل"});if(i.phone&&(a=i.phone,!/^\+966[0-9]{9}$/.test(a)))throw t({statusCode:400,statusMessage:"رقم الهاتف غير صحيح"});if(i.role&&!["admin","moderator","user"].includes(i.role))throw t({statusCode:400,statusMessage:"الدور غير صحيح"});if(i.status&&!["active","inactive","suspended"].includes(i.status))throw t({statusCode:400,statusMessage:"الحالة غير صحيحة"});return{success:!0,data:{id:Date.now(),email:i.email,full_name:i.full_name,phone:i.phone||"",role:i.role||"user",status:i.status||"active",email_verified:!1,phone_verified:!1,bio:i.bio||"",date_of_birth:i.date_of_birth||"",gender:i.gender||"male",nationality:i.nationality||"Saudi Arabia",address:i.address||"",city:i.city||"",country:i.country||"Saudi Arabia",postal_code:i.postal_code||"",preferences:{language:"ar",timezone:"Asia/Riyadh",notifications:{email:!0,sms:!0,push:!0},privacy:{profile_visibility:"public",show_email:!1,show_phone:!1}},created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),last_login:null,login_count:0},message:"تم إنشاء المستخدم بنجاح"}}catch(e){return console.error("Error creating user:",e),{success:!1,error:e.message||"فشل في إنشاء المستخدم"}}var a,o}));export{a as default};
//# sourceMappingURL=index.post.mjs.map
