import{d as t}from"../../_/nitro.mjs";import{executeQuery as e}from"../../_/database.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"vue";import"@iconify/utils";import"node:crypto";import"consola";import"node:url";import"ipx";import"node:fs";import"node:path";import"mysql2/promise";import"bcryptjs";import"jsonwebtoken";const a=t((async t=>{try{try{const t=await e("\n        SELECT \n          id, \n          title_ar,\n          title_en,\n          description_ar,\n          description_en,\n          price,\n          duration_days as duration,\n          image_url as image,\n          travel_period as location,\n          max_persons,\n          featured,\n          active as status,\n          created_at,\n          updated_at\n        FROM packages \n        ORDER BY created_at DESC\n      ");if(t&&t.length>0){return{success:!0,message:"Packages retrieved successfully from database",data:t.map((t=>({id:t.id,title:t.title_ar||t.title_en,title_ar:t.title_ar,title_en:t.title_en,description:t.description_ar||t.description_en,description_ar:t.description_ar,description_en:t.description_en,price:t.price,duration:`${t.duration} days`,duration_days:t.duration,image:t.image,image_url:t.image,destination:t.location,location:t.location,travel_period:t.location,max_persons:t.max_persons||10,category:"international",featured:t.featured,status:1===t.status?"active":"inactive",features:[],itinerary:[],included:[],excluded:[],created_at:t.created_at,updated_at:t.updated_at})))}}}catch(t){console.log("Database packages not available, trying local data...")}try{const t=await import("fs"),e=(await import("path")).join(process.cwd(),"public","packages-with-local-images.json"),a=t.readFileSync(e,"utf8"),i=JSON.parse(a);if(i&&Array.isArray(i)&&i.length>0){return{success:!0,message:"Packages retrieved successfully from local data",data:i.map((t=>({id:t.id,title:t.title,title_ar:t.title,title_en:t.title,description:t.description,description_ar:t.description,description_en:t.description,price:t.price,duration:t.duration,duration_days:7,image:t.image,image_url:t.image,destination:t.destination,location:t.destination,travel_period:t.destination,max_persons:10,category:"international",featured:t.featured,status:t.status,features:[],itinerary:[],included:[],excluded:[],created_at:t.created_at,updated_at:t.updated_at})))}}}catch(t){console.log("Local packages not available")}return{success:!1,message:"No packages found",data:[]}}catch(t){return console.error("Error fetching packages:",t),{success:!1,message:"Failed to fetch packages",error:"Internal server error",data:[]}}}));export{a as default};
//# sourceMappingURL=index.get3.mjs.map
