import{d as e,c as t,g as s,r as a}from"../../../../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"vue";import"@iconify/utils";import"node:crypto";import"consola";import"node:url";import"ipx";import"node:fs";import"node:path";const o=e((async e=>{try{const i=await getServerSession(e);if(!i?.user?.role||!["admin","moderator"].includes(i.user.role))throw t({statusCode:403,statusMessage:"غير مصرح بالوصول"});const n=s(e,"id");if(!n)throw t({statusCode:400,statusMessage:"معرف المستخدم مطلوب"});const d=await a(e);if(d.email&&(r=d.email,!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)))throw t({statusCode:400,statusMessage:"البريد الإلكتروني غير صحيح"});if(d.phone&&(o=d.phone,!/^\+966[0-9]{9}$/.test(o)))throw t({statusCode:400,statusMessage:"رقم الهاتف غير صحيح"});if(d.role&&!["admin","moderator","user"].includes(d.role))throw t({statusCode:400,statusMessage:"الدور غير صحيح"});if(d.status&&!["active","inactive","suspended"].includes(d.status))throw t({statusCode:400,statusMessage:"الحالة غير صحيحة"});return{success:!0,data:{id:parseInt(n),email:d.email||"user@example.com",full_name:d.full_name||"مستخدم",phone:d.phone||"+966501234567",role:d.role||"user",status:d.status||"active",email_verified:!0,phone_verified:!1,bio:d.bio||"",date_of_birth:d.date_of_birth||"",gender:d.gender||"male",nationality:d.nationality||"Saudi Arabia",address:d.address||"",city:d.city||"",country:d.country||"Saudi Arabia",postal_code:d.postal_code||"",preferences:{language:"ar",timezone:"Asia/Riyadh",notifications:{email:!0,sms:!0,push:!0},privacy:{profile_visibility:"public",show_email:!1,show_phone:!1},...d.preferences},created_at:"2024-01-01T00:00:00Z",updated_at:(new Date).toISOString(),last_login:"2024-01-15T10:30:00Z",login_count:1},message:"تم تحديث بيانات المستخدم بنجاح"}}catch(e){return console.error("Error updating user:",e),{success:!1,error:e.message||"فشل في تحديث بيانات المستخدم"}}var o,r}));export{o as default};
//# sourceMappingURL=_id_.put.mjs.map
