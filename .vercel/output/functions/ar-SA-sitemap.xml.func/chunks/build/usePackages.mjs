import{M as e}from"./nuxt-link.mjs";import{q as a}from"./index2.mjs";import{defineComponent as t,mergeProps as s,resolveComponent as l,unref as r,withCtx as i,createVNode as n,toDisplayString as c,createBlock as p,createCommentVNode as d,openBlock as g,createTextVNode as m,ref as u}from"vue";import{ssrRenderAttrs as x,ssrRenderClass as f,ssrRenderComponent as _,ssrInterpolate as h}from"vue/server-renderer";import{g as v,n as y}from"./server.mjs";import{G as b}from"./NuxtImg.vue2.mjs";import{d as $}from"./SaudiRyialSymbol.vue2.mjs";const z=t({__name:"FlightIcon",__ssrInlineRender:!0,props:{size:{default:24},colorClass:{default:""},className:{default:""}},setup:e=>(e,a,t,l)=>{a(`<svg${x(s({width:e.size,height:e.size,viewBox:"0 0 32 32",class:e.className,xmlns:"http://www.w3.org/2000/svg"},l))}><g id="flight-icon"><path class="${f([e.colorClass||"stroke-current"])}" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M25.597,8.714l-5.506,1.789l-7.974-5.61c-0.126-0.096-0.29-0.116-0.442-0.066l-1.531,0.497c-0.304,0.1-0.437,0.468-0.265,0.738    l4.03,6.45l-6.115,1.986c-0.637,0.208-1.329,0.086-1.854-0.333l-1.783-1.408c-0.129-0.104-0.306-0.132-0.467-0.079l-0.97,0.314    c-0.333,0.109-0.456,0.506-0.24,0.783l1.948,2.532c1.3,1.67,3.499,2.354,5.505,1.702l19.668-6.391    c0.685-0.223,1.057-0.954,0.834-1.638C30.3,9.563,29.967,9.25,29.547,9.123l-1.632-0.458C27.152,8.451,26.349,8.47,25.597,8.714z"></path><path class="${f([e.colorClass||"stroke-current"])}" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M14.398,18.689l-1.339,3.767c-0.139,0.391,0.231,0.771,0.625,0.643l1.258-0.408c0.1-0.033,0.188-0.096,0.249-0.181l5.854-8.01"></path><line class="${f([e.colorClass||"stroke-current"])}" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" x1="1.5" x2="28.5" y1="30.5" y2="30.5"></line></g></svg>`)}}),j=t({__name:"PackageCard",__ssrInlineRender:!0,props:{package_:{}},setup(t){const u=t,{locale:x}=v(),f=y(),w=e=>{console.warn("Image failed to load:",u.package_.image_url);const a=e.target;if(a){const e=u.package_.image_url;if(e&&!e.includes("_ipx"))if(e.includes("/imported/")){const t=`/images/packages/${e.split("/").pop()}`;a.src=t}else a.src=e;else a.src="/images/placeholder.svg"}};return(t,v,y,j)=>{const P=e,S=b,A=a,I=l("VTooltip");v(_(P,s({to:r(f)(`/packages/${u.package_.id}`),class:"group relative flex h-full flex-col overflow-hidden rounded-xl bg-surface shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)] hover:shadow-[0_8px_25px_-5px_rgba(0,0,0,0.1),0_10px_20px_-5px_rgba(0,0,0,0.04)] transition-all duration-300"},j),{default:i(((e,a,s,l)=>{if(!a)return[n("div",{class:"relative h-[280px] overflow-hidden"},[n(S,{src:u.package_.image_url,class:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105",alt:u.package_.title_en,width:"800",height:"600",loading:"lazy",sizes:"sm:100vw md:50vw lg:33vw",placeholder:"",onError:w},null,8,["src","alt"]),n("div",{class:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"}),u.package_.included_options&&u.package_.included_options.hotel&&u.package_.included_options.hotelGrade?(g(),p("div",{key:0,class:"absolute top-4 left-4 rtl:left-auto rtl:right-4 z-10"},[n("span",{class:"flex items-center gap-1 bg-white/90 text-yellow-600 rounded-full px-4 py-2 text-sm font-semibold shadow"},[n(A,{name:"material-symbols:star",class:"w-4 h-4 text-yellow-400"}),m(" "+c(t.$t("packages.details.hotel_grade",{grade:u.package_.included_options.hotelGrade})),1)])])):d("",!0),n("div",{class:"absolute top-4 right-4 rtl:right-auto rtl:left-4"},[n("div",{class:"bg-surface/95 backdrop-blur-sm px-4 py-2 rounded-full shadow-[0_2px_10px_-3px_rgba(0,0,0,0.1)] transform transition-transform duration-300 hover:scale-105 flex flex-col items-center"},[n("span",{class:"text-primary font-medium tracking-wide whitespace-nowrap flex items-center gap-1"},[n($,{size:16,class:"text-primary"}),m(" "+c(u.package_.price.toLocaleString())+" ",1),n("span",{class:"text-sm text-gray-700 font-normal"},c(t.$t("packages.details.per_person")),1),n(I,{triggers:["hover","focus"],placement:"top"},{popper:i((()=>[n("div",{class:"bg-gray-900 text-white text-xs px-3 py-2 rounded-lg shadow-lg max-w-xs text-center"},c(t.$t("packages.details.price_info_tooltip")),1)])),default:i((()=>[n(A,{name:"material-symbols:info-outline",class:"w-4 h-4 text-gray-400 cursor-pointer"})])),_:1})])])]),n("div",{class:"absolute bottom-4 left-4 right-4 flex flex-wrap gap-2"},[n("div",{class:"bg-primary/90 backdrop-blur-sm px-3 py-1.5 rounded-full text-sm font-medium text-white transform transition-transform duration-300 hover:scale-105 flex items-center gap-1.5"},[n(A,{name:"material-symbols:schedule-outline",class:"h-4 w-4"}),m(" "+c(t.$t("packages.details.duration",{count:u.package_.duration_days})),1)]),u.package_.travel_period?(g(),p("div",{key:0,class:"bg-surface/20 backdrop-blur-sm px-3 py-1.5 rounded-full text-sm text-white flex items-center gap-1.5 transform transition-transform duration-300 hover:scale-105"},[n(A,{name:"material-symbols:calendar-month-outline",class:"h-4 w-4"}),n("p",{class:"text-gray-100"},c(u.package_.travel_period),1)])):d("",!0)])]),n("div",{class:"flex flex-1 flex-col p-6"},[n("h3",{class:"text-xl font-semibold mb-2 text-stone-750 transition-colors duration-300 group-hover:text-stone-950"},c("ar-SA"===r(x)?u.package_.title_ar:u.package_.title_en),1),n("p",{class:"mb-4 text-sm text-gray-800 line-clamp-2"},c("ar-SA"===r(x)?u.package_.description_ar:u.package_.description_en),1),n("div",{class:"mt-auto flex justify-between items-center"},[u.package_.included_options?(g(),p("div",{key:0,class:"flex items-center gap-3"},[u.package_.included_options.flight?(g(),p(z,{key:0,size:24,class:"text-primary"})):d("",!0),u.package_.included_options.hotel?(g(),p(A,{key:1,name:"material-symbols:hotel-outline",class:"h-6 w-6 text-primary"})):d("",!0),u.package_.included_options.transportation?(g(),p(A,{key:2,name:"material-symbols:directions-car-outline",class:"h-6 w-6 text-primary"})):d("",!0)])):d("",!0),n("span",{class:"text-primary font-medium text-sm group-hover:translate-x-1 rtl:group-hover:-translate-x-1 transition-transform"},c("ar-SA"===r(x)?t.$t("common.view_details")+" ←":t.$t("common.view_details")+" →"),1)])])];a(`<div class="relative h-[280px] overflow-hidden"${l}>`),a(_(S,{src:u.package_.image_url,class:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105",alt:u.package_.title_en,width:"800",height:"600",loading:"lazy",sizes:"sm:100vw md:50vw lg:33vw",placeholder:"",onError:w},null,s,l)),a(`<div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"${l}></div>`),u.package_.included_options&&u.package_.included_options.hotel&&u.package_.included_options.hotelGrade?(a(`<div class="absolute top-4 left-4 rtl:left-auto rtl:right-4 z-10"${l}><span class="flex items-center gap-1 bg-white/90 text-yellow-600 rounded-full px-4 py-2 text-sm font-semibold shadow"${l}>`),a(_(A,{name:"material-symbols:star",class:"w-4 h-4 text-yellow-400"},null,s,l)),a(` ${h(t.$t("packages.details.hotel_grade",{grade:u.package_.included_options.hotelGrade}))}</span></div>`)):a("\x3c!----\x3e"),a(`<div class="absolute top-4 right-4 rtl:right-auto rtl:left-4"${l}><div class="bg-surface/95 backdrop-blur-sm px-4 py-2 rounded-full shadow-[0_2px_10px_-3px_rgba(0,0,0,0.1)] transform transition-transform duration-300 hover:scale-105 flex flex-col items-center"${l}><span class="text-primary font-medium tracking-wide whitespace-nowrap flex items-center gap-1"${l}>`),a(_($,{size:16,class:"text-primary"},null,s,l)),a(` ${h(u.package_.price.toLocaleString())} <span class="text-sm text-gray-700 font-normal"${l}>${h(t.$t("packages.details.per_person"))}</span>`),a(_(I,{triggers:["hover","focus"],placement:"top"},{popper:i(((e,a,s,l)=>{if(!a)return[n("div",{class:"bg-gray-900 text-white text-xs px-3 py-2 rounded-lg shadow-lg max-w-xs text-center"},c(t.$t("packages.details.price_info_tooltip")),1)];a(`<div class="bg-gray-900 text-white text-xs px-3 py-2 rounded-lg shadow-lg max-w-xs text-center"${l}>${h(t.$t("packages.details.price_info_tooltip"))}</div>`)})),default:i(((e,a,t,s)=>{if(!a)return[n(A,{name:"material-symbols:info-outline",class:"w-4 h-4 text-gray-400 cursor-pointer"})];a(_(A,{name:"material-symbols:info-outline",class:"w-4 h-4 text-gray-400 cursor-pointer"},null,t,s))})),_:1},s,l)),a(`</span></div></div><div class="absolute bottom-4 left-4 right-4 flex flex-wrap gap-2"${l}><div class="bg-primary/90 backdrop-blur-sm px-3 py-1.5 rounded-full text-sm font-medium text-white transform transition-transform duration-300 hover:scale-105 flex items-center gap-1.5"${l}>`),a(_(A,{name:"material-symbols:schedule-outline",class:"h-4 w-4"},null,s,l)),a(` ${h(t.$t("packages.details.duration",{count:u.package_.duration_days}))}</div>`),u.package_.travel_period?(a(`<div class="bg-surface/20 backdrop-blur-sm px-3 py-1.5 rounded-full text-sm text-white flex items-center gap-1.5 transform transition-transform duration-300 hover:scale-105"${l}>`),a(_(A,{name:"material-symbols:calendar-month-outline",class:"h-4 w-4"},null,s,l)),a(`<p class="text-gray-100"${l}>${h(u.package_.travel_period)}</p></div>`)):a("\x3c!----\x3e"),a(`</div></div><div class="flex flex-1 flex-col p-6"${l}><h3 class="text-xl font-semibold mb-2 text-stone-750 transition-colors duration-300 group-hover:text-stone-950"${l}>${h("ar-SA"===r(x)?u.package_.title_ar:u.package_.title_en)}</h3><p class="mb-4 text-sm text-gray-800 line-clamp-2"${l}>${h("ar-SA"===r(x)?u.package_.description_ar:u.package_.description_en)}</p><div class="mt-auto flex justify-between items-center"${l}>`),u.package_.included_options?(a(`<div class="flex items-center gap-3"${l}>`),u.package_.included_options.flight?a(_(z,{size:24,class:"text-primary"},null,s,l)):a("\x3c!----\x3e"),u.package_.included_options.hotel?a(_(A,{name:"material-symbols:hotel-outline",class:"h-6 w-6 text-primary"},null,s,l)):a("\x3c!----\x3e"),u.package_.included_options.transportation?a(_(A,{name:"material-symbols:directions-car-outline",class:"h-6 w-6 text-primary"},null,s,l)):a("\x3c!----\x3e"),a("</div>")):a("\x3c!----\x3e"),a(`<span class="text-primary font-medium text-sm group-hover:translate-x-1 rtl:group-hover:-translate-x-1 transition-transform"${l}>${h("ar-SA"===r(x)?t.$t("common.view_details")+" ←":t.$t("common.view_details")+" →")}</span></div></div>`)})),_:1},y))}}});function k(){const e=u([]),a=u(!0),t=u(null);a.value=!1,e.value=[];const o=()=>{const a=e.value||[];return console.log("getPackages called, returning:",a.length,"packages"),a};return{packages:e,getPackages:o,getPackageById:e=>o().find((a=>a.id===e)),pending:a,error:t,refresh:()=>(async()=>{if(!(a.value&&e.value.length>0)){a.value=!0,t.value=null;try{console.log("usePackages: Fetching packages from API...");const a=await fetch("/api/packages");if(!a.ok)throw console.error("usePackages: Failed to fetch packages:",a.status,a.statusText),new Error("Failed to fetch packages");const t=await a.json();console.log("usePackages: API response:",t),console.log("usePackages: Packages data:",t.data),e.value=t.data}catch(e){t.value=e,console.error("usePackages: Error fetching packages:",e)}finally{a.value=!1}}})()}}export{j as I,k,z as p};
//# sourceMappingURL=usePackages.mjs.map
