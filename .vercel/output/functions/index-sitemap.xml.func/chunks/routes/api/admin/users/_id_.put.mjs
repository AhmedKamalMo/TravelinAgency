import{d as e,c as t,g as s,r as o}from"../../../../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"vue";import"@iconify/utils";import"node:crypto";import"consola";import"node:url";import"ipx";import"node:fs";import"node:path";const a=e((async e=>{var a,i,r;try{const n=await getServerSession(e);if(!(null==(a=null==n?void 0:n.user)?void 0:a.role)||!["admin","moderator"].includes(n.user.role))throw t({statusCode:403,statusMessage:"غير مصرح بالوصول"});const d=s(e,"id");if(!d)throw t({statusCode:400,statusMessage:"معرف المستخدم مطلوب"});const u=await o(e);if(u.email&&(r=u.email,!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)))throw t({statusCode:400,statusMessage:"البريد الإلكتروني غير صحيح"});if(u.phone&&(i=u.phone,!/^\+966[0-9]{9}$/.test(i)))throw t({statusCode:400,statusMessage:"رقم الهاتف غير صحيح"});if(u.role&&!["admin","moderator","user"].includes(u.role))throw t({statusCode:400,statusMessage:"الدور غير صحيح"});if(u.status&&!["active","inactive","suspended"].includes(u.status))throw t({statusCode:400,statusMessage:"الحالة غير صحيحة"});return{success:!0,data:{id:parseInt(d),email:u.email||"user@example.com",full_name:u.full_name||"مستخدم",phone:u.phone||"+966501234567",role:u.role||"user",status:u.status||"active",email_verified:!0,phone_verified:!1,bio:u.bio||"",date_of_birth:u.date_of_birth||"",gender:u.gender||"male",nationality:u.nationality||"Saudi Arabia",address:u.address||"",city:u.city||"",country:u.country||"Saudi Arabia",postal_code:u.postal_code||"",preferences:{language:"ar",timezone:"Asia/Riyadh",notifications:{email:!0,sms:!0,push:!0},privacy:{profile_visibility:"public",show_email:!1,show_phone:!1},...u.preferences},created_at:"2024-01-01T00:00:00Z",updated_at:(new Date).toISOString(),last_login:"2024-01-15T10:30:00Z",login_count:1},message:"تم تحديث بيانات المستخدم بنجاح"}}catch(e){return console.error("Error updating user:",e),{success:!1,error:e.message||"فشل في تحديث بيانات المستخدم"}}}));export{a as default};
//# sourceMappingURL=_id_.put.mjs.map
