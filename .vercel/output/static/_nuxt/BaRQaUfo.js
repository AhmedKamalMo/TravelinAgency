import S from"./CjUD-tqt.js";import{_ as j}from"./TxntYzv-.js";import{u as M}from"./DOtPdQ7M.js";import{h as g,B as P,l as D,c as n,o as i,a as e,b as a,d as E,e as b,f as G,u as r,t as u,g as L,F as _,r as w}from"./DHjegAIK.js";const T={class:"space-y-6"},V={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},A={class:"mt-4 sm:mt-0"},J={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},O={class:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-gray-400 transition-colors"},R={key:1,class:"space-y-4"},U={class:"text-gray-600"},W={class:"w-full bg-gray-200 rounded-full h-2"},q={key:0,class:"mt-6"},H={class:"text-md font-medium text-gray-900 mb-3"},K={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4"},Q=["src","alt"],X=["onClick"],Y={class:"text-xs text-gray-600 mt-1 truncate"},Z={class:"mt-4 flex space-x-3 space-x-reverse"},ee={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},te={class:"flex items-center justify-between mb-4"},se={class:"flex space-x-2 space-x-reverse"},oe={key:0,class:"flex justify-center items-center py-12"},le={key:1,class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4"},ae=["src","alt"],re={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 rounded-lg flex items-center justify-center"},ne={class:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 text-white text-center"},ie={class:"text-xs font-medium truncate px-2"},de={class:"text-xs opacity-75"},ce={class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200"},me={class:"flex space-x-1 space-x-reverse"},ue=["onClick"],ge=["onClick"],pe={key:2,class:"text-center py-12"},xe={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},ye={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},he={class:"flex items-center"},be={class:"p-3 bg-blue-100 rounded-lg"},fe={class:"mr-4"},ve={class:"text-2xl font-bold text-gray-900"},_e={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},we={class:"flex items-center"},ke={class:"p-3 bg-green-100 rounded-lg"},Ce={class:"mr-4"},Fe={class:"text-2xl font-bold text-gray-900"},Be={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Ie={class:"flex items-center"},$e={class:"p-3 bg-purple-100 rounded-lg"},De={__name:"images",setup(ze){const d=g([]),c=g([]),p=g(!1),h=g(!1),x=g(0),k=P(()=>c.value.reduce((s,t)=>s+t.size,0)),C=s=>{Array.from(s.target.files).forEach(o=>{if(o.type.startsWith("image/")){const m=new FileReader;m.onload=l=>{d.value.push({file:o,name:o.name,size:o.size,preview:l.target.result})},m.readAsDataURL(o)}})},F=async()=>{if(d.value.length!==0)try{p.value=!0,x.value=0;const s=new FormData;d.value.forEach((o,m)=>{s.append(`file_${m}`,o.file)});const t=await $fetch("/api/images/upload",{method:"POST",body:s});t.success&&(c.value.unshift(...t.files),d.value=[],x.value=100,console.log("تم رفع الصور بنجاح"))}catch(s){console.error("خطأ في رفع الصور:",s)}finally{p.value=!1,x.value=0}},B=async s=>{if(confirm("هل أنت متأكد من حذف هذه الصورة؟"))try{(await $fetch("/api/images/delete",{method:"POST",body:{filename:s.filename}})).success&&(c.value=c.value.filter(o=>o.filename!==s.filename),console.log("تم حذف الصورة"))}catch(t){console.error("خطأ في حذف الصورة:",t)}},I=s=>{navigator.clipboard.writeText(s).then(()=>{console.log("تم نسخ مسار الصورة")})},$=()=>{d.value=[];const s=document.querySelector('input[type="file"]');s&&(s.value="")},z=s=>{d.value.splice(s,1)},N=()=>{f()},f=async()=>{try{h.value=!0;const s=await $fetch("/api/images/list");s.success?c.value=s.images:c.value=[]}catch(s){console.error("خطأ في تحميل الصور:",s),c.value=[]}finally{h.value=!1}},v=s=>{if(s===0)return"0 Bytes";const t=1024,o=["Bytes","KB","MB","GB"],m=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,m)).toFixed(2))+" "+o[m]};return D(()=>{f()}),M({title:"إدارة صور الباقات - Wonder Land Admin",meta:[{name:"description",content:"رفع وإدارة صور الباقات السياحية"},{name:"robots",content:"noindex, nofollow"}]}),(s,t)=>{const o=S,m=j;return i(),n("div",T,[t[16]||(t[16]=e("div",{class:"h-16"},null,-1)),e("div",V,[t[2]||(t[2]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"إدارة صور الباقات"),e("p",{class:"mt-1 text-sm text-gray-600"},"رفع وإدارة صور الباقات السياحية")],-1)),e("div",A,[a(m,{to:"/admin/packages",class:"inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors"},{default:E(()=>[a(o,{name:"material-symbols:arrow-back",class:"h-5 w-5 ml-2"}),t[1]||(t[1]=b(" العودة للباقات "))]),_:1})])]),e("div",J,[t[7]||(t[7]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"رفع صور جديدة",-1)),e("div",O,[e("input",{ref:"fileInput",type:"file",multiple:"",accept:"image/*",onChange:C,class:"hidden"},null,544),r(p)?(i(),n("div",R,[a(o,{name:"material-symbols:progress-activity",class:"animate-spin h-8 w-8 text-blue-600 mx-auto"}),e("p",U,"جاري رفع "+u(r(d).length)+" صورة...",1),e("div",W,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:L({width:r(x)+"%"})},null,4)])])):(i(),n("div",{key:0,onClick:t[0]||(t[0]=l=>s.$refs.fileInput.click()),class:"cursor-pointer"},[a(o,{name:"material-symbols:cloud-upload",class:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t[3]||(t[3]=e("p",{class:"text-lg font-medium text-gray-900 mb-2"},"انقر لرفع الصور",-1)),t[4]||(t[4]=e("p",{class:"text-sm text-gray-500"},"أو اسحب وأفلت الملفات هنا",-1)),t[5]||(t[5]=e("p",{class:"text-xs text-gray-400 mt-2"},"PNG, JPG, JPEG (حد أقصى 10MB لكل صورة)",-1))]))]),r(d).length>0&&!r(p)?(i(),n("div",q,[e("h3",H,"الملفات المحددة ("+u(r(d).length)+")",1),e("div",K,[(i(!0),n(_,null,w(r(d),(l,y)=>(i(),n("div",{key:y,class:"relative"},[e("img",{src:l.preview,alt:l.name,class:"w-full h-24 object-cover rounded-lg border border-gray-200"},null,8,Q),e("button",{onClick:Ne=>z(y),class:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600"}," × ",8,X),e("p",Y,u(l.name),1)]))),128))]),e("div",Z,[e("button",{onClick:F,class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},[a(o,{name:"material-symbols:upload",class:"h-5 w-5 ml-2"}),t[6]||(t[6]=b(" رفع الصور "))]),e("button",{onClick:$,class:"inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors"}," إلغاء ")])])):G("",!0)]),e("div",ee,[e("div",te,[t[9]||(t[9]=e("h2",{class:"text-lg font-semibold text-gray-900"},"الصور المرفوعة",-1)),e("div",se,[e("button",{onClick:N,class:"inline-flex items-center px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors"},[a(o,{name:"material-symbols:refresh",class:"h-4 w-4 ml-1"}),t[8]||(t[8]=b(" تحديث "))])])]),r(h)?(i(),n("div",oe,[a(o,{name:"material-symbols:progress-activity",class:"animate-spin h-8 w-8 text-blue-600"}),t[10]||(t[10]=e("span",{class:"mr-3 text-gray-600"},"جارٍ تحميل الصور...",-1))])):r(c).length>0?(i(),n("div",le,[(i(!0),n(_,null,w(r(c),l=>(i(),n("div",{key:l.filename,class:"relative group"},[e("img",{src:l.path,alt:l.originalName,class:"w-full h-32 object-cover rounded-lg border border-gray-200 hover:border-blue-300 transition-colors"},null,8,ae),e("div",re,[e("div",ne,[e("p",ie,u(l.originalName),1),e("p",de,u(v(l.size)),1)])]),e("div",ce,[e("div",me,[e("button",{onClick:y=>I(l.path),class:"p-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",title:"نسخ المسار"},[a(o,{name:"material-symbols:content-copy",class:"h-3 w-3"})],8,ue),e("button",{onClick:y=>B(l),class:"p-1 bg-red-500 text-white rounded hover:bg-red-600 transition-colors",title:"حذف"},[a(o,{name:"material-symbols:delete",class:"h-3 w-3"})],8,ge)])])]))),128))])):(i(),n("div",pe,[a(o,{name:"material-symbols:image-outline",class:"h-16 w-16 text-gray-300 mx-auto mb-4"}),t[11]||(t[11]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"لا توجد صور",-1)),t[12]||(t[12]=e("p",{class:"text-gray-500"},"لم يتم رفع أي صور بعد",-1))]))]),e("div",xe,[e("div",ye,[e("div",he,[e("div",be,[a(o,{name:"material-symbols:image",class:"h-6 w-6 text-blue-600"})]),e("div",fe,[t[13]||(t[13]=e("p",{class:"text-sm font-medium text-gray-600"},"إجمالي الصور",-1)),e("p",ve,u(r(c).length),1)])])]),e("div",_e,[e("div",we,[e("div",ke,[a(o,{name:"material-symbols:storage",class:"h-6 w-6 text-green-600"})]),e("div",Ce,[t[14]||(t[14]=e("p",{class:"text-sm font-medium text-gray-600"},"إجمالي الحجم",-1)),e("p",Fe,u(v(r(k))),1)])])]),e("div",Be,[e("div",Ie,[e("div",$e,[a(o,{name:"material-symbols:folder",class:"h-6 w-6 text-purple-600"})]),t[15]||(t[15]=e("div",{class:"mr-4"},[e("p",{class:"text-sm font-medium text-gray-600"},"المجلدات"),e("p",{class:"text-2xl font-bold text-gray-900"},"3")],-1))])])])])}}};export{De as default};
