import H from"./BOaYbNxV.js";import{_ as I}from"./BzZnr7Wd.js";import{_ as z}from"./CQf3C-kA.js";import{g as x,B as C,R,m as Q,c as g,o as v,b as s,a as l,e as W,k as y,i as L,v as Z,h as n,Z as k,T,F as q,r as G,t as d,H as $,l as J}from"./DbWDakc_.js";import{u as K}from"./NS4odysN.js";import{u as O}from"./B8JiDYaF.js";const X={class:"space-y-6"},Y={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},ee={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},te={class:"relative"},se={class:"bg-white rounded-lg shadow-sm border border-gray-200"},ae={key:0,class:"flex justify-center items-center py-12"},oe={key:1,class:"overflow-x-auto"},re={class:"min-w-full divide-y divide-gray-200"},ne={class:"bg-white divide-y divide-gray-200"},le={class:"px-6 py-4 whitespace-nowrap"},ie={class:"flex items-center"},ce=["src","alt"],de={class:"text-sm font-medium text-gray-900"},ue={class:"text-sm text-gray-500"},me={class:"px-6 py-4 whitespace-nowrap"},pe={class:"px-6 py-4 whitespace-nowrap"},ge={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ve={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},xe={class:"flex items-center space-x-2 space-x-reverse"},ye=["onClick","title"],be=["onClick"],fe={key:2,class:"text-center py-12"},we={key:0,class:"flex items-center justify-between"},he={class:"text-sm text-gray-700"},_e={class:"flex space-x-1 space-x-reverse"},Ce=["disabled"],Le={class:"px-3 py-2 text-sm bg-blue-600 text-white border border-blue-600 rounded-md"},ke=["disabled"],b=10,Ne={__name:"index",setup($e){const c=x([]),f=x(!0),r=x(""),u=x(""),m=x(""),i=x(1),D=C(()=>{let t=c.value;return r.value&&(t=t.filter(e=>e.name_ar&&e.name_ar.toLowerCase().includes(r.value.toLowerCase())||e.name_en&&e.name_en.toLowerCase().includes(r.value.toLowerCase())||e.name&&e.name.toLowerCase().includes(r.value.toLowerCase())||e.description_ar&&e.description_ar.toLowerCase().includes(r.value.toLowerCase())||e.description_en&&e.description_en.toLowerCase().includes(r.value.toLowerCase())||e.description&&e.description.toLowerCase().includes(r.value.toLowerCase()))),u.value&&(t=t.filter(e=>e.category===u.value)),m.value&&(t=t.filter(e=>{const o=e.active===1||e.active===!0;return m.value==="active"?o:!o})),t.slice((i.value-1)*b,i.value*b)}),w=C(()=>{let t=c.value;return r.value&&(t=t.filter(e=>e.name_ar&&e.name_ar.toLowerCase().includes(r.value.toLowerCase())||e.name_en&&e.name_en.toLowerCase().includes(r.value.toLowerCase())||e.name&&e.name.toLowerCase().includes(r.value.toLowerCase())||e.description_ar&&e.description_ar.toLowerCase().includes(r.value.toLowerCase())||e.description_en&&e.description_en.toLowerCase().includes(r.value.toLowerCase())||e.description&&e.description.toLowerCase().includes(r.value.toLowerCase()))),u.value&&(t=t.filter(e=>e.category===u.value)),m.value&&(t=t.filter(e=>{const o=e.active===1||e.active===!0;return m.value==="active"?o:!o})),t.length}),h=C(()=>Math.ceil(w.value/b)),S=async()=>{try{f.value=!0;const t=await $fetch("/api/destinations");t.success&&t.data?c.value=t.data:c.value=[]}catch(t){console.error("خطأ في تحميل الوجهات:",t),c.value=[]}finally{f.value=!1}},V=async t=>{try{const e=t.active?"inactive":"active",o=t.active?0:1;await $fetch(`/api/destinations/${t.id}`,{method:"PUT",body:{...t,active:o,status:e}});const p=c.value.findIndex(_=>_.id===t.id);p!==-1&&(c.value[p].active=o,c.value[p].status=e),console.log(`تم ${e==="active"?"تفعيل":"إلغاء تفعيل"} الوجهة بنجاح`)}catch(e){console.error("خطأ في تغيير حالة الوجهة:",e)}},E=async t=>{if(confirm("هل أنت متأكد من حذف هذه الوجهة؟ لا يمكن التراجع عن هذا الإجراء."))try{await $fetch(`/api/destinations/${t.id}`,{method:"DELETE"}),c.value=c.value.filter(e=>e.id!==t.id),console.log("تم حذف الوجهة بنجاح")}catch(e){console.error("خطأ في حذف الوجهة:",e)}},M=()=>{try{const{exportDestinationsToExcel:t}=K();t(c.value)?console.log("تم تصدير الوجهات بنجاح"):console.error("فشل في تصدير الوجهات")}catch(t){console.error("خطأ في تصدير الوجهات:",t)}},N=t=>new Date(t).toLocaleDateString("ar-SA"),A=(t,e)=>t?t.length>e?t.substring(0,e)+"...":t:"",P=t=>({saudi:"سعودي",international:"عالمي"})[t]||t,j=t=>({saudi:"bg-green-100 text-green-800",international:"bg-blue-100 text-blue-800"})[t]||"bg-gray-100 text-gray-800",B=t=>({active:"نشط",inactive:"غير نشط"})[t]||t,F=t=>({active:"bg-green-100 text-green-800",inactive:"bg-red-100 text-red-800"})[t]||"bg-gray-100 text-gray-800";return R([r,u,m],()=>{i.value=1}),Q(()=>{S()}),O({title:"إدارة الوجهات - Wonder Land Admin",meta:[{name:"description",content:"إدارة وتحرير الوجهات السياحية"},{name:"robots",content:"noindex, nofollow"}]}),(t,e)=>{const o=H,p=I,_=z;return v(),g("div",X,[e[16]||(e[16]=s("div",{class:"h-16"},null,-1)),l(_,{title:"إدارة الوجهات السياحية",description:"إدارة وتحرير الوجهات السياحية المتاحة"},{actions:y(()=>[s("button",{onClick:M,class:"inline-flex items-center px-3 sm:px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm"},[l(o,{name:"material-symbols:download",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),e[5]||(e[5]=s("span",{class:"hidden sm:inline"},"تصدير البيانات",-1)),e[6]||(e[6]=s("span",{class:"sm:hidden"},"تصدير",-1))]),l(p,{to:"/admin/destinations/create",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm"},{default:y(()=>[l(o,{name:"material-symbols:add",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),e[7]||(e[7]=s("span",{class:"hidden sm:inline"},"إضافة وجهة جديدة",-1)),e[8]||(e[8]=s("span",{class:"sm:hidden"},"إضافة",-1))]),_:1})]),_:1}),s("div",Y,[s("div",ee,[s("div",te,[l(o,{name:"material-symbols:search",class:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),L(s("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>k(r)?r.value=a:null),type:"text",placeholder:"البحث في الوجهات...",class:"w-full pr-10 pl-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[Z,n(r)]])]),L(s("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>k(u)?u.value=a:null),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},e[9]||(e[9]=[s("option",{value:""},"جميع الأنواع",-1),s("option",{value:"saudi"},"سعودي",-1),s("option",{value:"international"},"عالمي",-1)]),512),[[T,n(u)]]),L(s("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>k(m)?m.value=a:null),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},e[10]||(e[10]=[s("option",{value:""},"جميع الحالات",-1),s("option",{value:"active"},"نشط",-1),s("option",{value:"inactive"},"غير نشط",-1)]),512),[[T,n(m)]])])]),s("div",se,[n(f)?(v(),g("div",ae,[l(o,{name:"material-symbols:progress-activity",class:"animate-spin h-8 w-8 text-blue-600"}),e[11]||(e[11]=s("span",{class:"mr-3 text-gray-600"},"جارٍ تحميل الوجهات...",-1))])):n(D).length>0?(v(),g("div",oe,[s("table",re,[e[12]||(e[12]=s("thead",{class:"bg-gray-50"},[s("tr",null,[s("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," الوجهة "),s("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," النوع "),s("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," الحالة "),s("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," تاريخ الإنشاء "),s("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," الإجراءات ")])],-1)),s("tbody",ne,[(v(!0),g(q,null,G(n(D),a=>(v(),g("tr",{key:a.id,class:"hover:bg-gray-50"},[s("td",le,[s("div",ie,[s("img",{src:a.image||a.image_url||"/images/placeholder.jpg",alt:a.name_ar||a.name_en,class:"h-12 w-12 rounded-lg object-cover ml-4",loading:"lazy"},null,8,ce),s("div",null,[s("div",de,d(a.name_ar||a.name_en||a.name),1),s("div",ue,d(A(a.description_ar||a.description_en||a.description,50)),1)])])]),s("td",me,[s("span",{class:$([j(a.category),"px-2 py-1 text-xs font-medium rounded-full"])},d(P(a.category)),3)]),s("td",pe,[s("span",{class:$([F(a.active?"active":"inactive"),"px-2 py-1 text-xs font-medium rounded-full"])},d(B(a.active?"active":"inactive")),3)]),s("td",ge,d(N(a.created_at)),1),s("td",ve,[s("div",xe,[l(p,{to:`/admin/destinations/${a.id}`,class:"text-blue-600 hover:text-blue-900 p-1 rounded",title:"عرض"},{default:y(()=>[l(o,{name:"material-symbols:visibility",class:"h-4 w-4"})]),_:2},1032,["to"]),l(p,{to:`/admin/destinations/${a.id}/edit`,class:"text-green-600 hover:text-green-900 p-1 rounded",title:"تحرير"},{default:y(()=>[l(o,{name:"material-symbols:edit",class:"h-4 w-4"})]),_:2},1032,["to"]),s("button",{onClick:U=>V(a),class:$([a.active?"text-orange-600 hover:text-orange-900":"text-green-600 hover:text-green-900","p-1 rounded"]),title:a.active?"إلغاء التفعيل":"تفعيل"},[l(o,{name:a.active?"material-symbols:pause":"material-symbols:play-arrow",class:"h-4 w-4"},null,8,["name"])],10,ye),s("button",{onClick:U=>E(a),class:"text-red-600 hover:text-red-900 p-1 rounded",title:"حذف"},[l(o,{name:"material-symbols:delete",class:"h-4 w-4"})],8,be)])])]))),128))])])])):(v(),g("div",fe,[l(o,{name:"material-symbols:place",class:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e[14]||(e[14]=s("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"لا توجد وجهات",-1)),e[15]||(e[15]=s("p",{class:"text-gray-500 mb-6"},"لم يتم العثور على أي وجهات سياحية",-1)),l(p,{to:"/admin/destinations/create",class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},{default:y(()=>[l(o,{name:"material-symbols:add",class:"h-5 w-5 ml-2"}),e[13]||(e[13]=J(" إضافة وجهة جديدة "))]),_:1})]))]),n(h)>1?(v(),g("div",we,[s("div",he," عرض "+d((n(i)-1)*b+1)+" إلى "+d(Math.min(n(i)*b,n(w)))+" من أصل "+d(n(w))+" وجهة ",1),s("div",_e,[s("button",{onClick:e[3]||(e[3]=a=>i.value=Math.max(1,n(i)-1)),disabled:n(i)===1,class:"px-3 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," السابق ",8,Ce),s("span",Le,d(n(i)),1),s("button",{onClick:e[4]||(e[4]=a=>i.value=Math.min(n(h),n(i)+1)),disabled:n(i)===n(h),class:"px-3 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," التالي ",8,ke)])])):W("",!0)])}}};export{Ne as default};
