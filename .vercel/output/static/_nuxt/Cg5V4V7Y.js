import M from"./CjUD-tqt.js";import{_ as P}from"./TxntYzv-.js";import{h as k,c,o as m,a as e,b as i,d as w,e as b,j as a,v as u,u as s,F as f,r as x,t as _,R as V,T,k as F,f as j,i as G,n as L}from"./DHjegAIK.js";import{_ as J}from"./B_k3Whhb.js";import{u as v}from"./CdN0Yfe3.js";import{u as W}from"./DOtPdQ7M.js";import"./x_rD_Ya3.js";const A={class:"space-y-6"},H={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},O={class:"mt-4 sm:mt-0"},R={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},z={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},K={class:"lg:col-span-2 space-y-6"},Q={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},X={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Y={class:"space-y-2"},Z=["onUpdate:modelValue","placeholder"],ee=["onClick"],te={class:"space-y-2"},le={class:"text-sm font-medium text-gray-600 w-16"},se=["onUpdate:modelValue","placeholder"],re=["onClick"],oe={class:"space-y-6"},ae={class:"bg-gray-50 rounded-lg p-4"},ne={class:"space-y-4"},de={class:"bg-gray-50 rounded-lg p-4"},ie={class:"space-y-4"},ue={class:"flex items-center"},pe={class:"bg-gray-50 rounded-lg p-4"},me={class:"space-y-4"},ce={class:"space-y-2"},be=["onUpdate:modelValue","placeholder"],ge=["onClick"],ye={class:"space-y-2"},fe=["onUpdate:modelValue","placeholder"],xe=["onClick"],ve={class:"flex justify-end space-x-3 space-x-reverse pt-6 border-t border-gray-200"},ke=["disabled"],$e={__name:"create",setup(we){const y=k(!1),l=k({title_ar:"",title_en:"",description_ar:"",description_en:"",price:0,duration_days:1,travel_period:"",max_persons:10,category:"domestic",status:"active",featured:!1,image_url:"",features:[""],itinerary:[""],included:[""],excluded:[""]}),U=n=>{const{showSuccess:t}=v();t("تم رفع الصورة","تم رفع الصورة بنجاح!")},h=n=>{const{showError:t}=v();t("خطأ في رفع الصورة",n.message||"حدث خطأ في رفع الصورة")},C=async()=>{const{showSuccess:n,showError:t,showWarning:d}=v();try{if(y.value=!0,!l.value.title_ar||!l.value.title_en||!l.value.description_ar||!l.value.description_en){d("حقول مطلوبة","يرجى ملء جميع الحقول المطلوبة");return}const g={...l.value,features:l.value.features.filter(o=>o.trim()),itinerary:l.value.itinerary.filter(o=>o.trim()),included:l.value.included.filter(o=>o.trim()),excluded:l.value.excluded.filter(o=>o.trim())},r=await $fetch("/api/packages",{method:"POST",body:g});console.log("✅ Create package result:",r),r.success&&r.package?(n("تم الإنشاء بنجاح","تم إنشاء الباقة بنجاح!"),console.log("🚀 Navigating to:",`/admin/packages/${r.package.id}`),await L(`/admin/packages/${r.package.id}`)):t("فشل في الإنشاء","فشل في إنشاء الباقة. يرجى المحاولة مرة أخرى.")}catch(g){console.error("خطأ في إنشاء الباقة:",g),t("خطأ في الإنشاء","حدث خطأ في إنشاء الباقة. يرجى المحاولة مرة أخرى.")}finally{y.value=!1}},E=()=>{l.value.features.push("")},I=n=>{l.value.features.length>1&&l.value.features.splice(n,1)},$=()=>{l.value.itinerary.push("")},q=n=>{l.value.itinerary.length>1&&l.value.itinerary.splice(n,1)},N=()=>{l.value.included.push("")},S=n=>{l.value.included.length>1&&l.value.included.splice(n,1)},B=()=>{l.value.excluded.push("")},D=n=>{l.value.excluded.length>1&&l.value.excluded.splice(n,1)};return W({title:"إضافة باقة جديدة - Wonder Land Admin",meta:[{name:"description",content:"إنشاء حزمة سياحية جديدة"},{name:"robots",content:"noindex, nofollow"}]}),(n,t)=>{const d=M,g=P;return m(),c("div",A,[t[41]||(t[41]=e("div",{class:"h-16"},null,-1)),e("div",H,[t[13]||(t[13]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"إضافة باقة سياحية جديدة"),e("p",{class:"mt-1 text-sm text-gray-600"},"إنشاء حزمة سياحية جديدة")],-1)),e("div",O,[i(g,{to:"/admin/packages",class:"inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors"},{default:w(()=>[i(d,{name:"material-symbols:arrow-back",class:"h-5 w-5 ml-2"}),t[12]||(t[12]=b(" العودة "))]),_:1})])]),e("form",{onSubmit:G(C,["prevent"]),class:"space-y-6"},[e("div",R,[e("div",z,[e("div",K,[e("div",Q,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"العنوان (عربي) *",-1)),a(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>s(l).title_ar=r),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل العنوان بالعربية"},null,512),[[u,s(l).title_ar]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"العنوان (إنجليزي) *",-1)),a(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>s(l).title_en=r),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter title in English"},null,512),[[u,s(l).title_en]])])]),e("div",X,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"الوصف (عربي) *",-1)),a(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=r=>s(l).description_ar=r),rows:"4",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل الوصف بالعربية"},null,512),[[u,s(l).description_ar]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"الوصف (إنجليزي) *",-1)),a(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=r=>s(l).description_en=r),rows:"4",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter description in English"},null,512),[[u,s(l).description_en]])])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"صورة الباقة",-1)),i(J,{modelValue:s(l).image_url,"onUpdate:modelValue":t[4]||(t[4]=r=>s(l).image_url=r),alt:"صورة الباقة","upload-type":"package",onUploadComplete:U,onUploadError:h},null,8,["modelValue"]),t[19]||(t[19]=e("p",{class:"mt-2 text-xs text-gray-500"}," يمكنك رفع صورة JPG, PNG, JPEG بحجم أقصى 5MB ",-1))]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"المميزات",-1)),e("div",Y,[(m(!0),c(f,null,x(s(l).features,(r,o)=>(m(),c("div",{key:o,class:"flex items-center space-x-2 space-x-reverse"},[a(e("input",{"onUpdate:modelValue":p=>s(l).features[o]=p,type:"text",class:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`الميزة ${o+1}`},null,8,Z),[[u,s(l).features[o]]]),e("button",{type:"button",onClick:p=>I(o),class:"p-2 text-red-600 hover:bg-red-50 rounded-lg"},[i(d,{name:"material-symbols:delete",class:"h-5 w-5"})],8,ee)]))),128)),e("button",{type:"button",onClick:E,class:"inline-flex items-center px-3 py-2 text-sm text-blue-600 hover:bg-blue-50 rounded-lg"},[i(d,{name:"material-symbols:add",class:"h-4 w-4 ml-1"}),t[20]||(t[20]=b(" إضافة ميزة "))])])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"البرنامج اليومي",-1)),e("div",te,[(m(!0),c(f,null,x(s(l).itinerary,(r,o)=>(m(),c("div",{key:o,class:"flex items-center space-x-2 space-x-reverse"},[e("span",le,"اليوم "+_(o+1)+":",1),a(e("input",{"onUpdate:modelValue":p=>s(l).itinerary[o]=p,type:"text",class:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`نشاط اليوم ${o+1}`},null,8,se),[[u,s(l).itinerary[o]]]),e("button",{type:"button",onClick:p=>q(o),class:"p-2 text-red-600 hover:bg-red-50 rounded-lg"},[i(d,{name:"material-symbols:delete",class:"h-5 w-5"})],8,re)]))),128)),e("button",{type:"button",onClick:$,class:"inline-flex items-center px-3 py-2 text-sm text-blue-600 hover:bg-blue-50 rounded-lg"},[i(d,{name:"material-symbols:add",class:"h-4 w-4 ml-1"}),t[22]||(t[22]=b(" إضافة يوم "))])])])]),e("div",oe,[e("div",ae,[t[28]||(t[28]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"التفاصيل الأساسية",-1)),e("div",ne,[e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"السعر (ريال سعودي) *",-1)),a(e("input",{"onUpdate:modelValue":t[5]||(t[5]=r=>s(l).price=r),type:"number",min:"0",step:"0.01",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[u,s(l).price,void 0,{number:!0}]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"المدة (أيام) *",-1)),a(e("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>s(l).duration_days=r),type:"number",min:"1",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[u,s(l).duration_days,void 0,{number:!0}]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"الوجهة",-1)),a(e("input",{"onUpdate:modelValue":t[7]||(t[7]=r=>s(l).travel_period=r),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"مثال: دبي، تركيا، ماليزيا"},null,512),[[u,s(l).travel_period]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"الحد الأقصى للأشخاص",-1)),a(e("input",{"onUpdate:modelValue":t[8]||(t[8]=r=>s(l).max_persons=r),type:"number",min:"1",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[u,s(l).max_persons,void 0,{number:!0}]])])])]),e("div",de,[t[34]||(t[34]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"التصنيف",-1)),e("div",ie,[e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"الفئة *",-1)),a(e("select",{"onUpdate:modelValue":t[9]||(t[9]=r=>s(l).category=r),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},t[29]||(t[29]=[e("option",{value:"domestic"},"محلي",-1),e("option",{value:"international"},"دولي",-1),e("option",{value:"religious"},"ديني",-1),e("option",{value:"adventure"},"مغامرة",-1)]),512),[[V,s(l).category]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"الحالة *",-1)),a(e("select",{"onUpdate:modelValue":t[10]||(t[10]=r=>s(l).status=r),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},t[31]||(t[31]=[e("option",{value:"active"},"نشط",-1),e("option",{value:"inactive"},"غير نشط",-1),e("option",{value:"draft"},"مسودة",-1)]),512),[[V,s(l).status]])]),e("div",ue,[a(e("input",{"onUpdate:modelValue":t[11]||(t[11]=r=>s(l).featured=r),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[T,s(l).featured]]),t[33]||(t[33]=e("label",{class:"mr-2 text-sm text-gray-700"},"حزمة مميزة",-1))])])]),e("div",pe,[t[39]||(t[39]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"التفاصيل الإضافية",-1)),e("div",me,[e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"ما يشمل",-1)),e("div",ce,[(m(!0),c(f,null,x(s(l).included,(r,o)=>(m(),c("div",{key:o,class:"flex items-center space-x-2 space-x-reverse"},[a(e("input",{"onUpdate:modelValue":p=>s(l).included[o]=p,type:"text",class:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:`البند ${o+1}`},null,8,be),[[u,s(l).included[o]]]),e("button",{type:"button",onClick:p=>S(o),class:"p-1 text-red-600 hover:bg-red-50 rounded"},[i(d,{name:"material-symbols:delete",class:"h-4 w-4"})],8,ge)]))),128)),e("button",{type:"button",onClick:N,class:"inline-flex items-center px-2 py-1 text-xs text-blue-600 hover:bg-blue-50 rounded"},[i(d,{name:"material-symbols:add",class:"h-3 w-3 ml-1"}),t[35]||(t[35]=b(" إضافة "))])])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"ما لا يشمل",-1)),e("div",ye,[(m(!0),c(f,null,x(s(l).excluded,(r,o)=>(m(),c("div",{key:o,class:"flex items-center space-x-2 space-x-reverse"},[a(e("input",{"onUpdate:modelValue":p=>s(l).excluded[o]=p,type:"text",class:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:`البند ${o+1}`},null,8,fe),[[u,s(l).excluded[o]]]),e("button",{type:"button",onClick:p=>D(o),class:"p-1 text-red-600 hover:bg-red-50 rounded"},[i(d,{name:"material-symbols:delete",class:"h-4 w-4"})],8,xe)]))),128)),e("button",{type:"button",onClick:B,class:"inline-flex items-center px-2 py-1 text-xs text-blue-600 hover:bg-blue-50 rounded"},[i(d,{name:"material-symbols:add",class:"h-3 w-3 ml-1"}),t[37]||(t[37]=b(" إضافة "))])])])])])])]),e("div",ve,[i(g,{to:"/admin/packages",class:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},{default:w(()=>t[40]||(t[40]=[b(" إلغاء ")])),_:1}),e("button",{type:"submit",disabled:s(y),class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50"},[s(y)?(m(),F(d,{key:0,name:"material-symbols:progress-activity",class:"animate-spin h-4 w-4 ml-2 inline"})):j("",!0),b(" "+_(s(y)?"جاري الإنشاء...":"إنشاء الباقة"),1)],8,ke)])])],32)])}}};export{$e as default};
