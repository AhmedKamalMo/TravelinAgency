import{_ as z}from"./B7qqbIXs.js";import $ from"./CjUD-tqt.js";import{_ as C}from"./TxntYzv-.js";import{_ as I}from"./Dbs3IMdZ.js";import{m as b,c as f,o as p,H as _,a,z as E,y as N,M as B,k as m,d as k,b as d,f as u,e as x,t as l,u as h,h as v,l as y,E as j}from"./DHjegAIK.js";const S=["width","height"],V={id:"flight-icon"},A=b({__name:"FlightIcon",props:{size:{default:24},colorClass:{default:""},className:{default:""}},setup(r){return(e,n)=>(p(),f("svg",{width:e.size,height:e.size,viewBox:"0 0 32 32",class:_(e.className),xmlns:"http://www.w3.org/2000/svg"},[a("g",V,[a("path",{class:_([e.colorClass||"stroke-current"]),fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M25.597,8.714l-5.506,1.789l-7.974-5.61c-0.126-0.096-0.29-0.116-0.442-0.066l-1.531,0.497c-0.304,0.1-0.437,0.468-0.265,0.738    l4.03,6.45l-6.115,1.986c-0.637,0.208-1.329,0.086-1.854-0.333l-1.783-1.408c-0.129-0.104-0.306-0.132-0.467-0.079l-0.97,0.314    c-0.333,0.109-0.456,0.506-0.24,0.783l1.948,2.532c1.3,1.67,3.499,2.354,5.505,1.702l19.668-6.391    c0.685-0.223,1.057-0.954,0.834-1.638C30.3,9.563,29.967,9.25,29.547,9.123l-1.632-0.458C27.152,8.451,26.349,8.47,25.597,8.714z"},null,2),a("path",{class:_([e.colorClass||"stroke-current"]),fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M14.398,18.689l-1.339,3.767c-0.139,0.391,0.231,0.771,0.625,0.643l1.258-0.408c0.1-0.033,0.188-0.096,0.249-0.181l5.854-8.01"},null,2),a("line",{class:_([e.colorClass||"stroke-current"]),fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",x1:"1.5",x2:"28.5",y1:"30.5",y2:"30.5"},null,2)])],10,S))}}),L={class:"relative h-[280px] overflow-hidden"},F={key:0,class:"absolute top-4 left-4 rtl:left-auto rtl:right-4 z-10"},M={class:"flex items-center gap-1 bg-white/90 text-yellow-600 rounded-full px-4 py-2 text-sm font-semibold shadow"},T={class:"absolute top-4 right-4 rtl:right-auto rtl:left-4"},G={class:"bg-surface/95 backdrop-blur-sm px-4 py-2 rounded-full shadow-[0_2px_10px_-3px_rgba(0,0,0,0.1)] transform transition-transform duration-300 hover:scale-105 flex flex-col items-center"},D={class:"text-primary font-medium tracking-wide whitespace-nowrap flex items-center gap-1"},H={class:"text-sm text-gray-700 font-normal"},R={class:"bg-gray-900 text-white text-xs px-3 py-2 rounded-lg shadow-lg max-w-xs text-center"},U={class:"absolute bottom-4 left-4 right-4 flex flex-wrap gap-2"},q={class:"bg-primary/90 backdrop-blur-sm px-3 py-1.5 rounded-full text-sm font-medium text-white transform transition-transform duration-300 hover:scale-105 flex items-center gap-1.5"},J={key:0,class:"bg-surface/20 backdrop-blur-sm px-3 py-1.5 rounded-full text-sm text-white flex items-center gap-1.5 transform transition-transform duration-300 hover:scale-105"},K={class:"text-gray-100"},O={class:"flex flex-1 flex-col p-6"},Q={class:"text-xl font-semibold mb-2 text-stone-750 transition-colors duration-300 group-hover:text-stone-950"},W={class:"mb-4 text-sm text-gray-800 line-clamp-2"},X={class:"mt-auto flex justify-between items-center"},Y={key:0,class:"flex items-center gap-3"},Z={class:"text-primary font-medium text-sm group-hover:translate-x-1 rtl:group-hover:-translate-x-1 transition-transform"},re=b({__name:"PackageCard",props:{package_:{}},setup(r){const e=r,{locale:n}=E(),g=N(),w=s=>{console.warn("Image failed to load:",e.package_.image_url);const c=s.target;if(c){const i=e.package_.image_url;if(i&&!i.includes("_ipx"))if(i.includes("/imported/")){const o=`/images/packages/${i.split("/").pop()}`;c.src=o}else c.src=i;else c.src="/images/placeholder.svg"}};return(s,c)=>{const i=z,t=$,o=B("VTooltip"),P=C;return p(),m(P,{to:h(g)(`/packages/${e.package_.id}`),class:"group relative flex h-full flex-col overflow-hidden rounded-xl bg-surface shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)] hover:shadow-[0_8px_25px_-5px_rgba(0,0,0,0.1),0_10px_20px_-5px_rgba(0,0,0,0.04)] transition-all duration-300"},{default:k(()=>[a("div",L,[d(i,{src:e.package_.image_url,class:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105",alt:e.package_.title_en,width:"800",height:"600",loading:"lazy",sizes:"sm:100vw md:50vw lg:33vw",placeholder:"",onError:w},null,8,["src","alt"]),c[0]||(c[0]=a("div",{class:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"},null,-1)),e.package_.included_options&&e.package_.included_options.hotel&&e.package_.included_options.hotelGrade?(p(),f("div",F,[a("span",M,[d(t,{name:"material-symbols:star",class:"w-4 h-4 text-yellow-400"}),x(" "+l(s.$t("packages.details.hotel_grade",{grade:e.package_.included_options.hotelGrade})),1)])])):u("",!0),a("div",T,[a("div",G,[a("span",D,[d(I,{size:16,class:"text-primary"}),x(" "+l(e.package_.price.toLocaleString())+" ",1),a("span",H,l(s.$t("packages.details.per_person")),1),d(o,{triggers:["hover","focus"],placement:"top"},{popper:k(()=>[a("div",R,l(s.$t("packages.details.price_info_tooltip")),1)]),default:k(()=>[d(t,{name:"material-symbols:info-outline",class:"w-4 h-4 text-gray-400 cursor-pointer"})]),_:1})])])]),a("div",U,[a("div",q,[d(t,{name:"material-symbols:schedule-outline",class:"h-4 w-4"}),x(" "+l(s.$t("packages.details.duration",{count:e.package_.duration_days})),1)]),e.package_.travel_period?(p(),f("div",J,[d(t,{name:"material-symbols:calendar-month-outline",class:"h-4 w-4"}),a("p",K,l(e.package_.travel_period),1)])):u("",!0)])]),a("div",O,[a("h3",Q,l(h(n)==="ar-SA"?e.package_.title_ar:e.package_.title_en),1),a("p",W,l(h(n)==="ar-SA"?e.package_.description_ar:e.package_.description_en),1),a("div",X,[e.package_.included_options?(p(),f("div",Y,[e.package_.included_options.flight?(p(),m(A,{key:0,size:24,class:"text-primary"})):u("",!0),e.package_.included_options.hotel?(p(),m(t,{key:1,name:"material-symbols:hotel-outline",class:"h-6 w-6 text-primary"})):u("",!0),e.package_.included_options.transportation?(p(),m(t,{key:2,name:"material-symbols:directions-car-outline",class:"h-6 w-6 text-primary"})):u("",!0)])):u("",!0),a("span",Z,l(h(n)==="ar-SA"?s.$t("common.view_details")+" ←":s.$t("common.view_details")+" →"),1)])])]),_:1},8,["to"])}}});function le(){const r=v([]),e=v(!0),n=v(null),g=async()=>{if(!(e.value&&r.value.length>0)){e.value=!0,n.value=null;try{console.log("usePackages: Fetching packages from API...");const t=await fetch("/api/packages");if(!t.ok)throw console.error("usePackages: Failed to fetch packages:",t.status,t.statusText),new Error("Failed to fetch packages");const o=await t.json();console.log("usePackages: API response:",o),console.log("usePackages: Packages data:",o.data),r.value=o.data}catch(t){n.value=t,console.error("usePackages: Error fetching packages:",t)}finally{e.value=!1}}};y(()=>{g()}),y(()=>{const t=o=>{r.value&&(r.value=o.detail,console.log("🔄 Packages updated from auto-refresh"))};window.addEventListener("packages-refreshed",t),j(()=>{window.removeEventListener("packages-refreshed",t)})});const s=()=>{const t=r.value||[];return console.log("getPackages called, returning:",t.length,"packages"),t};return{packages:r,getPackages:s,getPackageById:t=>s().find(o=>o.id===t),pending:e,error:n,refresh:()=>g()}}export{re as _,A as a,le as u};
