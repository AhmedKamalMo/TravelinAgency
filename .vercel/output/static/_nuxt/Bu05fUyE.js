import{_ as M}from"./B5h2RRRA.js";import I from"./DpQTdEsJ.js";import{_ as L}from"./Bu0W61Is.js";import{h as g,g as P,m as T,B as j,c as u,o as m,a as e,f as w,b as l,w as S,d as B,t as f,i as o,n as z,H as N,F as C,r as O,_ as F,K as V}from"./BPMBOJUR.js";import{L as G,D as H}from"./BvNZkx-f.js";import{u as R}from"./Df6Qpn-N.js";const W=()=>{const b=g({siteTitleAr:"",siteTitleEn:"",siteDescriptionAr:"",siteDescriptionEn:"",keywords:"",siteUrl:"",ogImage:"",twitterHandle:"",googleAnalytics:"",googleSearchConsole:""}),n=g({indexedPages:0,performanceScore:0,seoIssues:0,internalLinks:0}),d=g([]),r=g(!1),c=g(null),v=async()=>{try{r.value=!0,c.value=null;const a=await $fetch("/api/seo");if(a.success){const{seoData:t,seoStats:s,seoPages:_}=a.data;b.value={...b.value,...t},n.value={...n.value,...s},d.value=_}}catch(a){c.value=a,console.error("Error loading SEO data:",a)}finally{r.value=!1}},k=async a=>{try{r.value=!0,c.value=null;const t=await $fetch("/api/seo",{method:"PUT",body:a});if(t.success)return b.value={...b.value,...a.seoData},{success:!0,message:t.message}}catch(t){return c.value=t,console.error("Error saving SEO settings:",t),{success:!1,error:t}}finally{r.value=!1}},h=async a=>{try{r.value=!0,c.value=null;const t=await $fetch("/api/seo/sitemap/generate",{method:"POST",body:a});if(t.success)return{success:!0,data:t.data}}catch(t){return c.value=t,console.error("Error generating sitemap:",t),{success:!1,error:t}}finally{r.value=!1}},i=async a=>{try{r.value=!0,c.value=null;const t=await $fetch("/api/seo/pages",{method:"POST",body:a});if(t.success)return d.value.push(t.data),{success:!0,data:t.data}}catch(t){return c.value=t,console.error("Error creating SEO page:",t),{success:!1,error:t}}finally{r.value=!1}},$=async(a,t)=>{try{r.value=!0,c.value=null;const s=await $fetch(`/api/seo/pages/${a}`,{method:"PUT",body:t});if(s.success){const _=d.value.findIndex(p=>p.id===a);return _!==-1&&(d.value[_]={...d.value[_],...s.data}),{success:!0,data:s.data}}}catch(s){return c.value=s,console.error("Error updating SEO page:",s),{success:!1,error:s}}finally{r.value=!1}},y=async a=>{try{r.value=!0,c.value=null;const t=await $fetch(`/api/seo/pages/${a}`,{method:"DELETE"});if(t.success)return d.value=d.value.filter(s=>s.id!==a),{success:!0,message:t.message}}catch(t){return c.value=t,console.error("Error deleting SEO page:",t),{success:!1,error:t}}finally{r.value=!1}},A=a=>{let t=0;const s=[];return a.title&&a.title.length>0?t+=20:s.push("عنوان الصفحة مفقود"),a.description&&a.description.length>0?t+=20:s.push("وصف الصفحة مفقود"),a.keywords&&a.keywords.length>0?t+=15:s.push("الكلمات المفتاحية مفقودة"),a.title&&a.title.length>=30&&a.title.length<=60?t+=15:a.title&&s.push("طول العنوان غير مناسب (يجب أن يكون بين 30-60 حرف)"),a.description&&a.description.length>=120&&a.description.length<=160?t+=15:a.description&&s.push("طول الوصف غير مناسب (يجب أن يكون بين 120-160 حرف)"),a.ogImage&&a.ogImage.length>0?t+=15:s.push("صورة Open Graph مفقودة"),{score:Math.min(t,100),issues:s,status:t>=80?"optimized":t>=60?"needs-work":"not-optimized"}},D=()=>{const a=[];return b.value.siteTitleAr||a.push("أضف عنوان الموقع باللغة العربية"),b.value.siteDescriptionAr||a.push("أضف وصف الموقع باللغة العربية"),b.value.keywords||a.push("أضف الكلمات المفتاحية للموقع"),b.value.googleAnalytics||a.push("أضف كود Google Analytics لتتبع الزوار"),b.value.googleSearchConsole||a.push("أضف كود Google Search Console لتحسين الفهرسة"),a};return{seoData:P(b),seoStats:P(n),seoPages:P(d),loading:P(r),error:P(c),loadSeoData:v,saveSeoSettings:k,generateSitemap:h,createSeoPage:i,updateSeoPage:$,deleteSeoPage:y,analyzeSeoScore:A,getSeoRecommendations:D}},K={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Z={class:"flex items-center justify-between mb-4"},q={class:"grid grid-cols-2 gap-4 mb-4"},J={class:"text-center"},Q={class:"text-2xl font-bold text-blue-600"},X={class:"text-center"},Y={class:"text-2xl font-bold text-green-600"},ee={class:"mb-4"},te={class:"flex justify-between text-sm text-gray-600 mb-1"},se={class:"w-full bg-gray-200 rounded-full h-2"},ae={key:0,class:"bg-orange-50 border border-orange-200 rounded-lg p-3"},oe={class:"flex items-center"},le={class:"text-sm font-medium text-orange-800"},re={key:1,class:"mt-4"},ne={class:"space-y-1"},ie={key:2,class:"flex items-center justify-center py-4"},ce={__name:"AdminSEODashboard",setup(b){const{seoStats:n,loading:d,getSeoRecommendations:r,loadSeoData:c}=W();T(()=>{c()});const v=j(()=>r()),k=h=>h>=80?"bg-green-500":h>=60?"bg-orange-500":"bg-red-500";return(h,i)=>{const $=L,y=I;return m(),u("div",K,[e("div",Z,[i[1]||(i[1]=e("h3",{class:"text-lg font-medium text-gray-900"},"إحصائيات SEO",-1)),l($,{to:"/admin/seo",class:"text-blue-600 hover:text-blue-800 text-sm font-medium"},{default:S(()=>i[0]||(i[0]=[B(" عرض التفاصيل ")])),_:1})]),e("div",q,[e("div",J,[e("div",Q,f(o(n).indexedPages),1),i[2]||(i[2]=e("div",{class:"text-sm text-gray-600"},"صفحات مفهرسة",-1))]),e("div",X,[e("div",Y,f(o(n).performanceScore)+"%",1),i[3]||(i[3]=e("div",{class:"text-sm text-gray-600"},"معدل الأداء",-1))])]),e("div",ee,[e("div",te,[i[4]||(i[4]=e("span",null,"حالة SEO",-1)),e("span",null,f(o(n).performanceScore)+"%",1)]),e("div",se,[e("div",{class:N(["h-2 rounded-full transition-all duration-300",k(o(n).performanceScore)]),style:z({width:`${o(n).performanceScore}%`})},null,6)])]),o(n).seoIssues>0?(m(),u("div",ae,[e("div",oe,[l(y,{name:"material-symbols:warning",class:"h-5 w-5 text-orange-600 ml-2"}),e("div",null,[e("div",le,f(o(n).seoIssues)+" مشكلة SEO تحتاج انتباه ",1),i[5]||(i[5]=e("div",{class:"text-xs text-orange-600"}," راجع صفحة إدارة SEO لحل هذه المشاكل ",-1))])])])):w("",!0),o(v).length>0?(m(),u("div",re,[i[6]||(i[6]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"توصيات سريعة",-1)),e("ul",ne,[(m(!0),u(C,null,O(o(v).slice(0,3),(A,D)=>(m(),u("li",{key:D,class:"text-xs text-gray-600 flex items-center"},[l(y,{name:"material-symbols:check-circle-outline",class:"h-3 w-3 text-green-500 ml-1"}),B(" "+f(A),1)]))),128))])])):w("",!0),o(d)?(m(),u("div",ie,[l(y,{name:"material-symbols:progress-activity",class:"animate-spin h-5 w-5 text-blue-600"}),i[7]||(i[7]=e("span",{class:"mr-2 text-sm text-gray-600"},"جارٍ التحميل...",-1))])):w("",!0)])}}},de={class:"space-y-6"},ue={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},me={class:"bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-slate-200/60 p-6 hover:shadow-md transition-all duration-200"},ge={class:"flex items-center justify-between mb-4"},pe={class:"flex items-center space-x-2 space-x-reverse"},xe={class:"bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-slate-200/60 p-6 hover:shadow-md transition-all duration-200"},be={class:"flex items-center justify-between mb-4"},fe={class:"flex items-center space-x-2 space-x-reverse"},ve={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},he={class:"bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-slate-200/60 hover:shadow-md transition-all duration-200"},ye={class:"p-6"},_e={class:"space-y-4"},we={class:"flex-1 min-w-0"},Se={class:"text-sm text-slate-800"},ke={class:"text-xs text-slate-500 mt-1"},$e={key:0,class:"flex justify-center py-4"},Ae={key:1,class:"text-center py-8"},De={class:"bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-slate-200/60 hover:shadow-md transition-all duration-200"},Ee={class:"p-6"},Pe={class:"space-y-4"},Ce={class:"flex items-center space-x-3 space-x-reverse"},Oe=["src","alt"],Be={class:"text-sm font-medium text-slate-800"},Ie={class:"text-xs text-slate-500"},Le={class:"text-sm font-medium text-slate-600"},Te={key:0,class:"flex justify-center py-4"},je={key:1,class:"text-center py-8"},Ne={class:"bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-slate-200/60 p-4 sm:p-6 hover:shadow-md transition-all duration-200"},Ue={class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3 sm:gap-4"},Me={__name:"dashboard",setup(b){const n=g({totalPackages:0,totalDestinations:0,newMessages:0,totalUsers:0,totalBookings:0}),d=g([]),r=g([]),c=g(!0),v=g(!0),k=j(()=>[{key:"packages",label:"إجمالي الباقات",value:n.value.totalPackages,icon:"material-symbols:package-2",iconBg:"bg-slate-100",iconColor:"text-slate-600"},{key:"destinations",label:"إجمالي الوجهات",value:n.value.totalDestinations,icon:"material-symbols:location-on",iconBg:"bg-slate-100",iconColor:"text-slate-600"},{key:"messages",label:"رسائل جديدة",value:n.value.newMessages,icon:"material-symbols:mail",iconBg:"bg-slate-100",iconColor:"text-slate-600"},{key:"users",label:"المستخدمين",value:n.value.totalUsers,icon:"material-symbols:group",iconBg:"bg-slate-100",iconColor:"text-slate-600"},{key:"bookings",label:"إجمالي الحجوزات",value:n.value.totalBookings,icon:"material-symbols:book-online",iconBg:"bg-slate-100",iconColor:"text-slate-600"}]),h=g({labels:["يناير","فبراير","مارس","أبريل","مايو","يونيو"],datasets:[{label:"المبيعات (ريال)",data:[45e3,52e3,48e3,61e3,55e3,67e3],borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:.4}]}),i=g({labels:["رحلات داخلية","رحلات خارجية","عمرة","حج","رحلات ترفيهية"],datasets:[{data:[35,25,20,15,5],backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)","rgba(139, 92, 246, 0.8)"],borderColor:["rgb(59, 130, 246)","rgb(16, 185, 129)","rgb(245, 158, 11)","rgb(239, 68, 68)","rgb(139, 92, 246)"]}]}),$=g({plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(t){return new Intl.NumberFormat("ar-SA").format(t)+" ريال"}}}}}),y=g({plugins:{legend:{position:"bottom",labels:{padding:15,usePointStyle:!0}}}}),A=async()=>{try{const t=await $fetch("/api/admin/stats");t&&t.success&&t.data?(n.value=t.data.stats||{totalPackages:0,totalDestinations:0,newMessages:0,totalUsers:0,totalBookings:0},d.value=Array.isArray(t.data.recentActivities)?t.data.recentActivities:[],r.value=Array.isArray(t.data.popularPackages)?t.data.popularPackages:[]):(n.value={totalPackages:0,totalDestinations:0,newMessages:0,totalUsers:0,totalBookings:0},d.value=[],r.value=[])}catch(t){console.error("خطأ في تحميل الإحصائيات:",t),n.value={totalPackages:0,totalDestinations:0,newMessages:0,totalUsers:0,totalBookings:0},d.value=[],r.value=[]}finally{c.value=!1,v.value=!1}},D=t=>new Date(t).toLocaleDateString("ar-SA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),a=t=>new Intl.NumberFormat("ar-SA",{style:"currency",currency:"SAR"}).format(t);return T(async()=>{const{checkAuth:t}=V();try{await t(!0),await A()}catch(s){console.error("خطأ في تحميل بيانات الداشبورد:",s)}}),R({title:"لوحة التحكم - Wonder Land Admin",meta:[{name:"description",content:"لوحة تحكم إدارة موقع Wonder Land Traveling Agency"},{name:"robots",content:"noindex, nofollow"}]}),(t,s)=>{const _=M,p=I,U=ce,E=L;return m(),u("div",de,[s[14]||(s[14]=e("div",{class:"h-16"},null,-1)),s[15]||(s[15]=e("div",{class:"bg-gradient-to-r from-slate-500 to-slate-600 rounded-xl p-6 text-white shadow-sm"},[e("h1",{class:"text-2xl font-semibold mb-2"},"مرحباً بك في لوحة التحكم"),e("p",{class:"text-slate-200"},"إدارة شاملة لموقع Wonder Land Traveling Agency")],-1)),l(_,{stats:o(k)},null,8,["stats"]),e("div",ue,[e("div",me,[e("div",ge,[s[1]||(s[1]=e("h2",{class:"text-lg font-semibold text-slate-800"},"المبيعات الشهرية",-1)),e("div",pe,[s[0]||(s[0]=e("span",{class:"text-sm text-slate-500"},"آخر 6 أشهر",-1)),l(p,{name:"material-symbols:trending-up",class:"h-5 w-5 text-slate-600"})])]),l(o(G),{data:o(h),height:250,options:o($)},null,8,["data","options"])]),e("div",xe,[e("div",be,[s[3]||(s[3]=e("h2",{class:"text-lg font-semibold text-slate-800"},"توزيع الحجوزات",-1)),e("div",fe,[s[2]||(s[2]=e("span",{class:"text-sm text-slate-500"},"حسب النوع",-1)),l(p,{name:"material-symbols:pie-chart",class:"h-5 w-5 text-slate-600"})])]),l(o(H),{data:o(i),height:250,options:o(y)},null,8,["data","options"])])]),e("div",ve,[e("div",he,[s[5]||(s[5]=e("div",{class:"p-6 border-b border-slate-200/60"},[e("h2",{class:"text-lg font-semibold text-slate-800"},"الأنشطة الحديثة")],-1)),e("div",ye,[e("div",_e,[(m(!0),u(C,null,O(o(d),x=>(m(),u("div",{key:x.id,class:"flex items-start space-x-3 space-x-reverse"},[e("div",{class:N(["flex-shrink-0 w-2 h-2 rounded-full mt-2",x.type==="package"?"bg-slate-500":x.type==="message"?"bg-slate-400":x.type==="user"?"bg-slate-600":"bg-slate-300"])},null,2),e("div",we,[e("p",Se,f(x.title),1),e("p",ke,f(D(x.created_at)),1)])]))),128))]),o(c)?(m(),u("div",$e,[l(p,{name:"material-symbols:progress-activity",class:"animate-spin h-6 w-6 text-slate-400"})])):w("",!0),o(d).length===0&&!o(c)?(m(),u("div",Ae,[l(p,{name:"material-symbols:inbox",class:"h-12 w-12 text-slate-300 mx-auto mb-2"}),s[4]||(s[4]=e("p",{class:"text-slate-500"},"لا توجد أنشطة حديثة",-1))])):w("",!0)])]),e("div",De,[s[7]||(s[7]=e("div",{class:"p-6 border-b border-slate-200/60"},[e("h2",{class:"text-lg font-semibold text-slate-800"},"الباقات الأكثر شعبية")],-1)),e("div",Ee,[e("div",Pe,[(m(!0),u(C,null,O(o(r),x=>(m(),u("div",{key:x.id,class:"flex items-center justify-between"},[e("div",Ce,[e("img",{src:x.image,alt:x.title,class:"w-10 h-10 rounded-lg object-cover",loading:"lazy"},null,8,Oe),e("div",null,[e("p",Be,f(x.title),1),e("p",Ie,f(x.views)+" مشاهدة",1)])]),e("span",Le,f(a(x.price)),1)]))),128))]),o(v)?(m(),u("div",Te,[l(p,{name:"material-symbols:progress-activity",class:"animate-spin h-6 w-6 text-slate-400"})])):w("",!0),o(r).length===0&&!o(v)?(m(),u("div",je,[l(p,{name:"material-symbols:package-2-outline",class:"h-12 w-12 text-slate-300 mx-auto mb-2"}),s[6]||(s[6]=e("p",{class:"text-slate-500"},"لا توجد حزم متاحة",-1))])):w("",!0)])]),l(U)]),e("div",Ne,[s[13]||(s[13]=e("h2",{class:"text-lg font-semibold text-slate-800 mb-4"},"الروابط السريعة",-1)),e("div",Ue,[l(E,{to:"/admin/packages/create",class:"flex flex-col items-center p-3 sm:p-4 bg-slate-50 rounded-lg hover:bg-slate-100 transition-all duration-200 group"},{default:S(()=>[l(p,{name:"material-symbols:add-box",class:"h-6 w-6 sm:h-8 sm:w-8 text-slate-600 mb-2 group-hover:scale-110 transition-transform"}),s[8]||(s[8]=e("span",{class:"text-xs sm:text-sm font-medium text-slate-700 text-center"},"إضافة باقة",-1))]),_:1}),l(E,{to:"/admin/destinations/create",class:"flex flex-col items-center p-3 sm:p-4 bg-slate-50 rounded-lg hover:bg-slate-100 transition-all duration-200 group"},{default:S(()=>[l(p,{name:"material-symbols:add-location",class:"h-6 w-6 sm:h-8 sm:w-8 text-slate-600 mb-2 group-hover:scale-110 transition-transform"}),s[9]||(s[9]=e("span",{class:"text-xs sm:text-sm font-medium text-slate-700 text-center"},"إضافة وجهة",-1))]),_:1}),l(E,{to:"/admin/contacts",class:"flex flex-col items-center p-3 sm:p-4 bg-slate-50 rounded-lg hover:bg-slate-100 transition-all duration-200 group"},{default:S(()=>[l(p,{name:"material-symbols:mail-outline",class:"h-6 w-6 sm:h-8 sm:w-8 text-slate-600 mb-2 group-hover:scale-110 transition-transform"}),s[10]||(s[10]=e("span",{class:"text-xs sm:text-sm font-medium text-slate-700 text-center"},"عرض الرسائل",-1))]),_:1}),l(E,{to:"/admin/seo",class:"flex flex-col items-center p-3 sm:p-4 bg-slate-50 rounded-lg hover:bg-slate-100 transition-all duration-200 group"},{default:S(()=>[l(p,{name:"material-symbols:search",class:"h-6 w-6 sm:h-8 sm:w-8 text-slate-600 mb-2 group-hover:scale-110 transition-transform"}),s[11]||(s[11]=e("span",{class:"text-xs sm:text-sm font-medium text-slate-700 text-center"},"إدارة SEO",-1))]),_:1}),l(E,{to:"/admin/settings",class:"flex flex-col items-center p-3 sm:p-4 bg-slate-50 rounded-lg hover:bg-slate-100 transition-all duration-200 group"},{default:S(()=>[l(p,{name:"material-symbols:settings",class:"h-6 w-6 sm:h-8 sm:w-8 text-slate-600 mb-2 group-hover:scale-110 transition-transform"}),s[12]||(s[12]=e("span",{class:"text-xs sm:text-sm font-medium text-slate-700 text-center"},"الإعدادات",-1))]),_:1})])])])}}},We=F(Me,[["__scopeId","data-v-d04888d2"]]);export{We as default};
