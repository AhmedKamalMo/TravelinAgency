import{aA as c,S as u}from"./DHjegAIK.js";const w=()=>{const o=c("cms.siteSettings",()=>({})),s=c("cms.navigation",()=>({})),r=c("cms.currentPage",()=>null),l=async()=>{try{const e=await $fetch("/api/public/site-settings");return o.value=e.data.settings,e.data.settings}catch(e){return console.error("Error loading site settings:",e),{}}},g=async e=>{try{const t=e?`/api/public/navigation?menu_name=${e}&t=${Date.now()}`:`/api/public/navigation?t=${Date.now()}`,n=await $fetch(t);return s.value=n.data.menus,n.data.menus}catch(t){return console.error("Error loading navigation:",t),{}}},v=async e=>{try{const t=await $fetch("/api/public/navigation/refresh",{method:"POST",body:{menu_name:e||"main",t:Date.now()}});return s.value=t.data.menus,t.data.menus}catch(t){return console.error("Error refreshing navigation:",t),{}}},d=async e=>{try{const t=await $fetch(`/api/public/pages/${e}`);return r.value=t.data,t.data}catch(t){return console.error("Error loading page:",t),null}},p=(e,t,n="")=>{var a;return((a=o.value[e])==null?void 0:a[t])||n},f=e=>s.value[e]||[],m=()=>r.value,S=e=>{var t;return(t=r.value)!=null&&t.sections?r.value.sections.find(n=>n.section_type===e):null},y=e=>{var t;return(t=r.value)!=null&&t.sections?r.value.sections.filter(n=>n.section_type===e):[]},h=(e,t)=>{var a;if(!((a=r.value)!=null&&a.sections))return[];const n=r.value.sections.find(i=>i.id===e);return n!=null&&n.content_blocks?t?n.content_blocks.filter(i=>i.block_type===t):n.content_blocks:[]},b=async()=>{await Promise.all([l(),g()])};return{siteSettings:u(o),navigation:u(s),currentPage:u(r),loadSiteSettings:l,loadNavigation:g,refreshNavigation:v,loadPage:d,getSetting:p,getMenu:f,getCurrentPage:m,getPageSection:S,getPageSections:y,getSectionBlocks:h,initializeCMS:b}};export{w as u};
