#!/usr/bin/env node

console.log('ðŸ”§ CREATING SIMPLE WORKING INDEX.PHP');
console.log('====================================\n');

console.log('ðŸ“‹ DEPLOYMENT COMMANDS FOR SIMPLE WORKING INDEX.PHP:');
console.log('====================================================');
console.log('');
console.log('# 1. Create a simple working index.php');
console.log('cat > index.php << "EOF"');
console.log('<?php');
console.log('header("Content-Type: text/html; charset=utf-8");');
console.log('');
console.log('$uri = $_SERVER["REQUEST_URI"];');
console.log('$path = parse_url($uri, PHP_URL_PATH);');
console.log('');
console.log('// API routes');
console.log('if (strpos($path, "/api/") === 0) {');
console.log('    include "api-handler.php";');
console.log('    exit;');
console.log('}');
console.log('');
console.log('// _nuxt assets');
console.log('if (strpos($path, "/_nuxt/") === 0) {');
console.log('    $file = __DIR__ . "/output/public" . $path;');
console.log('    if (file_exists($file)) {');
console.log('        $ext = pathinfo($file, PATHINFO_EXTENSION);');
console.log('        if ($ext === "css") header("Content-Type: text/css");');
console.log('        if ($ext === "js") header("Content-Type: application/javascript");');
console.log('        readfile($file);');
console.log('        exit;');
console.log('    }');
console.log('    http_response_code(404);');
console.log('    exit;');
console.log('}');
console.log('');
console.log('// Static files');
console.log('$ext = pathinfo($path, PATHINFO_EXTENSION);');
console.log('if (in_array($ext, ["css", "js", "jpg", "png", "gif", "svg", "ico"])) {');
console.log('    $file = __DIR__ . "/output/public" . $path;');
console.log('    if (file_exists($file)) {');
console.log('        if ($ext === "css") header("Content-Type: text/css");');
console.log('        if ($ext === "js") header("Content-Type: application/javascript");');
console.log('        readfile($file);');
console.log('        exit;');
console.log('    }');
console.log('    http_response_code(404);');
console.log('    exit;');
console.log('}');
console.log('');
console.log('// Main page');
console.log('$html = __DIR__ . "/index.html";');
console.log('if (file_exists($html)) {');
console.log('    $content = file_get_contents($html);');
console.log('    $content = str_replace("src=\\"/", "src=\\"", $content);');
console.log('    $content = str_replace("href=\\"/", "href=\\"", $content);');
console.log('    echo $content;');
console.log('    exit;');
console.log('}');
console.log('');
console.log('// Fallback');
console.log('echo "<h1>World Trip Agency</h1><p>Loading...</p>";');
console.log('?>');
console.log('EOF');
console.log('');
console.log('# 2. Test PHP syntax');
console.log('php -l index.php');
console.log('');
console.log('# 3. Test the website');
console.log('curl -k -I https://worldtripagency.com/');
console.log('');
console.log('# 4. Test _nuxt assets');
console.log('curl -k -I https://worldtripagency.com/_nuxt/entry.Cjk20dY-.css');
console.log('');
console.log('ðŸŽ¯ This simplified version will:');
console.log('âœ… Fix 500 Internal Server Error');
console.log('âœ… Handle _nuxt assets correctly');
console.log('âœ… Serve your Nuxt.js website');
console.log('âœ… Work with minimal PHP syntax');
