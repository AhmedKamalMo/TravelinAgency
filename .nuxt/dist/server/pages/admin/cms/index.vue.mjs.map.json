{"file":"index.vue.mjs","mappings":"uhBAiNA,MAAMA,EAAUC,EAAI,EAAI,EAClBC,EAAQD,EAAI,CAChB,WAAY,EACZ,eAAgB,EAChB,WAAY,EACZ,UAAW,CACb,CAAC,EACKE,EAAcF,EAAI,EAAE,EAGpBG,EAAiBC,IACH,CAChB,UAAW,QACX,MAAO,QACP,SAAU,OACX,GACgBA,CAAM,GAAKA","names":["loading","ref","stats","recentPages","getStatusText","status"],"sources":["../../../../../../pages/admin/cms/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"space-y-6\">\r\n    <!-- مساحة إضافية في الأعلى -->\r\n    <div class=\"h-16\"></div>\r\n    \r\n    <!-- Header -->\r\n    <div class=\"flex justify-between items-center\">\r\n      <div>\r\n        <h1 class=\"text-2xl font-bold text-gray-900\">إدارة المحتوى</h1>\r\n        <p class=\"text-gray-600\">إدارة صفحات الموقع والمحتوى</p>\r\n      </div>\r\n      <div class=\"flex space-x-3 space-x-reverse\">\r\n        <NuxtLink\r\n          to=\"/admin/cms/pages/new\"\r\n          class=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center\"\r\n        >\r\n          <Icon name=\"material-symbols:add\" class=\"h-5 w-5 ml-2\" />\r\n          صفحة جديدة\r\n        </NuxtLink>\r\n        <NuxtLink\r\n          to=\"/admin/cms/settings\"\r\n          class=\"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors flex items-center\"\r\n        >\r\n          <Icon name=\"material-symbols:settings\" class=\"h-5 w-5 ml-2\" />\r\n          إعدادات الموقع\r\n        </NuxtLink>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Stats Cards -->\r\n    <div class=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n      <div class=\"bg-white rounded-xl p-6 shadow-sm border border-gray-200\">\r\n        <div class=\"flex items-center\">\r\n          <div class=\"p-3 bg-blue-100 rounded-lg\">\r\n            <Icon name=\"material-symbols:description\" class=\"h-6 w-6 text-blue-600\" />\r\n          </div>\r\n          <div class=\"mr-4\">\r\n            <p class=\"text-sm font-medium text-gray-600\">إجمالي الصفحات</p>\r\n            <p class=\"text-2xl font-bold text-gray-900\">{{ stats.totalPages }}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"bg-white rounded-xl p-6 shadow-sm border border-gray-200\">\r\n        <div class=\"flex items-center\">\r\n          <div class=\"p-3 bg-green-100 rounded-lg\">\r\n            <Icon name=\"material-symbols:visibility\" class=\"h-6 w-6 text-green-600\" />\r\n          </div>\r\n          <div class=\"mr-4\">\r\n            <p class=\"text-sm font-medium text-gray-600\">صفحات منشورة</p>\r\n            <p class=\"text-2xl font-bold text-gray-900\">{{ stats.publishedPages }}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"bg-white rounded-xl p-6 shadow-sm border border-gray-200\">\r\n        <div class=\"flex items-center\">\r\n          <div class=\"p-3 bg-yellow-100 rounded-lg\">\r\n            <Icon name=\"material-symbols:edit\" class=\"h-6 w-6 text-yellow-600\" />\r\n          </div>\r\n          <div class=\"mr-4\">\r\n            <p class=\"text-sm font-medium text-gray-600\">مسودات</p>\r\n            <p class=\"text-2xl font-bold text-gray-900\">{{ stats.draftPages }}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"bg-white rounded-xl p-6 shadow-sm border border-gray-200\">\r\n        <div class=\"flex items-center\">\r\n          <div class=\"p-3 bg-purple-100 rounded-lg\">\r\n            <Icon name=\"material-symbols:menu\" class=\"h-6 w-6 text-purple-600\" />\r\n          </div>\r\n          <div class=\"mr-4\">\r\n            <p class=\"text-sm font-medium text-gray-600\">عناصر القائمة</p>\r\n            <p class=\"text-2xl font-bold text-gray-900\">{{ stats.menuItems }}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Quick Actions -->\r\n    <div class=\"bg-white rounded-xl p-6 shadow-sm border border-gray-200\">\r\n      <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">إجراءات سريعة</h2>\r\n      <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n        <NuxtLink\r\n          to=\"/admin/cms/pages\"\r\n          class=\"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors\"\r\n        >\r\n          <div class=\"flex items-center\">\r\n            <Icon name=\"material-symbols:description\" class=\"h-8 w-8 text-blue-600 ml-3\" />\r\n            <div>\r\n              <h3 class=\"font-medium text-gray-900\">إدارة الصفحات</h3>\r\n              <p class=\"text-sm text-gray-600\">تعديل وإنشاء صفحات الموقع</p>\r\n            </div>\r\n          </div>\r\n        </NuxtLink>\r\n\r\n        <NuxtLink\r\n          to=\"/admin/cms/navigation\"\r\n          class=\"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors\"\r\n        >\r\n          <div class=\"flex items-center\">\r\n            <Icon name=\"material-symbols:menu\" class=\"h-8 w-8 text-green-600 ml-3\" />\r\n            <div>\r\n              <h3 class=\"font-medium text-gray-900\">إدارة القوائم</h3>\r\n              <p class=\"text-sm text-gray-600\">تعديل قوائم التنقل</p>\r\n            </div>\r\n          </div>\r\n        </NuxtLink>\r\n\r\n        <NuxtLink\r\n          to=\"/admin/cms/homepage\"\r\n          class=\"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors\"\r\n        >\r\n          <div class=\"flex items-center\">\r\n            <Icon name=\"material-symbols:home\" class=\"h-8 w-8 text-orange-600 ml-3\" />\r\n            <div>\r\n              <h3 class=\"font-medium text-gray-900\">الصفحة الرئيسية</h3>\r\n              <p class=\"text-sm text-gray-600\">تعديل محتوى الصفحة الرئيسية</p>\r\n            </div>\r\n          </div>\r\n        </NuxtLink>\r\n\r\n        <NuxtLink\r\n          to=\"/admin/cms/media\"\r\n          class=\"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors\"\r\n        >\r\n          <div class=\"flex items-center\">\r\n            <Icon name=\"material-symbols:image\" class=\"h-8 w-8 text-purple-600 ml-3\" />\r\n            <div>\r\n              <h3 class=\"font-medium text-gray-900\">مكتبة الوسائط</h3>\r\n              <p class=\"text-sm text-gray-600\">إدارة الصور والملفات</p>\r\n            </div>\r\n          </div>\r\n        </NuxtLink>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Recent Pages -->\r\n    <div class=\"bg-white rounded-xl shadow-sm border border-gray-200\">\r\n      <div class=\"p-6 border-b border-gray-200\">\r\n        <div class=\"flex justify-between items-center\">\r\n          <h2 class=\"text-lg font-semibold text-gray-900\">الصفحات الأخيرة</h2>\r\n          <NuxtLink\r\n            to=\"/admin/cms/pages\"\r\n            class=\"text-blue-600 hover:text-blue-700 text-sm font-medium\"\r\n          >\r\n            عرض الكل\r\n          </NuxtLink>\r\n        </div>\r\n      </div>\r\n      <div class=\"p-6\">\r\n        <div v-if=\"loading\" class=\"text-center py-8\">\r\n          <Icon name=\"material-symbols:refresh\" class=\"h-8 w-8 text-gray-400 animate-spin mx-auto\" />\r\n          <p class=\"text-gray-600 mt-2\">جاري التحميل...</p>\r\n        </div>\r\n        \r\n        <div v-else-if=\"recentPages.length === 0\" class=\"text-center py-8\">\r\n          <Icon name=\"material-symbols:description\" class=\"h-12 w-12 text-gray-400 mx-auto\" />\r\n          <p class=\"text-gray-600 mt-2\">لا توجد صفحات بعد</p>\r\n        </div>\r\n\r\n        <div v-else class=\"space-y-4\">\r\n          <div\r\n            v-for=\"page in recentPages\"\r\n            :key=\"page.id\"\r\n            class=\"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors\"\r\n          >\r\n            <div class=\"flex items-center\">\r\n              <div class=\"p-2 bg-blue-100 rounded-lg ml-3\">\r\n                <Icon name=\"material-symbols:description\" class=\"h-5 w-5 text-blue-600\" />\r\n              </div>\r\n              <div>\r\n                <h3 class=\"font-medium text-gray-900\">{{ page.title }}</h3>\r\n                <p class=\"text-sm text-gray-600\">{{ page.slug }}</p>\r\n              </div>\r\n            </div>\r\n            <div class=\"flex items-center space-x-3 space-x-reverse\">\r\n              <span\r\n                :class=\"[\r\n                  'px-2 py-1 text-xs font-medium rounded-full',\r\n                  page.status === 'published' ? 'bg-green-100 text-green-800' :\r\n                  page.status === 'draft' ? 'bg-yellow-100 text-yellow-800' :\r\n                  'bg-gray-100 text-gray-800'\r\n                ]\"\r\n              >\r\n                {{ getStatusText(page.status) }}\r\n              </span>\r\n              <NuxtLink\r\n                :to=\"`/admin/cms/pages/${page.id}`\"\r\n                class=\"text-blue-600 hover:text-blue-700 text-sm font-medium\"\r\n              >\r\n                تعديل\r\n              </NuxtLink>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\ndefinePageMeta({\r\n  layout: 'admin',\r\n  middleware: 'admin'\r\n})\r\n\r\n// State\r\nconst loading = ref(true)\r\nconst stats = ref({\r\n  totalPages: 0,\r\n  publishedPages: 0,\r\n  draftPages: 0,\r\n  menuItems: 0\r\n})\r\nconst recentPages = ref([])\r\n\r\n// Methods\r\nconst getStatusText = (status) => {\r\n  const statusMap = {\r\n    published: 'منشور',\r\n    draft: 'مسودة',\r\n    archived: 'مؤرشف'\r\n  }\r\n  return statusMap[status] || status\r\n}\r\n\r\nconst loadStats = async () => {\r\n  try {\r\n    // Load pages stats\r\n    const pagesResponse = await $fetch('/api/cms/pages?limit=1000')\r\n    const pages = pagesResponse.data.pages\r\n    \r\n    stats.value.totalPages = pages.length\r\n    stats.value.publishedPages = pages.filter(p => p.status === 'published').length\r\n    stats.value.draftPages = pages.filter(p => p.status === 'draft').length\r\n    \r\n    // Load navigation stats\r\n    const navResponse = await $fetch('/api/cms/navigation')\r\n    const navItems = navResponse.data.flat\r\n    stats.value.menuItems = navItems.length\r\n    \r\n    // Get recent pages\r\n    recentPages.value = pages\r\n      .sort((a, b) => new Date(b.updated_at) - new Date(a.updated_at))\r\n      .slice(0, 5)\r\n      \r\n  } catch (error) {\r\n    console.error('Error loading CMS stats:', error)\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// Load data on mount\r\nonMounted(() => {\r\n  loadStats()\r\n})\r\n</script>\r\n"],"version":3}