{"file":"_id_.vue.mjs","mappings":"85BAsVcA,EAAS,EACK,OAAO,GA4B7B,MAAAC,EAA6BC,GAAa,CACxC,KAAA,CAAE,YAAAC,CAAY,EAAIC,EAAiB,EACzCD,EAAY,gBAAiB,sBAAsB,CACrD,EAGME,EAA0BC,GAAU,CAClC,KAAA,CAAE,UAAAC,CAAU,EAAIH,EAAiB,EAC7BG,EAAA,oBAAqBD,EAAM,SAAW,uBAAuB,CACzE,EAqCME,EAAUC,EAAI,EAAI,EAClBC,EAAcD,EAAI,IAAI,EACtBE,EAAYF,EAAI,EAAK,EACrBG,EAAgBH,EAAI,EAAK,EACzBI,EAAOJ,EAAI,CACf,QAAS,GACT,QAAS,GACT,eAAgB,GAChB,eAAgB,GAChB,SAAU,gBACV,UAAW,GACX,OAAQ,GACR,SAAU,EAAA,CACX,EAyEKK,EAAcC,GACL,IAAI,KAAKA,CAAU,EACpB,mBAAmB,OAAO,EAGlCC,EAAkBC,GAAgB,CAClC,GAAA,CAACA,EAAoB,MAAA,GAErB,GAAA,CAEE,GAAA,OAAOA,GAAgB,SACzB,MAAO,GAAGA,EAAY,QAAQ,KAAKA,EAAY,SAAS,GAItD,GAAA,OAAOA,GAAgB,SAAU,CAC7B,MAAAC,EAAS,KAAK,MAAMD,CAAW,EACrC,MAAO,GAAGC,EAAO,QAAQ,KAAKA,EAAO,SAAS,EAAA,CAGzC,MAAA,SACAZ,EAAO,CACN,eAAA,MAAM,6BAA8BA,CAAK,EAC1C,EAAA,CAEX,EAEMa,EAAeC,IACL,CACZ,MAAO,QACP,cAAe,OACjB,GACaA,CAAI,GAAKA,EAGlBC,EAAiBC,IACJ,CACf,OAAQ,MACR,SAAU,SACZ,GACgBA,CAAM,GAAKA,EAGvBC,EAAkBD,IACP,CACb,OAAQ,8BACR,SAAU,yBACZ,GACcA,CAAM,GAAK,4BASnB,OAAAE,EAAA,CACN,MAAOC,EAAS,IAAM,OAAA,kBAAUC,EAAAhB,EAAY,QAAZ,YAAAgB,EAAmB,UAAW,QAAQ,uBAAsB,EAC5F,KAAM,CACJ,CAAE,KAAM,cAAe,QAAS,wBAAyB,EACzD,CAAE,KAAM,SAAU,QAAS,mBAAoB,CAAA,CACjD,CACD","names":["useRoute","handleImageUploadComplete","fileInfo","showSuccess","useNotifications","handleImageUploadError","error","showError","loading","ref","destination","isEditing","updateLoading","form","formatDate","dateString","getCoordinates","coordinates","parsed","getTypeName","type","getStatusName","status","getStatusColor","useHead","computed","_a"],"sources":["../../../../../../pages/admin/destinations/[id].vue"],"sourcesContent":["<template>\r\n  <div class=\"space-y-6\">\r\n    <!-- مساحة إضافية في الأعلى -->\r\n    <div class=\"h-16\"></div>\r\n    \r\n    <!-- رأس الصفحة -->\r\n    <div class=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\r\n      <div>\r\n        <h1 class=\"text-2xl font-bold text-gray-900\">تفاصيل الوجهة</h1>\r\n        <p class=\"mt-1 text-sm text-gray-600\">عرض تفاصيل الوجهة السياحية</p>\r\n      </div>\r\n      <div class=\"mt-4 sm:mt-0 flex space-x-3 space-x-reverse\">\r\n        <!-- أزرار وضع العرض -->\r\n        <template v-if=\"!isEditing\">\r\n          <button\r\n            @click=\"enableEditMode\"\r\n            class=\"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\r\n          >\r\n            <Icon name=\"material-symbols:edit\" class=\"h-5 w-5 ml-2\" />\r\n            تحرير\r\n          </button>\r\n          <NuxtLink\r\n            to=\"/admin/destinations\"\r\n            class=\"inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors\"\r\n          >\r\n            <Icon name=\"material-symbols:arrow-back\" class=\"h-5 w-5 ml-2\" />\r\n            العودة للقائمة\r\n          </NuxtLink>\r\n        </template>\r\n        \r\n        <!-- أزرار وضع التعديل -->\r\n        <template v-else>\r\n          <button\r\n            @click=\"saveChanges\"\r\n            :disabled=\"updateLoading\"\r\n            class=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n          >\r\n            <Icon v-if=\"updateLoading\" name=\"material-symbols:progress-activity\" class=\"animate-spin h-5 w-5 ml-2\" />\r\n            <Icon v-else name=\"material-symbols:save\" class=\"h-5 w-5 ml-2\" />\r\n            {{ updateLoading ? 'جاري الحفظ...' : 'حفظ التغييرات' }}\r\n          </button>\r\n          <button\r\n            @click=\"cancelEdit\"\r\n            :disabled=\"updateLoading\"\r\n            class=\"inline-flex items-center px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n          >\r\n            <Icon name=\"material-symbols:close\" class=\"h-5 w-5 ml-2\" />\r\n            إلغاء\r\n          </button>\r\n        </template>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- حالة التحميل -->\r\n    <div v-if=\"loading\" class=\"flex justify-center items-center py-12\">\r\n      <Icon name=\"material-symbols:progress-activity\" class=\"animate-spin h-8 w-8 text-blue-600\" />\r\n      <span class=\"mr-3 text-gray-600\">جارٍ تحميل بيانات الوجهة...</span>\r\n    </div>\r\n\r\n    <!-- تفاصيل الوجهة -->\r\n    <div v-else-if=\"destination\" class=\"space-y-6\">\r\n      <!-- البطاقة الرئيسية -->\r\n      <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden\">\r\n        <!-- صورة الوجهة -->\r\n        <div v-if=\"destination.image_url || destination.image\" class=\"h-64 bg-gray-100\">\r\n          <img\r\n            :src=\"destination.image_url || destination.image\"\r\n            :alt=\"destination.name_ar || destination.name_en\"\r\n            class=\"w-full h-full object-cover\"\r\n            loading=\"lazy\"\r\n          />\r\n        </div>\r\n        \r\n        <!-- محتوى البطاقة -->\r\n        <div class=\"p-6\">\r\n          <!-- وضع العرض -->\r\n          <template v-if=\"!isEditing\">\r\n            <div class=\"flex items-start justify-between mb-4\">\r\n              <div>\r\n                <h2 class=\"text-3xl font-bold text-gray-900 mb-2\">\r\n                  {{ destination.name_ar || destination.name_en }}\r\n                </h2>\r\n                <p v-if=\"destination.name_en && destination.name_ar\" class=\"text-lg text-gray-600\">\r\n                  {{ destination.name_en }}\r\n                </p>\r\n              </div>\r\n              <div class=\"flex space-x-2 space-x-reverse\">\r\n                <span :class=\"getStatusColor(destination.active ? 'active' : 'inactive')\" class=\"px-3 py-1 text-sm font-medium rounded-full\">\r\n                  {{ getStatusName(destination.active ? 'active' : 'inactive') }}\r\n                </span>\r\n                <span v-if=\"destination.featured\" class=\"px-3 py-1 text-sm font-medium rounded-full bg-yellow-100 text-yellow-800\">\r\n                  مميز\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- الوصف -->\r\n            <div class=\"mb-6\">\r\n              <h3 class=\"text-lg font-semibold text-gray-900 mb-2\">الوصف</h3>\r\n              <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div v-if=\"destination.description_ar\">\r\n                  <h4 class=\"text-sm font-medium text-gray-700 mb-1\">بالعربية</h4>\r\n                  <p class=\"text-gray-600\">{{ destination.description_ar }}</p>\r\n                </div>\r\n                <div v-if=\"destination.description_en\">\r\n                  <h4 class=\"text-sm font-medium text-gray-700 mb-1\">بالإنجليزية</h4>\r\n                  <p class=\"text-gray-600\">{{ destination.description_en }}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </template>\r\n\r\n          <!-- وضع التعديل -->\r\n          <template v-else>\r\n            <form @submit.prevent=\"saveChanges\" class=\"space-y-6\">\r\n              <!-- المعلومات الأساسية -->\r\n              <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <!-- الاسم بالعربية -->\r\n                <div>\r\n                  <label for=\"name_ar\" class=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    الاسم بالعربية *\r\n                  </label>\r\n                  <input\r\n                    id=\"name_ar\"\r\n                    v-model=\"form.name_ar\"\r\n                    type=\"text\"\r\n                    required\r\n                    class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                    placeholder=\"أدخل اسم الوجهة بالعربية\"\r\n                  />\r\n                </div>\r\n\r\n                <!-- الاسم بالإنجليزية -->\r\n                <div>\r\n                  <label for=\"name_en\" class=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    الاسم بالإنجليزية *\r\n                  </label>\r\n                  <input\r\n                    id=\"name_en\"\r\n                    v-model=\"form.name_en\"\r\n                    type=\"text\"\r\n                    required\r\n                    class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                    placeholder=\"Enter destination name in English\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <!-- الوصف -->\r\n              <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <!-- الوصف بالعربية -->\r\n                <div>\r\n                  <label for=\"description_ar\" class=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    الوصف بالعربية *\r\n                  </label>\r\n                  <textarea\r\n                    id=\"description_ar\"\r\n                    v-model=\"form.description_ar\"\r\n                    required\r\n                    rows=\"4\"\r\n                    class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                    placeholder=\"أدخل وصف الوجهة بالعربية\"\r\n                  ></textarea>\r\n                </div>\r\n\r\n                <!-- الوصف بالإنجليزية -->\r\n                <div>\r\n                  <label for=\"description_en\" class=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    الوصف بالإنجليزية *\r\n                  </label>\r\n                  <textarea\r\n                    id=\"description_en\"\r\n                    v-model=\"form.description_en\"\r\n                    required\r\n                    rows=\"4\"\r\n                    class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                    placeholder=\"Enter destination description in English\"\r\n                  ></textarea>\r\n                </div>\r\n              </div>\r\n\r\n              <!-- معلومات إضافية -->\r\n              <div class=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                <!-- نوع الوجهة -->\r\n                <div>\r\n                  <label for=\"category\" class=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    نوع الوجهة *\r\n                  </label>\r\n                  <select\r\n                    id=\"category\"\r\n                    v-model=\"form.category\"\r\n                    required\r\n                    class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  >\r\n                    <option value=\"international\">عالمي</option>\r\n                    <option value=\"saudi\">سعودي</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <!-- صورة الوجهة -->\r\n                <div class=\"md:col-span-2\">\r\n                  <label class=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    صورة الوجهة\r\n                  </label>\r\n                  <ImageUpload\r\n                    v-model=\"form.image_url\"\r\n                    alt=\"صورة الوجهة\"\r\n                    @upload-complete=\"handleImageUploadComplete\"\r\n                    @upload-error=\"handleImageUploadError\"\r\n                  />\r\n                  <p class=\"mt-2 text-xs text-gray-500\">\r\n                    يمكنك رفع صورة JPG, PNG, JPEG بحجم أقصى 5MB\r\n                  </p>\r\n                </div>\r\n\r\n                <!-- حالة الوجهة -->\r\n                <div>\r\n                  <label for=\"active\" class=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    حالة الوجهة\r\n                  </label>\r\n                  <select\r\n                    id=\"active\"\r\n                    v-model=\"form.active\"\r\n                    class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  >\r\n                    <option :value=\"true\">نشط</option>\r\n                    <option :value=\"false\">غير نشط</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <!-- خيارات إضافية -->\r\n              <div class=\"flex items-center space-x-4 space-x-reverse\">\r\n                <label class=\"flex items-center\">\r\n                  <input\r\n                    v-model=\"form.featured\"\r\n                    type=\"checkbox\"\r\n                    class=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\r\n                  />\r\n                  <span class=\"mr-2 text-sm text-gray-700\">وجهة مميزة</span>\r\n                </label>\r\n              </div>\r\n            </form>\r\n          </template>\r\n\r\n          <!-- المعلومات الأساسية -->\r\n          <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n            <div>\r\n              <h4 class=\"text-sm font-medium text-gray-700 mb-1\">نوع الوجهة</h4>\r\n              <p class=\"text-gray-900\">{{ getTypeName(destination.category) }}</p>\r\n            </div>\r\n            <div v-if=\"destination.region_ar || destination.region_en\">\r\n              <h4 class=\"text-sm font-medium text-gray-700 mb-1\">المنطقة</h4>\r\n              <p class=\"text-gray-900\">{{ destination.region_ar || destination.region_en }}</p>\r\n            </div>\r\n            <div v-if=\"destination.location_type_ar || destination.location_type_en\">\r\n              <h4 class=\"text-sm font-medium text-gray-700 mb-1\">نوع الموقع</h4>\r\n              <p class=\"text-gray-900\">{{ destination.location_type_ar || destination.location_type_en }}</p>\r\n            </div>\r\n            <div v-if=\"destination.destination_type_ar || destination.destination_type_en\">\r\n              <h4 class=\"text-sm font-medium text-gray-700 mb-1\">نوع الوجهة</h4>\r\n              <p class=\"text-gray-900\">{{ destination.destination_type_ar || destination.destination_type_en }}</p>\r\n            </div>\r\n            <div v-if=\"destination.coordinates\">\r\n              <h4 class=\"text-sm font-medium text-gray-700 mb-1\">الإحداثيات</h4>\r\n              <p class=\"text-gray-900 text-sm\">\r\n                {{ getCoordinates(destination.coordinates) }}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- معلومات إضافية -->\r\n      <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        <!-- معلومات النظام -->\r\n        <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n          <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">معلومات النظام</h3>\r\n          <div class=\"space-y-3\">\r\n            <div class=\"flex justify-between\">\r\n              <span class=\"text-sm text-gray-600\">معرف الوجهة</span>\r\n              <span class=\"text-sm font-medium text-gray-900\">{{ destination.id }}</span>\r\n            </div>\r\n            <div class=\"flex justify-between\">\r\n              <span class=\"text-sm text-gray-600\">تاريخ الإنشاء</span>\r\n              <span class=\"text-sm font-medium text-gray-900\">{{ formatDate(destination.created_at) }}</span>\r\n            </div>\r\n            <div class=\"flex justify-between\">\r\n              <span class=\"text-sm text-gray-600\">آخر تحديث</span>\r\n              <span class=\"text-sm font-medium text-gray-900\">{{ formatDate(destination.updated_at) }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- الإجراءات السريعة -->\r\n        <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n          <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">الإجراءات السريعة</h3>\r\n          <div class=\"space-y-3\">\r\n            <button\r\n              @click=\"toggleDestinationStatus\"\r\n              :class=\"destination.active ? 'bg-orange-100 text-orange-800 hover:bg-orange-200' : 'bg-green-100 text-green-800 hover:bg-green-200'\"\r\n              class=\"w-full px-4 py-2 rounded-lg transition-colors\"\r\n            >\r\n              {{ destination.active ? 'إلغاء التفعيل' : 'تفعيل الوجهة' }}\r\n            </button>\r\n            <button\r\n              @click=\"deleteDestination\"\r\n              class=\"w-full px-4 py-2 bg-red-100 text-red-800 rounded-lg hover:bg-red-200 transition-colors\"\r\n            >\r\n              حذف الوجهة\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- حالة عدم وجود الوجهة -->\r\n    <div v-else class=\"text-center py-12\">\r\n      <Icon name=\"material-symbols:place\" class=\"h-16 w-16 text-gray-300 mx-auto mb-4\" />\r\n      <h3 class=\"text-lg font-medium text-gray-900 mb-2\">الوجهة غير موجودة</h3>\r\n      <p class=\"text-gray-500 mb-6\">لم يتم العثور على الوجهة المطلوبة</p>\r\n      <NuxtLink\r\n        to=\"/admin/destinations\"\r\n        class=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n      >\r\n        العودة للقائمة\r\n      </NuxtLink>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n// Import components\r\nimport ImageUpload from '~/components/ui/ImageUpload.vue'\r\n\r\n// إعداد الصفحة\r\ndefinePageMeta({\r\n  layout: 'admin',\r\n  middleware: 'admin'\r\n})\r\n\r\n// الحصول على معرف الوجهة من الرابط\r\nconst route = useRoute()\r\nconst destinationId = route.params.id\r\n\r\n\r\n// تفعيل وضع التعديل\r\nconst enableEditMode = () => {\r\n  isEditing.value = true\r\n  \r\n  // ملء النموذج بالبيانات الحالية\r\n  if (destination.value) {\r\n    form.value = {\r\n      name_ar: destination.value.name_ar || '',\r\n      name_en: destination.value.name_en || '',\r\n      description_ar: destination.value.description_ar || '',\r\n      description_en: destination.value.description_en || '',\r\n      category: destination.value.category || 'international',\r\n      image_url: destination.value.image_url || destination.value.image || '',\r\n      active: destination.value.active === 1 || destination.value.active === true,\r\n      featured: destination.value.featured === 1 || destination.value.featured === true\r\n    }\r\n  }\r\n}\r\n\r\n// إلغاء وضع التعديل\r\nconst cancelEdit = () => {\r\n  isEditing.value = false\r\n}\r\n\r\n// معالجة رفع الصورة بنجاح\r\nconst handleImageUploadComplete = (fileInfo) => {\r\n  const { showSuccess } = useNotifications()\r\n  showSuccess('تم رفع الصورة', 'تم رفع الصورة بنجاح!')\r\n}\r\n\r\n// معالجة خطأ رفع الصورة\r\nconst handleImageUploadError = (error) => {\r\n  const { showError } = useNotifications()\r\n  showError('خطأ في رفع الصورة', error.message || 'حدث خطأ في رفع الصورة')\r\n}\r\n\r\n// حفظ التعديلات\r\nconst saveChanges = async () => {\r\n  const { showSuccess, showError, showWarning } = useNotifications()\r\n  \r\n  try {\r\n    updateLoading.value = true\r\n    \r\n    // التحقق من صحة البيانات\r\n    if (!form.value.name_ar || !form.value.name_en || !form.value.description_ar || !form.value.description_en) {\r\n      showWarning('حقول مطلوبة', 'يرجى ملء جميع الحقول المطلوبة')\r\n      return\r\n    }\r\n    \r\n    const result = await $fetch(`/api/destinations/${destinationId}`, {\r\n      method: 'PUT',\r\n      body: form.value\r\n    })\r\n    \r\n    if (result.success) {\r\n      // تحديث البيانات المحلية\r\n      destination.value = result.data\r\n      isEditing.value = false\r\n      showSuccess('تم الحفظ بنجاح', 'تم حفظ التغييرات بنجاح!')\r\n    } else {\r\n      showError('فشل في الحفظ', 'فشل في حفظ التغييرات. يرجى المحاولة مرة أخرى.')\r\n    }\r\n  } catch (error) {\r\n    console.error('خطأ في حفظ التغييرات:', error)\r\n    showError('خطأ في الحفظ', 'حدث خطأ في حفظ التغييرات. يرجى المحاولة مرة أخرى.')\r\n  } finally {\r\n    updateLoading.value = false\r\n  }\r\n}\r\n\r\n// المتغيرات التفاعلية\r\nconst loading = ref(true)\r\nconst destination = ref(null)\r\nconst isEditing = ref(false)\r\nconst updateLoading = ref(false)\r\nconst form = ref({\r\n  name_ar: '',\r\n  name_en: '',\r\n  description_ar: '',\r\n  description_en: '',\r\n  category: 'international',\r\n  image_url: '',\r\n  active: true,\r\n  featured: false\r\n})\r\n\r\n// تحميل بيانات الوجهة\r\nconst loadDestination = async () => {\r\n  const { showError } = useNotifications()\r\n  \r\n  try {\r\n    loading.value = true\r\n    const result = await $fetch(`/api/destinations/${destinationId}`)\r\n    \r\n    if (result.success && result.data) {\r\n      destination.value = result.data\r\n    } else {\r\n      destination.value = null\r\n    }\r\n  } catch (error) {\r\n    console.error('خطأ في تحميل بيانات الوجهة:', error)\r\n    destination.value = null\r\n    showError('خطأ في التحميل', 'حدث خطأ في تحميل بيانات الوجهة. يرجى المحاولة مرة أخرى.')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// تغيير حالة الوجهة\r\nconst toggleDestinationStatus = async () => {\r\n  const { showSuccess, showError } = useNotifications()\r\n  \r\n  if (!confirm(`هل أنت متأكد من ${destination.value.active ? 'إلغاء تفعيل' : 'تفعيل'} هذه الوجهة؟`)) return\r\n\r\n  try {\r\n    const newStatus = destination.value.active ? 'inactive' : 'active'\r\n    const newActiveValue = destination.value.active ? 0 : 1\r\n    \r\n    await $fetch(`/api/destinations/${destinationId}`, {\r\n      method: 'PUT',\r\n      body: {\r\n        ...destination.value,\r\n        active: newActiveValue,\r\n        status: newStatus\r\n      }\r\n    })\r\n    \r\n    destination.value.active = newActiveValue\r\n    destination.value.status = newStatus\r\n    \r\n    showSuccess(\r\n      'تم التحديث بنجاح', \r\n      `تم ${newStatus === 'active' ? 'تفعيل' : 'إلغاء تفعيل'} الوجهة بنجاح`\r\n    )\r\n  } catch (error) {\r\n    console.error('خطأ في تغيير حالة الوجهة:', error)\r\n    showError('خطأ في التحديث', 'حدث خطأ في تغيير حالة الوجهة. يرجى المحاولة مرة أخرى.')\r\n  }\r\n}\r\n\r\n// حذف الوجهة\r\nconst deleteDestination = async () => {\r\n  const { showSuccess, showError } = useNotifications()\r\n  \r\n  if (!confirm('هل أنت متأكد من حذف هذه الوجهة؟ لا يمكن التراجع عن هذا الإجراء.')) return\r\n\r\n  try {\r\n    await $fetch(`/api/destinations/${destinationId}`, { method: 'DELETE' })\r\n    showSuccess('تم الحذف بنجاح', 'تم حذف الوجهة بنجاح')\r\n    await navigateTo('/admin/destinations')\r\n  } catch (error) {\r\n    console.error('خطأ في حذف الوجهة:', error)\r\n    showError('خطأ في الحذف', 'حدث خطأ في حذف الوجهة. يرجى المحاولة مرة أخرى.')\r\n  }\r\n}\r\n\r\n// دوال المساعدة\r\nconst formatDate = (dateString) => {\r\n  const date = new Date(dateString)\r\n  return date.toLocaleDateString('ar-SA')\r\n}\r\n\r\nconst getCoordinates = (coordinates) => {\r\n  if (!coordinates) return ''\r\n  \r\n  try {\r\n    // If it's already an object, use it directly\r\n    if (typeof coordinates === 'object') {\r\n      return `${coordinates.latitude}, ${coordinates.longitude}`\r\n    }\r\n    \r\n    // If it's a string, try to parse it\r\n    if (typeof coordinates === 'string') {\r\n      const parsed = JSON.parse(coordinates)\r\n      return `${parsed.latitude}, ${parsed.longitude}`\r\n    }\r\n    \r\n    return ''\r\n  } catch (error) {\r\n    console.error('Error parsing coordinates:', error)\r\n    return ''\r\n  }\r\n}\r\n\r\nconst getTypeName = (type) => {\r\n  const types = {\r\n    saudi: 'سعودي',\r\n    international: 'عالمي'\r\n  }\r\n  return types[type] || type\r\n}\r\n\r\nconst getStatusName = (status) => {\r\n  const statuses = {\r\n    active: 'نشط',\r\n    inactive: 'غير نشط'\r\n  }\r\n  return statuses[status] || status\r\n}\r\n\r\nconst getStatusColor = (status) => {\r\n  const colors = {\r\n    active: 'bg-green-100 text-green-800',\r\n    inactive: 'bg-red-100 text-red-800'\r\n  }\r\n  return colors[status] || 'bg-gray-100 text-gray-800'\r\n}\r\n\r\n// تحميل البيانات عند تحميل الصفحة\r\nonMounted(() => {\r\n  loadDestination()\r\n})\r\n\r\n// SEO والميتا\r\nuseHead({\r\n  title: computed(() => `تفاصيل ${destination.value?.name_ar || 'الوجهة'} - Wonder Land Admin`),\r\n  meta: [\r\n    { name: 'description', content: 'تفاصيل الوجهة السياحية' },\r\n    { name: 'robots', content: 'noindex, nofollow' }\r\n  ]\r\n})\r\n</script>\r\n"],"version":3}