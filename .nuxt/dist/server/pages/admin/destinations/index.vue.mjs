import K from"../../../components/admin/AdminPageHeader.vue.mjs";import O from"../../../node_modules/_nuxt/icon/dist/runtime/components/index2.mjs";import U from"../../../node_modules/nuxt/dist/app/components/nuxt-link.mjs";import{ref as y,computed as D,watch as X,mergeProps as Y,withCtx as b,createVNode as d,unref as s,createTextVNode as Z,useSSRContext as I}from"vue";import{ssrRenderAttrs as ee,ssrRenderComponent as o,ssrRenderAttr as _,ssrIncludeBooleanAttr as v,ssrLooseContain as w,ssrLooseEqual as f,ssrRenderList as te,ssrInterpolate as g,ssrRenderClass as P}from"vue/server-renderer";import"F:/TravelinAgency/node_modules/hookable/dist/index.mjs";import{useExcelExport as se}from"../../../composables/useExcelExport.mjs";import{useHead as ae}from"../../../node_modules/nuxt/dist/head/runtime/composables/v3.mjs";const C=10,F={__name:"index",__ssrInlineRender:!0,setup(N){const h=y([]),L=y(!0),r=y(""),i=y(""),c=y(""),x=y(1),T=D(()=>{let t=h.value;return r.value&&(t=t.filter(e=>e.name_ar&&e.name_ar.toLowerCase().includes(r.value.toLowerCase())||e.name_en&&e.name_en.toLowerCase().includes(r.value.toLowerCase())||e.name&&e.name.toLowerCase().includes(r.value.toLowerCase())||e.description_ar&&e.description_ar.toLowerCase().includes(r.value.toLowerCase())||e.description_en&&e.description_en.toLowerCase().includes(r.value.toLowerCase())||e.description&&e.description.toLowerCase().includes(r.value.toLowerCase()))),i.value&&(t=t.filter(e=>e.category===i.value)),c.value&&(t=t.filter(e=>{const l=e.active===1||e.active===!0;return c.value==="active"?l:!l})),t.slice((x.value-1)*C,x.value*C)}),k=D(()=>{let t=h.value;return r.value&&(t=t.filter(e=>e.name_ar&&e.name_ar.toLowerCase().includes(r.value.toLowerCase())||e.name_en&&e.name_en.toLowerCase().includes(r.value.toLowerCase())||e.name&&e.name.toLowerCase().includes(r.value.toLowerCase())||e.description_ar&&e.description_ar.toLowerCase().includes(r.value.toLowerCase())||e.description_en&&e.description_en.toLowerCase().includes(r.value.toLowerCase())||e.description&&e.description.toLowerCase().includes(r.value.toLowerCase()))),i.value&&(t=t.filter(e=>e.category===i.value)),c.value&&(t=t.filter(e=>{const l=e.active===1||e.active===!0;return c.value==="active"?l:!l})),t.length}),j=D(()=>Math.ceil(k.value/C)),H=()=>{try{const{exportDestinationsToExcel:t}=se();t(h.value)?console.log("تم تصدير الوجهات بنجاح"):console.error("فشل في تصدير الوجهات")}catch(t){console.error("خطأ في تصدير الوجهات:",t)}},M=t=>new Date(t).toLocaleDateString("ar-SA"),V=(t,e)=>t?t.length>e?t.substring(0,e)+"...":t:"",q=t=>({saudi:"سعودي",international:"عالمي"})[t]||t,z=t=>({saudi:"bg-green-100 text-green-800",international:"bg-blue-100 text-blue-800"})[t]||"bg-gray-100 text-gray-800",B=t=>({active:"نشط",inactive:"غير نشط"})[t]||t,Q=t=>({active:"bg-green-100 text-green-800",inactive:"bg-red-100 text-red-800"})[t]||"bg-gray-100 text-gray-800";return X([r,i,c],()=>{x.value=1}),ae({title:"إدارة الوجهات - Wonder Land Admin",meta:[{name:"description",content:"إدارة وتحرير الوجهات السياحية"},{name:"robots",content:"noindex, nofollow"}]}),(t,e,l,W)=>{const G=K,n=O,$=U;e(`<div${ee(Y({class:"space-y-6"},W))}><div class="h-16"></div>`),e(o(G,{title:"إدارة الوجهات السياحية",description:"إدارة وتحرير الوجهات السياحية المتاحة"},{actions:b((a,m,p,u)=>{if(m)m(`<button class="inline-flex items-center px-3 sm:px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm"${u}>`),m(o(n,{name:"material-symbols:download",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"},null,p,u)),m(`<span class="hidden sm:inline"${u}>تصدير البيانات</span><span class="sm:hidden"${u}>تصدير</span></button>`),m(o($,{to:"/admin/destinations/create",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm"},{default:b((A,R,J,S)=>{if(R)R(o(n,{name:"material-symbols:add",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"},null,J,S)),R(`<span class="hidden sm:inline"${S}>إضافة وجهة جديدة</span><span class="sm:hidden"${S}>إضافة</span>`);else return[d(n,{name:"material-symbols:add",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),d("span",{class:"hidden sm:inline"},"إضافة وجهة جديدة"),d("span",{class:"sm:hidden"},"إضافة")]}),_:1},p,u));else return[d("button",{onClick:H,class:"inline-flex items-center px-3 sm:px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm"},[d(n,{name:"material-symbols:download",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),d("span",{class:"hidden sm:inline"},"تصدير البيانات"),d("span",{class:"sm:hidden"},"تصدير")]),d($,{to:"/admin/destinations/create",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm"},{default:b(()=>[d(n,{name:"material-symbols:add",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),d("span",{class:"hidden sm:inline"},"إضافة وجهة جديدة"),d("span",{class:"sm:hidden"},"إضافة")]),_:1})]}),_:1},l)),e('<div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6"><div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="relative">'),e(o(n,{name:"material-symbols:search",class:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"},null,l)),e(`<input${_("value",s(r))} type="text" placeholder="البحث في الوجهات..." class="w-full pr-10 pl-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></div><select class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"><option value=""${v(Array.isArray(s(i))?w(s(i),""):f(s(i),""))?" selected":""}>جميع الأنواع</option><option value="saudi"${v(Array.isArray(s(i))?w(s(i),"saudi"):f(s(i),"saudi"))?" selected":""}>سعودي</option><option value="international"${v(Array.isArray(s(i))?w(s(i),"international"):f(s(i),"international"))?" selected":""}>عالمي</option></select><select class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"><option value=""${v(Array.isArray(s(c))?w(s(c),""):f(s(c),""))?" selected":""}>جميع الحالات</option><option value="active"${v(Array.isArray(s(c))?w(s(c),"active"):f(s(c),"active"))?" selected":""}>نشط</option><option value="inactive"${v(Array.isArray(s(c))?w(s(c),"inactive"):f(s(c),"inactive"))?" selected":""}>غير نشط</option></select></div></div><div class="bg-white rounded-lg shadow-sm border border-gray-200">`),s(L)?(e('<div class="flex justify-center items-center py-12">'),e(o(n,{name:"material-symbols:progress-activity",class:"animate-spin h-8 w-8 text-blue-600"},null,l)),e('<span class="mr-3 text-gray-600">جارٍ تحميل الوجهات...</span></div>')):s(T).length>0?(e('<div class="overflow-x-auto"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"> الوجهة </th><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"> النوع </th><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"> الحالة </th><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"> تاريخ الإنشاء </th><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"> الإجراءات </th></tr></thead><tbody class="bg-white divide-y divide-gray-200"><!--[-->'),te(s(T),a=>{e(`<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap"><div class="flex items-center"><img${_("src",a.image||a.image_url||"/images/placeholder.jpg")}${_("alt",a.name_ar||a.name_en)} class="h-12 w-12 rounded-lg object-cover ml-4" loading="lazy"><div><div class="text-sm font-medium text-gray-900">${g(a.name_ar||a.name_en||a.name)}</div><div class="text-sm text-gray-500">${g(V(a.description_ar||a.description_en||a.description,50))}</div></div></div></td><td class="px-6 py-4 whitespace-nowrap"><span class="${P([z(a.category),"px-2 py-1 text-xs font-medium rounded-full"])}">${g(q(a.category))}</span></td><td class="px-6 py-4 whitespace-nowrap"><span class="${P([Q(a.active?"active":"inactive"),"px-2 py-1 text-xs font-medium rounded-full"])}">${g(B(a.active?"active":"inactive"))}</span></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${g(M(a.created_at))}</td><td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium"><div class="flex items-center space-x-2 space-x-reverse">`),e(o($,{to:`/admin/destinations/${a.id}`,class:"text-blue-600 hover:text-blue-900 p-1 rounded",title:"عرض"},{default:b((m,p,u,A)=>{if(p)p(o(n,{name:"material-symbols:visibility",class:"h-4 w-4"},null,u,A));else return[d(n,{name:"material-symbols:visibility",class:"h-4 w-4"})]}),_:2},l)),e(o($,{to:`/admin/destinations/${a.id}/edit`,class:"text-green-600 hover:text-green-900 p-1 rounded",title:"تحرير"},{default:b((m,p,u,A)=>{if(p)p(o(n,{name:"material-symbols:edit",class:"h-4 w-4"},null,u,A));else return[d(n,{name:"material-symbols:edit",class:"h-4 w-4"})]}),_:2},l)),e(`<button class="${P([a.active?"text-orange-600 hover:text-orange-900":"text-green-600 hover:text-green-900","p-1 rounded"])}"${_("title",a.active?"إلغاء التفعيل":"تفعيل")}>`),e(o(n,{name:a.active?"material-symbols:pause":"material-symbols:play-arrow",class:"h-4 w-4"},null,l)),e('</button><button class="text-red-600 hover:text-red-900 p-1 rounded" title="حذف">'),e(o(n,{name:"material-symbols:delete",class:"h-4 w-4"},null,l)),e("</button></div></td></tr>")}),e("<!--]--></tbody></table></div>")):(e('<div class="text-center py-12">'),e(o(n,{name:"material-symbols:place",class:"h-16 w-16 text-gray-300 mx-auto mb-4"},null,l)),e('<h3 class="text-lg font-medium text-gray-900 mb-2">لا توجد وجهات</h3><p class="text-gray-500 mb-6">لم يتم العثور على أي وجهات سياحية</p>'),e(o($,{to:"/admin/destinations/create",class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},{default:b((a,m,p,u)=>{if(m)m(o(n,{name:"material-symbols:add",class:"h-5 w-5 ml-2"},null,p,u)),m(" إضافة وجهة جديدة ");else return[d(n,{name:"material-symbols:add",class:"h-5 w-5 ml-2"}),Z(" إضافة وجهة جديدة ")]}),_:1},l)),e("</div>")),e("</div>"),s(j)>1?e(`<div class="flex items-center justify-between"><div class="text-sm text-gray-700"> عرض ${g((s(x)-1)*C+1)} إلى ${g(Math.min(s(x)*C,s(k)))} من أصل ${g(s(k))} وجهة </div><div class="flex space-x-1 space-x-reverse"><button${v(s(x)===1)?" disabled":""} class="px-3 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"> السابق </button><span class="px-3 py-2 text-sm bg-blue-600 text-white border border-blue-600 rounded-md">${g(s(x))}</span><button${v(s(x)===s(j))?" disabled":""} class="px-3 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"> التالي </button></div></div>`):e("<!---->"),e("</div>")}}},E=F.setup;F.setup=(N,h)=>{const L=I();return(L.modules||(L.modules=new Set)).add("pages/admin/destinations/index.vue"),E?E(N,h):void 0};export{F as default};
//# sourceMappingURL=index.vue.mjs.map
