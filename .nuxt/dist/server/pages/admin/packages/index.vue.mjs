import ne from"../../../components/admin/AdminPageHeader.vue.mjs";import oe from"../../../node_modules/_nuxt/icon/dist/runtime/components/index2.mjs";import ie from"../../../node_modules/nuxt/dist/app/components/nuxt-link.mjs";import re from"../../../components/admin/AdminFilters.vue.mjs";import ce from"../../../components/admin/AdminSearchInput.vue.mjs";import me from"../../../components/admin/AdminSelect.vue.mjs";import de from"../../../components/admin/AdminTable.vue.mjs";import ue from"../../../components/admin/AdminPagination.vue.mjs";import{navigateTo as U}from"../../../node_modules/nuxt/dist/app/composables/router.mjs";import{ref as C,computed as b,watch as ve,mergeProps as xe,withCtx as v,createVNode as l,unref as i,isRef as w,createTextVNode as fe,toDisplayString as h,useSSRContext as pe}from"vue";import{ssrRenderAttrs as ge,ssrRenderComponent as m,ssrInterpolate as _,ssrRenderClass as q,ssrRenderAttr as B}from"vue/server-renderer";import"F:/TravelinAgency/node_modules/hookable/dist/index.mjs";import{useExcelExport as ye}from"../../../composables/useExcelExport.mjs";import{useHead as be}from"../../../node_modules/nuxt/dist/head/runtime/composables/v3.mjs";const A=10,J={__name:"index",__ssrInlineRender:!0,setup(T){const x=C([]),L=C(!0),o=C(""),d=C(""),u=C(""),$=C(1),K=b(()=>{let t=x.value;return o.value&&(t=t.filter(e=>e.title_ar&&e.title_ar.toLowerCase().includes(o.value.toLowerCase())||e.title_en&&e.title_en.toLowerCase().includes(o.value.toLowerCase())||e.title&&e.title.toLowerCase().includes(o.value.toLowerCase())||e.description_ar&&e.description_ar.toLowerCase().includes(o.value.toLowerCase())||e.description_en&&e.description_en.toLowerCase().includes(o.value.toLowerCase())||e.description&&e.description.toLowerCase().includes(o.value.toLowerCase()))),d.value&&(t=t.filter(e=>e.status===d.value)),u.value&&(t=t.filter(e=>e.category===u.value)),t.slice(($.value-1)*A,$.value*A)}),E=b(()=>{let t=x.value;return o.value&&(t=t.filter(e=>e.title_ar&&e.title_ar.toLowerCase().includes(o.value.toLowerCase())||e.title_en&&e.title_en.toLowerCase().includes(o.value.toLowerCase())||e.title&&e.title.toLowerCase().includes(o.value.toLowerCase())||e.description_ar&&e.description_ar.toLowerCase().includes(o.value.toLowerCase())||e.description_en&&e.description_en.toLowerCase().includes(o.value.toLowerCase())||e.description&&e.description.toLowerCase().includes(o.value.toLowerCase()))),d.value&&(t=t.filter(e=>e.status===d.value)),u.value&&(t=t.filter(e=>e.category===u.value)),t.length}),X=b(()=>Math.ceil(E.value/A)),N=b(()=>[{value:"active",label:"نشط"},{value:"inactive",label:"غير نشط"},{value:"draft",label:"مسودة"}]),D=b(()=>[{value:"domestic",label:"محلي"},{value:"international",label:"دولي"},{value:"religious",label:"ديني"},{value:"adventure",label:"مغامرة"}]),Y=b(()=>[{key:"title",label:"الباقة"},{key:"category",label:"الفئة"},{key:"status",label:"الحالة"},{key:"price",label:"السعر"},{key:"created_at",label:"تاريخ الإنشاء"}]),Z=b(()=>[{key:"view",icon:"material-symbols:visibility",label:"عرض",class:"text-blue-600 hover:text-blue-900",title:"عرض",handler:t=>U(`/admin/packages/${t.id}`)},{key:"edit",icon:"material-symbols:edit",label:"تحرير",class:"text-green-600 hover:text-green-900",title:"تحرير",handler:t=>U(`/admin/packages/${t.id}/edit`)},{key:"toggle",icon:"material-symbols:play-arrow",label:"تفعيل",class:"text-orange-600 hover:text-orange-900",title:"تفعيل/إلغاء تفعيل",handler:t=>I(t)},{key:"delete",icon:"material-symbols:delete",label:"حذف",class:"text-red-600 hover:text-red-900",title:"حذف",handler:t=>k(t)}]),I=async t=>{try{const e=t.status==="active"?"inactive":"active",p=x.value.findIndex(P=>P.id===t.id);p!==-1&&(x.value[p].status=e),console.log(`تم ${e==="active"?"تفعيل":"إلغاء تفعيل"} الباقة بنجاح`)}catch(e){console.error("خطأ في تغيير حالة الباقة:",e)}},k=async t=>{if(confirm("هل أنت متأكد من حذف هذه الباقة؟ لا يمكن التراجع عن هذا الإجراء."))try{await $fetch(`/api/packages/${t.id}`,{method:"DELETE"}),x.value=x.value.filter(e=>e.id!==t.id),console.log("تم حذف الباقة بنجاح")}catch(e){console.error("خطأ في حذف الباقة:",e)}},ee=()=>{try{const{exportPackagesToExcel:t}=ye();t(x.value)?console.log("تم تصدير الباقات بنجاح"):console.error("فشل في تصدير الباقات")}catch(t){console.error("خطأ في تصدير الباقات:",t)}},j=t=>new Intl.NumberFormat("ar-SA",{style:"currency",currency:"SAR"}).format(t),F=t=>new Date(t).toLocaleDateString("ar-SA"),z=(t,e)=>t?t.length>e?t.substring(0,e)+"...":t:"",H=t=>({domestic:"محلي",international:"دولي",religious:"ديني",adventure:"مغامرة"})[t]||t,O=t=>({domestic:"bg-blue-100 text-blue-800",international:"bg-green-100 text-green-800",religious:"bg-purple-100 text-purple-800",adventure:"bg-orange-100 text-orange-800"})[t]||"bg-gray-100 text-gray-800",M=t=>({active:"نشط",inactive:"غير نشط",draft:"مسودة"})[t]||t,Q=t=>({active:"bg-green-100 text-green-800",inactive:"bg-red-100 text-red-800",draft:"bg-yellow-100 text-yellow-800"})[t]||"bg-gray-100 text-gray-800";return ve([o,d,u],()=>{$.value=1}),be({title:"إدارة الباقات - Wonder Land Admin",meta:[{name:"description",content:"إدارة وتحرير الباقات السياحية"},{name:"robots",content:"noindex, nofollow"}]}),(t,e,p,P)=>{const te=ne,f=oe,V=ie,ae=re,W=ce,S=me,le=de,se=ue;e(`<div${ge(xe({class:"space-y-6"},P))}><div class="h-16"></div>`),e(m(te,{title:"إدارة الباقات السياحية",description:"إدارة وتحرير الباقات السياحية المتاحة"},{actions:v((a,s,c,n)=>{if(s)s(`<button class="inline-flex items-center px-3 sm:px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm"${n}>`),s(m(f,{name:"material-symbols:download",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"},null,c,n)),s(`<span class="hidden sm:inline"${n}>تصدير البيانات</span><span class="sm:hidden"${n}>تصدير</span></button>`),s(m(V,{to:"/admin/packages/images",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm"},{default:v((r,g,R,y)=>{if(g)g(m(f,{name:"material-symbols:image",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"},null,R,y)),g(`<span class="hidden sm:inline"${y}>إدارة الصور</span><span class="sm:hidden"${y}>الصور</span>`);else return[l(f,{name:"material-symbols:image",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),l("span",{class:"hidden sm:inline"},"إدارة الصور"),l("span",{class:"sm:hidden"},"الصور")]}),_:1},c,n)),s(m(V,{to:"/admin/packages/create",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm"},{default:v((r,g,R,y)=>{if(g)g(m(f,{name:"material-symbols:add",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"},null,R,y)),g(`<span class="hidden sm:inline"${y}>إضافة باقة جديدة</span><span class="sm:hidden"${y}>إضافة</span>`);else return[l(f,{name:"material-symbols:add",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),l("span",{class:"hidden sm:inline"},"إضافة باقة جديدة"),l("span",{class:"sm:hidden"},"إضافة")]}),_:1},c,n));else return[l("button",{onClick:ee,class:"inline-flex items-center px-3 sm:px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm"},[l(f,{name:"material-symbols:download",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),l("span",{class:"hidden sm:inline"},"تصدير البيانات"),l("span",{class:"sm:hidden"},"تصدير")]),l(V,{to:"/admin/packages/images",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm"},{default:v(()=>[l(f,{name:"material-symbols:image",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),l("span",{class:"hidden sm:inline"},"إدارة الصور"),l("span",{class:"sm:hidden"},"الصور")]),_:1}),l(V,{to:"/admin/packages/create",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm"},{default:v(()=>[l(f,{name:"material-symbols:add",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),l("span",{class:"hidden sm:inline"},"إضافة باقة جديدة"),l("span",{class:"sm:hidden"},"إضافة")]),_:1})]}),_:1},p)),e(m(ae,null,{default:v((a,s,c,n)=>{if(s)s(m(W,{modelValue:i(o),"onUpdate:modelValue":r=>w(o)?o.value=r:null,placeholder:"البحث في الباقات..."},null,c,n)),s(m(S,{modelValue:i(d),"onUpdate:modelValue":r=>w(d)?d.value=r:null,options:i(N),placeholder:"جميع الحالات"},null,c,n)),s(m(S,{modelValue:i(u),"onUpdate:modelValue":r=>w(u)?u.value=r:null,options:i(D),placeholder:"جميع الفئات"},null,c,n));else return[l(W,{modelValue:i(o),"onUpdate:modelValue":r=>w(o)?o.value=r:null,placeholder:"البحث في الباقات..."},null,8,["modelValue","onUpdate:modelValue"]),l(S,{modelValue:i(d),"onUpdate:modelValue":r=>w(d)?d.value=r:null,options:i(N),placeholder:"جميع الحالات"},null,8,["modelValue","onUpdate:modelValue","options"]),l(S,{modelValue:i(u),"onUpdate:modelValue":r=>w(u)?u.value=r:null,options:i(D),placeholder:"جميع الفئات"},null,8,["modelValue","onUpdate:modelValue","options"])]}),_:1},p)),e(m(le,{items:i(K),columns:i(Y),actions:i(Z),loading:i(L),"empty-icon":"material-symbols:package-2-outline","empty-title":"لا توجد حزم","empty-description":"لم يتم العثور على أي حزم سياحية","empty-action":{label:"إضافة باقة جديدة",icon:"material-symbols:add",class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",handler:()=>("navigateTo"in t?t.navigateTo:i(U))("/admin/packages/create")}},{"column-title":v(({item:a},s,c,n)=>{if(s)s(`<div class="flex items-center"${n}><img${B("src",a.image||a.image_url||"/images/placeholder.jpg")}${B("alt",a.title_ar||a.title_en||a.title)} class="h-10 w-10 sm:h-12 sm:w-12 rounded-lg object-cover ml-3 sm:ml-4 flex-shrink-0" loading="lazy"${n}><div class="min-w-0 flex-1"${n}><div class="text-sm font-medium text-gray-900 truncate"${n}>${_(a.title_ar||a.title_en||a.title)}</div><div class="text-sm text-gray-500 truncate"${n}>${_(z(a.description_ar||a.description_en||a.description,30))}</div></div></div>`);else return[l("div",{class:"flex items-center"},[l("img",{src:a.image||a.image_url||"/images/placeholder.jpg",alt:a.title_ar||a.title_en||a.title,class:"h-10 w-10 sm:h-12 sm:w-12 rounded-lg object-cover ml-3 sm:ml-4 flex-shrink-0",loading:"lazy"},null,8,["src","alt"]),l("div",{class:"min-w-0 flex-1"},[l("div",{class:"text-sm font-medium text-gray-900 truncate"},h(a.title_ar||a.title_en||a.title),1),l("div",{class:"text-sm text-gray-500 truncate"},h(z(a.description_ar||a.description_en||a.description,30)),1)])])]}),"column-category":v(({item:a},s,c,n)=>{if(s)s(`<span class="${q([O(a.category),"px-2 py-1 text-xs font-medium rounded-full"])}"${n}>${_(H(a.category))}</span>`);else return[l("span",{class:[O(a.category),"px-2 py-1 text-xs font-medium rounded-full"]},h(H(a.category)),3)]}),"column-status":v(({item:a},s,c,n)=>{if(s)s(`<span class="${q([Q(a.status),"px-2 py-1 text-xs font-medium rounded-full"])}"${n}>${_(M(a.status))}</span>`);else return[l("span",{class:[Q(a.status),"px-2 py-1 text-xs font-medium rounded-full"]},h(M(a.status)),3)]}),"column-price":v(({item:a},s,c,n)=>{if(s)s(`<div${n}><div class="text-sm font-medium text-gray-900"${n}>${_(j(a.price))}</div><div class="text-sm text-gray-500"${n}>${_(a.currency||"SAR")}</div></div>`);else return[l("div",null,[l("div",{class:"text-sm font-medium text-gray-900"},h(j(a.price)),1),l("div",{class:"text-sm text-gray-500"},h(a.currency||"SAR"),1)])]}),"column-created_at":v(({item:a},s,c,n)=>{if(s)s(`${_(F(a.created_at))}`);else return[fe(h(F(a.created_at)),1)]}),_:1},p)),e(m(se,{"current-page":i($),"onUpdate:currentPage":a=>w($)?$.value=a:null,"total-pages":i(X),"total-items":i(E),"items-per-page":A,"item-name":"حزمة"},null,p)),e("</div>")}}},G=J.setup;J.setup=(T,x)=>{const L=pe();return(L.modules||(L.modules=new Set)).add("pages/admin/packages/index.vue"),G?G(T,x):void 0};export{J as default};
//# sourceMappingURL=index.vue.mjs.map
