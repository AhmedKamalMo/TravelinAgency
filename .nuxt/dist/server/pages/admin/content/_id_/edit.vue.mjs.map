{"version":3,"file":"edit.vue.mjs","sources":["../../../../../../../pages/admin/content/[id]/edit.vue"],"sourcesContent":["<template>\r\n  <div class=\"space-y-6\">\r\n    <!-- مساحة إضافية في الأعلى -->\r\n    <div class=\"h-16\"></div>\r\n    \r\n    <!-- رأس الصفحة -->\r\n    <div class=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\r\n      <div>\r\n        <h1 class=\"text-2xl font-bold text-gray-900\">تعديل الصفحة</h1>\r\n        <p class=\"mt-1 text-sm text-gray-600\">تعديل محتوى الصفحة</p>\r\n      </div>\r\n      <div class=\"mt-4 sm:mt-0 flex space-x-3 space-x-reverse\">\r\n        <NuxtLink\r\n          :to=\"`/admin/content/${pageId}`\"\r\n          class=\"inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors\"\r\n        >\r\n          <Icon name=\"material-symbols:visibility\" class=\"h-5 w-5 ml-2\" />\r\n          عرض\r\n        </NuxtLink>\r\n        <NuxtLink\r\n          to=\"/admin/content\"\r\n          class=\"inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors\"\r\n        >\r\n          <Icon name=\"material-symbols:arrow-back\" class=\"h-5 w-5 ml-2\" />\r\n          العودة للقائمة\r\n        </NuxtLink>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- حالة التحميل -->\r\n    <div v-if=\"loading\" class=\"flex justify-center items-center py-12\">\r\n      <Icon name=\"material-symbols:progress-activity\" class=\"animate-spin h-8 w-8 text-blue-600\" />\r\n      <span class=\"mr-3 text-gray-600\">جارٍ تحميل الصفحة...</span>\r\n    </div>\r\n\r\n    <!-- نموذج التعديل -->\r\n    <div v-else-if=\"page\" class=\"bg-white rounded-lg shadow-sm border border-gray-200\">\r\n      <form @submit.prevent=\"updatePage\" class=\"p-6 space-y-6\">\r\n        <!-- معلومات أساسية -->\r\n        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          <!-- العنوان بالعربية -->\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              العنوان بالعربية *\r\n            </label>\r\n            <input\r\n              v-model=\"form.title_ar\"\r\n              type=\"text\"\r\n              required\r\n              class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              placeholder=\"أدخل العنوان بالعربية\"\r\n            />\r\n          </div>\r\n\r\n          <!-- العنوان بالإنجليزية -->\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              العنوان بالإنجليزية *\r\n            </label>\r\n            <input\r\n              v-model=\"form.title_en\"\r\n              type=\"text\"\r\n              required\r\n              class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              placeholder=\"Enter title in English\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <!-- النوع والحالة -->\r\n        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          <!-- النوع -->\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              نوع المحتوى *\r\n            </label>\r\n            <select\r\n              v-model=\"form.type\"\r\n              required\r\n              class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n            >\r\n              <option value=\"\">اختر النوع</option>\r\n              <option value=\"page\">صفحة</option>\r\n              <option value=\"post\">مقال</option>\r\n              <option value=\"news\">أخبار</option>\r\n            </select>\r\n          </div>\r\n\r\n          <!-- الحالة -->\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              الحالة *\r\n            </label>\r\n            <select\r\n              v-model=\"form.status\"\r\n              required\r\n              class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n            >\r\n              <option value=\"draft\">مسودة</option>\r\n              <option value=\"published\">منشور</option>\r\n              <option value=\"archived\">مؤرشف</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- المحتوى بالعربية -->\r\n        <div>\r\n          <label class=\"block text-sm font-medium text-gray-700 mb-2\">\r\n            المحتوى بالعربية *\r\n          </label>\r\n          <WYSIWYGEditor\r\n            v-model=\"form.content_ar\"\r\n            placeholder=\"أدخل المحتوى بالعربية\"\r\n          />\r\n        </div>\r\n\r\n        <!-- المحتوى بالإنجليزية -->\r\n        <div>\r\n          <label class=\"block text-sm font-medium text-gray-700 mb-2\">\r\n            المحتوى بالإنجليزية *\r\n          </label>\r\n          <WYSIWYGEditor\r\n            v-model=\"form.content_en\"\r\n            placeholder=\"Enter content in English\"\r\n          />\r\n        </div>\r\n\r\n        <!-- SEO -->\r\n        <div class=\"border-t pt-6\">\r\n          <h3 class=\"text-lg font-medium text-gray-900 mb-4\">إعدادات SEO</h3>\r\n          <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            <!-- Meta Description بالعربية -->\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                وصف الصفحة بالعربية\r\n              </label>\r\n              <textarea\r\n                v-model=\"form.meta_description_ar\"\r\n                rows=\"3\"\r\n                class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                placeholder=\"وصف مختصر للصفحة بالعربية\"\r\n              ></textarea>\r\n            </div>\r\n\r\n            <!-- Meta Description بالإنجليزية -->\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                وصف الصفحة بالإنجليزية\r\n              </label>\r\n              <textarea\r\n                v-model=\"form.meta_description_en\"\r\n                rows=\"3\"\r\n                class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                placeholder=\"Brief page description in English\"\r\n              ></textarea>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- أزرار الإجراءات -->\r\n        <div class=\"flex items-center justify-end space-x-3 space-x-reverse pt-6 border-t\">\r\n          <NuxtLink\r\n            :to=\"`/admin/content/${pageId}`\"\r\n            class=\"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors\"\r\n          >\r\n            إلغاء\r\n          </NuxtLink>\r\n          <button\r\n            type=\"submit\"\r\n            :disabled=\"saving\"\r\n            class=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center\"\r\n          >\r\n            <Icon v-if=\"saving\" name=\"material-symbols:progress-activity\" class=\"animate-spin h-4 w-4 ml-2\" />\r\n            {{ saving ? 'جاري الحفظ...' : 'حفظ التغييرات' }}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n\r\n    <!-- حالة عدم وجود الصفحة -->\r\n    <div v-else class=\"text-center py-12\">\r\n      <Icon name=\"material-symbols:article\" class=\"h-16 w-16 text-gray-300 mx-auto mb-4\" />\r\n      <h3 class=\"text-lg font-medium text-gray-900 mb-2\">الصفحة غير موجودة</h3>\r\n      <p class=\"text-gray-500 mb-6\">لم يتم العثور على الصفحة المطلوبة</p>\r\n      <NuxtLink\r\n        to=\"/admin/content\"\r\n        class=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n      >\r\n        العودة للقائمة\r\n      </NuxtLink>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n// إعداد الصفحة\r\ndefinePageMeta({\r\n  layout: 'admin',\r\n  middleware: 'admin'\r\n})\r\n\r\n// الحصول على معرف الصفحة\r\nconst route = useRoute()\r\nconst pageId = route.params.id\r\n\r\n// المتغيرات التفاعلية\r\nconst page = ref(null)\r\nconst loading = ref(true)\r\nconst saving = ref(false)\r\n\r\n// نموذج البيانات\r\nconst form = ref({\r\n  title_ar: '',\r\n  title_en: '',\r\n  content_ar: '',\r\n  content_en: '',\r\n  type: '',\r\n  status: 'draft',\r\n  meta_description_ar: '',\r\n  meta_description_en: ''\r\n})\r\n\r\n// تحميل الصفحة\r\nconst loadPage = async () => {\r\n  try {\r\n    loading.value = true\r\n    const response = await $fetch(`/api/content/${pageId}`)\r\n    \r\n    if (response.success && response.page) {\r\n      page.value = response.page\r\n      // ملء النموذج بالبيانات الحالية\r\n      form.value = {\r\n        title_ar: page.value.title_ar || '',\r\n        title_en: page.value.title_en || '',\r\n        content_ar: page.value.content_ar || '',\r\n        content_en: page.value.content_en || '',\r\n        type: page.value.type || '',\r\n        status: page.value.status || 'draft',\r\n        meta_description_ar: page.value.meta_description_ar || '',\r\n        meta_description_en: page.value.meta_description_en || ''\r\n      }\r\n    } else {\r\n      page.value = null\r\n    }\r\n  } catch (error) {\r\n    console.error('خطأ في تحميل الصفحة:', error)\r\n    page.value = null\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// تحديث الصفحة\r\nconst updatePage = async () => {\r\n  try {\r\n    saving.value = true\r\n    \r\n    const response = await $fetch(`/api/content/${pageId}`, {\r\n      method: 'PUT',\r\n      body: form.value\r\n    })\r\n    \r\n    if (response.success) {\r\n      // إعادة توجيه إلى صفحة العرض\r\n      await navigateTo(`/admin/content/${pageId}`)\r\n    } else {\r\n      console.error('خطأ في تحديث الصفحة:', response.error)\r\n    }\r\n  } catch (error) {\r\n    console.error('خطأ في تحديث الصفحة:', error)\r\n  } finally {\r\n    saving.value = false\r\n  }\r\n}\r\n\r\n// تحميل البيانات عند تحميل الصفحة\r\nonMounted(() => {\r\n  loadPage()\r\n})\r\n\r\n// SEO والميتا\r\nuseHead({\r\n  title: computed(() => page.value ? `تعديل ${page.value.title_ar || page.value.title_en} - Wonder Land Admin` : 'تعديل الصفحة - Wonder Land Admin'),\r\n  meta: [\r\n    { name: 'description', content: 'تعديل محتوى الصفحة' },\r\n    { name: 'robots', content: 'noindex, nofollow' }\r\n  ]\r\n})\r\n</script>\r\n"],"names":["pageId","useRoute","page","ref","loading","saving","form","useHead","computed"],"mappings":"qyBA2MA,MAAMA,EADQC,EAAU,EACH,OAAO,GAGtBC,EAAOC,EAAI,IAAI,EACfC,EAAUD,EAAI,EAAI,EAClBE,EAASF,EAAI,EAAK,EAGlBG,EAAOH,EAAI,CACf,SAAU,GACV,SAAU,GACV,WAAY,GACZ,WAAY,GACZ,KAAM,GACN,OAAQ,QACR,oBAAqB,GACrB,oBAAqB,EACvB,CAAC,EA6DD,OAAAI,EAAQ,CACN,MAAOC,EAAS,IAAMN,EAAK,MAAQ,SAASA,EAAK,MAAM,UAAYA,EAAK,MAAM,QAAQ,uBAAyB,kCAAkC,EACjJ,KAAM,CACJ,CAAE,KAAM,cAAe,QAAS,oBAAsB,EACtD,CAAE,KAAM,SAAU,QAAS,mBAAqB,CACjD,CACH,CAAC"}