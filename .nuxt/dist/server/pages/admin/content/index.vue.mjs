import Y from"../../../components/admin/AdminPageHeader.vue.mjs";import I from"../../../node_modules/nuxt/dist/app/components/nuxt-link.mjs";import ee from"../../../node_modules/_nuxt/icon/dist/runtime/components/index2.mjs";import te from"../../../components/admin/AdminStats.vue.mjs";import{ref as C,computed as f,watch as se,mergeProps as ae,withCtx as g,createVNode as a,unref as s,createTextVNode as le,useSSRContext as ne}from"vue";import{ssrRenderAttrs as re,ssrRenderComponent as n,ssrRenderAttr as M,ssrIncludeBooleanAttr as w,ssrLooseContain as A,ssrLooseEqual as k,ssrRenderList as ie,ssrInterpolate as $,ssrRenderClass as B}from"vue/server-renderer";import"F:/TravelinAgency/node_modules/hookable/dist/index.mjs";import"F:/TravelinAgency/node_modules/klona/dist/index.mjs";import{useHead as oe}from"../../../node_modules/nuxt/dist/head/runtime/composables/v3.mjs";const S=10,V={__name:"index",__ssrInlineRender:!0,setup(N){const v=C([]),j=C(!0),c=C(""),o=C(""),d=C(""),L=C(1),O=f(()=>{let t=v.value;return c.value&&(t=t.filter(e=>e.title_ar&&e.title_ar.toLowerCase().includes(c.value.toLowerCase())||e.title_en&&e.title_en.toLowerCase().includes(c.value.toLowerCase())||e.title&&e.title.toLowerCase().includes(c.value.toLowerCase())||e.content_ar&&e.content_ar.toLowerCase().includes(c.value.toLowerCase())||e.content_en&&e.content_en.toLowerCase().includes(c.value.toLowerCase())||e.content&&e.content.toLowerCase().includes(c.value.toLowerCase()))),o.value&&(t=t.filter(e=>e.status===o.value)),d.value&&(t=t.filter(e=>e.type===d.value)),t.slice((L.value-1)*S,L.value*S)}),D=f(()=>{let t=v.value;return c.value&&(t=t.filter(e=>e.title_ar&&e.title_ar.toLowerCase().includes(c.value.toLowerCase())||e.title_en&&e.title_en.toLowerCase().includes(c.value.toLowerCase())||e.title&&e.title.toLowerCase().includes(c.value.toLowerCase())||e.content_ar&&e.content_ar.toLowerCase().includes(c.value.toLowerCase())||e.content_en&&e.content_en.toLowerCase().includes(c.value.toLowerCase())||e.content&&e.content.toLowerCase().includes(c.value.toLowerCase()))),o.value&&(t=t.filter(e=>e.status===o.value)),d.value&&(t=t.filter(e=>e.type===d.value)),t.length}),T=f(()=>Math.ceil(D.value/S)),W=f(()=>v.value.length),q=f(()=>v.value.filter(t=>t.status==="published").length),z=f(()=>v.value.filter(t=>t.status==="draft").length),Q=f(()=>{const t=new Date;return t.setHours(0,0,0,0),v.value.filter(e=>new Date(e.created_at)>=t).length}),Z=f(()=>[{key:"total",label:"إجمالي الصفحات",value:W.value,icon:"material-symbols:article",iconBg:"bg-blue-100",iconColor:"text-blue-600"},{key:"published",label:"منشور",value:q.value,icon:"material-symbols:visibility",iconBg:"bg-green-100",iconColor:"text-green-600"},{key:"draft",label:"مسودة",value:z.value,icon:"material-symbols:edit",iconBg:"bg-orange-100",iconColor:"text-orange-600"},{key:"today",label:"اليوم",value:Q.value,icon:"material-symbols:today",iconBg:"bg-purple-100",iconColor:"text-purple-600"}]);f(()=>{const t=v.value.reduce((e,r)=>(e[r.type]=(e[r.type]||0)+1,e),{});return{labels:Object.keys(t).map(e=>_(e)),datasets:[{data:Object.values(t),backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)"],borderColor:["rgb(59, 130, 246)","rgb(16, 185, 129)","rgb(245, 158, 11)","rgb(239, 68, 68)"]}]}}),f(()=>{const t=v.value.reduce((e,r)=>(e[r.status]=(e[r.status]||0)+1,e),{});return{labels:Object.keys(t).map(e=>E(e)),datasets:[{data:Object.values(t),backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(245, 158, 11, 0.8)","rgba(107, 114, 128, 0.8)"],borderColor:["rgb(34, 197, 94)","rgb(245, 158, 11)","rgb(107, 114, 128)"]}]}}),f(()=>{const t={},e=["يناير","فبراير","مارس","أبريل","مايو","يونيو"];return e.forEach(r=>{t[r]=0}),v.value.forEach(r=>{if(r.status==="published"){const R=new Date(r.created_at).getMonth();R<6&&t[e[R]]++}}),{labels:e,datasets:[{label:"عدد الصفحات المنشورة",data:Object.values(t),backgroundColor:"rgba(139, 92, 246, 0.8)",borderColor:"rgb(139, 92, 246)",borderWidth:1}]}}),C({plugins:{legend:{position:"bottom",labels:{padding:15,usePointStyle:!0}}}}),C({plugins:{legend:{position:"bottom",labels:{padding:15,usePointStyle:!0}}}}),C({plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}});const G=t=>new Date(t).toLocaleDateString("ar-SA"),J=(t,e)=>t?t.length>e?t.substring(0,e)+"...":t:"",_=t=>({page:"صفحة",post:"مقال",news:"أخبار"})[t]||t,K=t=>({page:"bg-blue-100 text-blue-800",post:"bg-green-100 text-green-800",news:"bg-purple-100 text-purple-800"})[t]||"bg-gray-100 text-gray-800",E=t=>({published:"منشور",draft:"مسودة",archived:"مؤرشف"})[t]||t,U=t=>({published:"bg-green-100 text-green-800",draft:"bg-orange-100 text-orange-800",archived:"bg-gray-100 text-gray-800"})[t]||"bg-gray-100 text-gray-800";return se([c,o,d],()=>{L.value=1}),oe({title:"إدارة المحتوى - Wonder Land Admin",meta:[{name:"description",content:"إدارة صفحات الموقع والمحتوى"},{name:"robots",content:"noindex, nofollow"}]}),(t,e,r,H)=>{const R=Y,y=I,l=ee,X=te;e(`<div${re(ae({class:"space-y-6"},H))}><div class="h-16"></div>`),e(n(R,{title:"إدارة المحتوى",description:"إدارة صفحات الموقع والمحتوى"},{actions:g((i,x,m,p)=>{if(x)x(n(y,{to:"/admin/content/analytics",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-sm"},{default:g((h,u,P,b)=>{if(u)u(n(l,{name:"material-symbols:analytics",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"},null,P,b)),u(`<span class="hidden sm:inline"${b}>الإحصائيات</span><span class="sm:hidden"${b}>إحصائيات</span>`);else return[a(l,{name:"material-symbols:analytics",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),a("span",{class:"hidden sm:inline"},"الإحصائيات"),a("span",{class:"sm:hidden"},"إحصائيات")]}),_:1},m,p)),x(n(y,{to:"/admin/content/templates",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm"},{default:g((h,u,P,b)=>{if(u)u(n(l,{name:"material-symbols:widgets",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"},null,P,b)),u(`<span class="hidden sm:inline"${b}>القوالب</span><span class="sm:hidden"${b}>قوالب</span>`);else return[a(l,{name:"material-symbols:widgets",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),a("span",{class:"hidden sm:inline"},"القوالب"),a("span",{class:"sm:hidden"},"قوالب")]}),_:1},m,p)),x(n(y,{to:"/admin/content/editor",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm"},{default:g((h,u,P,b)=>{if(u)u(n(l,{name:"material-symbols:edit",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"},null,P,b)),u(`<span class="hidden sm:inline"${b}>محرر المحتوى</span><span class="sm:hidden"${b}>محرر</span>`);else return[a(l,{name:"material-symbols:edit",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),a("span",{class:"hidden sm:inline"},"محرر المحتوى"),a("span",{class:"sm:hidden"},"محرر")]}),_:1},m,p)),x(n(y,{to:"/admin/content/create",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm"},{default:g((h,u,P,b)=>{if(u)u(n(l,{name:"material-symbols:add",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"},null,P,b)),u(`<span class="hidden sm:inline"${b}>إضافة صفحة جديدة</span><span class="sm:hidden"${b}>إضافة</span>`);else return[a(l,{name:"material-symbols:add",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),a("span",{class:"hidden sm:inline"},"إضافة صفحة جديدة"),a("span",{class:"sm:hidden"},"إضافة")]}),_:1},m,p));else return[a(y,{to:"/admin/content/analytics",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-sm"},{default:g(()=>[a(l,{name:"material-symbols:analytics",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),a("span",{class:"hidden sm:inline"},"الإحصائيات"),a("span",{class:"sm:hidden"},"إحصائيات")]),_:1}),a(y,{to:"/admin/content/templates",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm"},{default:g(()=>[a(l,{name:"material-symbols:widgets",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),a("span",{class:"hidden sm:inline"},"القوالب"),a("span",{class:"sm:hidden"},"قوالب")]),_:1}),a(y,{to:"/admin/content/editor",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm"},{default:g(()=>[a(l,{name:"material-symbols:edit",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),a("span",{class:"hidden sm:inline"},"محرر المحتوى"),a("span",{class:"sm:hidden"},"محرر")]),_:1}),a(y,{to:"/admin/content/create",class:"inline-flex items-center px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm"},{default:g(()=>[a(l,{name:"material-symbols:add",class:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),a("span",{class:"hidden sm:inline"},"إضافة صفحة جديدة"),a("span",{class:"sm:hidden"},"إضافة")]),_:1})]}),_:1},r)),e(n(X,{stats:s(Z)},null,r)),e('<div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6"><div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="relative">'),e(n(l,{name:"material-symbols:search",class:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"},null,r)),e(`<input${M("value",s(c))} type="text" placeholder="البحث في الصفحات..." class="w-full pr-10 pl-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></div><select class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"><option value=""${w(Array.isArray(s(o))?A(s(o),""):k(s(o),""))?" selected":""}>جميع الحالات</option><option value="published"${w(Array.isArray(s(o))?A(s(o),"published"):k(s(o),"published"))?" selected":""}>منشور</option><option value="draft"${w(Array.isArray(s(o))?A(s(o),"draft"):k(s(o),"draft"))?" selected":""}>مسودة</option><option value="archived"${w(Array.isArray(s(o))?A(s(o),"archived"):k(s(o),"archived"))?" selected":""}>مؤرشف</option></select><select class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"><option value=""${w(Array.isArray(s(d))?A(s(d),""):k(s(d),""))?" selected":""}>جميع الأنواع</option><option value="page"${w(Array.isArray(s(d))?A(s(d),"page"):k(s(d),"page"))?" selected":""}>صفحة</option><option value="post"${w(Array.isArray(s(d))?A(s(d),"post"):k(s(d),"post"))?" selected":""}>مقال</option><option value="news"${w(Array.isArray(s(d))?A(s(d),"news"):k(s(d),"news"))?" selected":""}>أخبار</option></select></div></div><div class="bg-white rounded-lg shadow-sm border border-gray-200">`),s(j)?(e('<div class="flex justify-center items-center py-12">'),e(n(l,{name:"material-symbols:progress-activity",class:"animate-spin h-8 w-8 text-blue-600"},null,r)),e('<span class="mr-3 text-gray-600">جارٍ تحميل الصفحات...</span></div>')):s(O).length>0?(e('<div class="overflow-x-auto"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"> الصفحة </th><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"> النوع </th><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"> الحالة </th><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"> تاريخ الإنشاء </th><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"> الإجراءات </th></tr></thead><tbody class="bg-white divide-y divide-gray-200"><!--[-->'),ie(s(O),i=>{e('<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap"><div class="flex items-center"><div class="flex-shrink-0 h-10 w-10"><div class="h-10 w-10 rounded-lg bg-gray-300 flex items-center justify-center">'),e(n(l,{name:"material-symbols:article",class:"h-6 w-6 text-gray-600"},null,r)),e(`</div></div><div class="mr-4"><div class="text-sm font-medium text-gray-900">${$(i.title_ar||i.title_en||i.title)}</div><div class="text-sm text-gray-500">${$(J(i.content_ar||i.content_en||i.content,50))}</div></div></div></td><td class="px-6 py-4 whitespace-nowrap"><span class="${B([K(i.type),"px-2 py-1 text-xs font-medium rounded-full"])}">${$(_(i.type))}</span></td><td class="px-6 py-4 whitespace-nowrap"><span class="${B([U(i.status),"px-2 py-1 text-xs font-medium rounded-full"])}">${$(E(i.status))}</span></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${$(G(i.created_at))}</td><td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium"><div class="flex items-center space-x-2 space-x-reverse">`),e(n(y,{to:`/admin/content/preview/${i.id}`,class:"text-blue-600 hover:text-blue-900 p-1 rounded",title:"معاينة"},{default:g((x,m,p,h)=>{if(m)m(n(l,{name:"material-symbols:visibility",class:"h-4 w-4"},null,p,h));else return[a(l,{name:"material-symbols:visibility",class:"h-4 w-4"})]}),_:2},r)),e(n(y,{to:`/admin/content/editor?page=${i.id}`,class:"text-purple-600 hover:text-purple-900 p-1 rounded",title:"تحرير متقدم"},{default:g((x,m,p,h)=>{if(m)m(n(l,{name:"material-symbols:design-services",class:"h-4 w-4"},null,p,h));else return[a(l,{name:"material-symbols:design-services",class:"h-4 w-4"})]}),_:2},r)),e(n(y,{to:`/admin/content/${i.id}/edit`,class:"text-green-600 hover:text-green-900 p-1 rounded",title:"تحرير"},{default:g((x,m,p,h)=>{if(m)m(n(l,{name:"material-symbols:edit",class:"h-4 w-4"},null,p,h));else return[a(l,{name:"material-symbols:edit",class:"h-4 w-4"})]}),_:2},r)),e(`<button class="${B([i.status==="published"?"text-orange-600 hover:text-orange-900":"text-green-600 hover:text-green-900","p-1 rounded"])}"${M("title",i.status==="published"?"إلغاء النشر":"نشر")}>`),e(n(l,{name:i.status==="published"?"material-symbols:visibility-off":"material-symbols:visibility",class:"h-4 w-4"},null,r)),e('</button><button class="text-red-600 hover:text-red-900 p-1 rounded" title="حذف">'),e(n(l,{name:"material-symbols:delete",class:"h-4 w-4"},null,r)),e("</button></div></td></tr>")}),e("<!--]--></tbody></table></div>")):(e('<div class="text-center py-12">'),e(n(l,{name:"material-symbols:article",class:"h-16 w-16 text-gray-300 mx-auto mb-4"},null,r)),e('<h3 class="text-lg font-medium text-gray-900 mb-2">لا توجد صفحات</h3><p class="text-gray-500 mb-6">لم يتم العثور على أي صفحات</p>'),e(n(y,{to:"/admin/content/create",class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},{default:g((i,x,m,p)=>{if(x)x(n(l,{name:"material-symbols:add",class:"h-5 w-5 ml-2"},null,m,p)),x(" إضافة صفحة جديدة ");else return[a(l,{name:"material-symbols:add",class:"h-5 w-5 ml-2"}),le(" إضافة صفحة جديدة ")]}),_:1},r)),e("</div>")),e("</div>"),s(T)>1?e(`<div class="flex items-center justify-between"><div class="text-sm text-gray-700"> عرض ${$((s(L)-1)*S+1)} إلى ${$(Math.min(s(L)*S,s(D)))} من أصل ${$(s(D))} صفحة </div><div class="flex space-x-1 space-x-reverse"><button${w(s(L)===1)?" disabled":""} class="px-3 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"> السابق </button><span class="px-3 py-2 text-sm bg-blue-600 text-white border border-blue-600 rounded-md">${$(s(L))}</span><button${w(s(L)===s(T))?" disabled":""} class="px-3 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"> التالي </button></div></div>`):e("<!---->"),e("</div>")}}},F=V.setup;V.setup=(N,v)=>{const j=ne();return(j.modules||(j.modules=new Set)).add("pages/admin/content/index.vue"),F?F(N,v):void 0};export{V as default};
//# sourceMappingURL=index.vue.mjs.map
