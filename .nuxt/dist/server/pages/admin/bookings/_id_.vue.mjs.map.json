{"file":"_id_.vue.mjs","mappings":"mrBA+NM,MAAAA,EADQC,EAAS,EACC,OAAO,GAGzBC,EAAUC,EAAI,EAAI,EAClBC,EAAUD,EAAI,IAAI,EAiBlBE,EAAcC,GACbA,EACQ,IAAI,KAAKA,CAAU,EACpB,mBAAmB,OAAO,EAFd,WAKpBC,EAAkBD,GACjBA,EACQ,IAAI,KAAKA,CAAU,EACpB,eAAe,OAAO,EAFV,WAKpBE,EAAeC,GACdA,EACE,IAAI,KAAK,aAAa,QAAS,CACpC,MAAO,WACP,SAAU,KAAA,CACX,EAAE,OAAOA,CAAK,EAJI,WAOfC,EAAiBC,IACJ,CACf,UAAW,QACX,QAAS,cACT,UAAW,QACX,UAAW,QACb,GACgBA,CAAM,GAAKA,EAGvBC,EAAkBD,IACP,CACb,UAAW,8BACX,QAAS,gCACT,UAAW,0BACX,UAAW,2BACb,GACcA,CAAM,GAAK,4BAGrBE,EAAwBF,IACX,CACf,KAAM,QACN,QAAS,eACT,QAAS,cACT,SAAU,OACZ,GACgBA,CAAM,GAAKA,EAGvBG,EAAyBH,IACd,CACb,KAAM,8BACN,QAAS,gCACT,QAAS,gCACT,SAAU,yBACZ,GACcA,CAAM,GAAK,4BASnB,OAAAI,EAAA,CACN,MAAO,cAAcf,CAAS,uBAC9B,KAAM,CACJ,CAAE,KAAM,cAAe,QAAS,kBAAmB,EACnD,CAAE,KAAM,SAAU,QAAS,mBAAoB,CAAA,CACjD,CACD","names":["bookingId","useRoute","loading","ref","booking","formatDate","dateString","formatDateTime","formatPrice","price","getStatusName","status","getStatusColor","getPaymentStatusName","getPaymentStatusColor","useHead"],"sources":["../../../../../../pages/admin/bookings/[id].vue"],"sourcesContent":["<template>\r\n  <div class=\"space-y-6\">\r\n    <!-- مساحة إضافية في الأعلى -->\r\n    <div class=\"h-16\"></div>\r\n    \r\n    <!-- رأس الصفحة -->\r\n    <div class=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\r\n      <div>\r\n        <h1 class=\"text-2xl font-bold text-gray-900\">عرض الحجز</h1>\r\n        <p class=\"mt-1 text-sm text-gray-600\">تفاصيل الحجز #{{ booking?.booking_number || bookingId }}</p>\r\n      </div>\r\n      <div class=\"mt-4 sm:mt-0 flex space-x-3 space-x-reverse\">\r\n        <NuxtLink\r\n          :to=\"`/admin/bookings/${bookingId}/edit`\"\r\n          class=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n        >\r\n          <Icon name=\"material-symbols:edit\" class=\"h-5 w-5 ml-2\" />\r\n          تحرير\r\n        </NuxtLink>\r\n        <NuxtLink\r\n          to=\"/admin/bookings\"\r\n          class=\"inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors\"\r\n        >\r\n          <Icon name=\"material-symbols:arrow-back\" class=\"h-5 w-5 ml-2\" />\r\n          العودة\r\n        </NuxtLink>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- حالة التحميل -->\r\n    <div v-if=\"loading\" class=\"flex justify-center items-center py-12\">\r\n      <Icon name=\"material-symbols:progress-activity\" class=\"animate-spin h-8 w-8 text-blue-600\" />\r\n      <span class=\"mr-3 text-gray-600\">جارٍ تحميل الحجز...</span>\r\n    </div>\r\n\r\n    <!-- تفاصيل الحجز -->\r\n    <div v-else-if=\"booking\" class=\"space-y-6\">\r\n      <!-- معلومات الحجز الأساسية -->\r\n      <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n        <div class=\"flex items-center justify-between mb-6\">\r\n          <h2 class=\"text-lg font-semibold text-gray-900\">معلومات الحجز</h2>\r\n          <div class=\"flex space-x-2 space-x-reverse\">\r\n            <span :class=\"getStatusColor(booking.booking_status)\" class=\"px-3 py-1 text-sm font-medium rounded-full\">\r\n              {{ getStatusName(booking.booking_status) }}\r\n            </span>\r\n            <span :class=\"getPaymentStatusColor(booking.payment_status)\" class=\"px-3 py-1 text-sm font-medium rounded-full\">\r\n              {{ getPaymentStatusName(booking.payment_status) }}\r\n            </span>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-500 mb-1\">رقم الحجز</label>\r\n            <p class=\"text-lg font-semibold text-gray-900\">#{{ booking.booking_number }}</p>\r\n          </div>\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-500 mb-1\">تاريخ الحجز</label>\r\n            <p class=\"text-gray-900\">{{ formatDate(booking.created_at) }}</p>\r\n          </div>\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-500 mb-1\">عدد الضيوف</label>\r\n            <p class=\"text-gray-900\">{{ booking.guests_count }} شخص</p>\r\n          </div>\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-500 mb-1\">تاريخ المغادرة</label>\r\n            <p class=\"text-gray-900\">{{ formatDate(booking.departure_date) }}</p>\r\n          </div>\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-500 mb-1\">تاريخ العودة</label>\r\n            <p class=\"text-gray-900\">{{ booking.return_date ? formatDate(booking.return_date) : 'غير محدد' }}</p>\r\n          </div>\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-500 mb-1\">تاريخ التأكيد</label>\r\n            <p class=\"text-gray-900\">{{ booking.confirmed_at ? formatDateTime(booking.confirmed_at) : 'غير مؤكد' }}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- معلومات العميل -->\r\n      <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n        <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">معلومات العميل</h2>\r\n        <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-500 mb-1\">الاسم</label>\r\n            <p class=\"text-gray-900\">{{ booking.customer_name }}</p>\r\n          </div>\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-500 mb-1\">البريد الإلكتروني</label>\r\n            <p class=\"text-gray-900\">{{ booking.customer_email }}</p>\r\n          </div>\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-500 mb-1\">رقم الهاتف</label>\r\n            <p class=\"text-gray-900\">{{ booking.customer_phone }}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- تفاصيل الباقة -->\r\n      <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n        <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">تفاصيل الباقة</h2>\r\n        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-500 mb-1\">اسم الباقة</label>\r\n            <p class=\"text-gray-900\">{{ booking.package?.title_ar || booking.package?.title_en || booking.package?.title || 'غير محدد' }}</p>\r\n          </div>\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-500 mb-1\">الوجهة</label>\r\n            <p class=\"text-gray-900\">{{ booking.package?.location || booking.package?.travel_period || 'غير محدد' }}</p>\r\n          </div>\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-500 mb-1\">مدة الرحلة</label>\r\n            <p class=\"text-gray-900\">{{ booking.package?.duration_days || 'غير محدد' }} أيام</p>\r\n          </div>\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-500 mb-1\">سعر الباقة</label>\r\n            <p class=\"text-gray-900\">{{ formatPrice(booking.package?.price) }}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- تفاصيل الدفع -->\r\n      <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n        <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">تفاصيل الدفع</h2>\r\n        <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-500 mb-1\">المبلغ الإجمالي</label>\r\n            <p class=\"text-lg font-semibold text-gray-900\">{{ formatPrice(booking.total_amount) }}</p>\r\n          </div>\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-500 mb-1\">المبلغ المدفوع</label>\r\n            <p class=\"text-lg font-semibold text-green-600\">{{ formatPrice(booking.paid_amount) }}</p>\r\n          </div>\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-500 mb-1\">المبلغ المتبقي</label>\r\n            <p class=\"text-lg font-semibold text-orange-600\">{{ formatPrice(booking.total_amount - booking.paid_amount) }}</p>\r\n          </div>\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-500 mb-1\">العملة</label>\r\n            <p class=\"text-gray-900\">{{ booking.currency || 'SAR' }}</p>\r\n          </div>\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-500 mb-1\">طريقة الدفع</label>\r\n            <p class=\"text-gray-900\">{{ booking.payment_method || 'غير محدد' }}</p>\r\n          </div>\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-500 mb-1\">مرجع الدفع</label>\r\n            <p class=\"text-gray-900\">{{ booking.payment_reference || 'غير محدد' }}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- طلبات خاصة وملاحظات -->\r\n      <div v-if=\"booking.special_requests || booking.notes\" class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n        <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">طلبات خاصة وملاحظات</h2>\r\n        <div class=\"space-y-4\">\r\n          <div v-if=\"booking.special_requests\">\r\n            <label class=\"block text-sm font-medium text-gray-500 mb-1\">طلبات خاصة</label>\r\n            <p class=\"text-gray-900 bg-gray-50 p-3 rounded-lg\">{{ booking.special_requests }}</p>\r\n          </div>\r\n          <div v-if=\"booking.notes\">\r\n            <label class=\"block text-sm font-medium text-gray-500 mb-1\">ملاحظات إدارية</label>\r\n            <p class=\"text-gray-900 bg-gray-50 p-3 rounded-lg\">{{ booking.notes }}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- معلومات الإلغاء -->\r\n      <div v-if=\"booking.booking_status === 'cancelled'\" class=\"bg-red-50 rounded-lg border border-red-200 p-6\">\r\n        <h2 class=\"text-lg font-semibold text-red-900 mb-4\">معلومات الإلغاء</h2>\r\n        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-red-700 mb-1\">سبب الإلغاء</label>\r\n            <p class=\"text-red-900\">{{ booking.cancellation_reason || 'غير محدد' }}</p>\r\n          </div>\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-red-700 mb-1\">تاريخ الإلغاء</label>\r\n            <p class=\"text-red-900\">{{ booking.cancellation_date ? formatDateTime(booking.cancellation_date) : 'غير محدد' }}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- معلومات إضافية -->\r\n      <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n        <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">معلومات إضافية</h2>\r\n        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-500 mb-1\">تاريخ الإنشاء</label>\r\n            <p class=\"text-gray-900\">{{ formatDateTime(booking.created_at) }}</p>\r\n          </div>\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-500 mb-1\">آخر تحديث</label>\r\n            <p class=\"text-gray-900\">{{ formatDateTime(booking.updated_at) }}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- حالة عدم وجود الحجز -->\r\n    <div v-else class=\"text-center py-12\">\r\n      <Icon name=\"material-symbols:book-online\" class=\"h-16 w-16 text-gray-300 mx-auto mb-4\" />\r\n      <h3 class=\"text-lg font-medium text-gray-900 mb-2\">الحجز غير موجود</h3>\r\n      <p class=\"text-gray-500 mb-6\">لم يتم العثور على الحجز المطلوب</p>\r\n      <NuxtLink\r\n        to=\"/admin/bookings\"\r\n        class=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n      >\r\n        <Icon name=\"material-symbols:arrow-back\" class=\"h-5 w-5 ml-2\" />\r\n        العودة إلى الحجوزات\r\n      </NuxtLink>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n// إعداد الصفحة\r\ndefinePageMeta({\r\n  layout: 'admin',\r\n  middleware: 'admin'\r\n})\r\n\r\n// الحصول على معرف الحجز من الرابط\r\nconst route = useRoute()\r\nconst bookingId = route.params.id\r\n\r\n// المتغيرات التفاعلية\r\nconst loading = ref(true)\r\nconst booking = ref(null)\r\n\r\n// تحميل بيانات الحجز\r\nconst loadBooking = async () => {\r\n  try {\r\n    loading.value = true\r\n    const result = await $fetch(`/api/bookings/${bookingId}`)\r\n    booking.value = result?.data || result\r\n  } catch (error) {\r\n    console.error('خطأ في تحميل الحجز:', error)\r\n    booking.value = null\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// دوال المساعدة\r\nconst formatDate = (dateString) => {\r\n  if (!dateString) return 'غير محدد'\r\n  const date = new Date(dateString)\r\n  return date.toLocaleDateString('ar-SA')\r\n}\r\n\r\nconst formatDateTime = (dateString) => {\r\n  if (!dateString) return 'غير محدد'\r\n  const date = new Date(dateString)\r\n  return date.toLocaleString('ar-SA')\r\n}\r\n\r\nconst formatPrice = (price) => {\r\n  if (!price) return '0.00 ر.س'\r\n  return new Intl.NumberFormat('ar-SA', {\r\n    style: 'currency',\r\n    currency: 'SAR'\r\n  }).format(price)\r\n}\r\n\r\nconst getStatusName = (status) => {\r\n  const statuses = {\r\n    confirmed: 'مؤكدة',\r\n    pending: 'في الانتظار',\r\n    cancelled: 'ملغية',\r\n    completed: 'مكتملة'\r\n  }\r\n  return statuses[status] || status\r\n}\r\n\r\nconst getStatusColor = (status) => {\r\n  const colors = {\r\n    confirmed: 'bg-green-100 text-green-800',\r\n    pending: 'bg-orange-100 text-orange-800',\r\n    cancelled: 'bg-red-100 text-red-800',\r\n    completed: 'bg-blue-100 text-blue-800'\r\n  }\r\n  return colors[status] || 'bg-gray-100 text-gray-800'\r\n}\r\n\r\nconst getPaymentStatusName = (status) => {\r\n  const statuses = {\r\n    paid: 'مدفوع',\r\n    partial: 'مدفوع جزئياً',\r\n    pending: 'في الانتظار',\r\n    refunded: 'مسترد'\r\n  }\r\n  return statuses[status] || status\r\n}\r\n\r\nconst getPaymentStatusColor = (status) => {\r\n  const colors = {\r\n    paid: 'bg-green-100 text-green-800',\r\n    partial: 'bg-yellow-100 text-yellow-800',\r\n    pending: 'bg-orange-100 text-orange-800',\r\n    refunded: 'bg-red-100 text-red-800'\r\n  }\r\n  return colors[status] || 'bg-gray-100 text-gray-800'\r\n}\r\n\r\n// تحميل البيانات عند تحميل الصفحة\r\nonMounted(() => {\r\n  loadBooking()\r\n})\r\n\r\n// SEO والميتا\r\nuseHead({\r\n  title: `عرض الحجز #${bookingId} - Wonder Land Admin`,\r\n  meta: [\r\n    { name: 'description', content: 'عرض تفاصيل الحجز' },\r\n    { name: 'robots', content: 'noindex, nofollow' }\r\n  ]\r\n})\r\n</script>\r\n"],"version":3}