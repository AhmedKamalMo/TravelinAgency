{"version":3,"file":"_id_.vue3.mjs","sources":["../../../../../../pages/admin/users/[id].vue"],"sourcesContent":["<template>\r\n  <div class=\"space-y-6\">\r\n    <!-- رأس الصفحة -->\r\n    <div class=\"flex items-center justify-between\">\r\n      <div>\r\n        <h1 class=\"text-2xl font-bold text-gray-900\">تفاصيل المستخدم</h1>\r\n        <p class=\"text-gray-600 mt-1\">{{ user?.full_name || 'غير محدد' }}</p>\r\n      </div>\r\n      <div class=\"flex items-center space-x-3 space-x-reverse\">\r\n        <NuxtLink\r\n          to=\"/admin/users\"\r\n          class=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n        >\r\n          <Icon name=\"material-symbols:arrow-back\" class=\"h-4 w-4 ml-2\" />\r\n          العودة\r\n        </NuxtLink>\r\n        <NuxtLink\r\n          :to=\"`/admin/users/${userId}/edit`\"\r\n          class=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n        >\r\n          <Icon name=\"material-symbols:edit\" class=\"h-4 w-4 ml-2\" />\r\n          تعديل\r\n        </NuxtLink>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- حالة التحميل -->\r\n    <div v-if=\"loading\" class=\"flex justify-center items-center py-12\">\r\n      <Icon name=\"material-symbols:progress-activity\" class=\"animate-spin h-8 w-8 text-blue-600\" />\r\n      <span class=\"mr-3 text-gray-600\">جارٍ تحميل بيانات المستخدم...</span>\r\n    </div>\r\n\r\n    <!-- تفاصيل المستخدم -->\r\n    <div v-else-if=\"user\" class=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n      <!-- المعلومات الأساسية -->\r\n      <div class=\"lg:col-span-2 space-y-6\">\r\n        <!-- الملف الشخصي -->\r\n        <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n          <div class=\"flex items-start space-x-4 space-x-reverse\">\r\n            <!-- الصورة الشخصية -->\r\n            <div class=\"flex-shrink-0\">\r\n              <div class=\"h-20 w-20 rounded-full bg-gray-300 flex items-center justify-center\">\r\n                <Icon name=\"material-symbols:person\" class=\"h-10 w-10 text-gray-600\" />\r\n              </div>\r\n            </div>\r\n            \r\n            <!-- المعلومات الأساسية -->\r\n            <div class=\"flex-1\">\r\n              <h2 class=\"text-xl font-semibold text-gray-900\">{{ user.full_name }}</h2>\r\n              <p class=\"text-gray-600\">{{ user.email }}</p>\r\n              <div class=\"mt-2 flex items-center space-x-4 space-x-reverse\">\r\n                <span :class=\"getRoleColor(user.role)\" class=\"px-2 py-1 text-xs font-medium rounded-full\">\r\n                  {{ getRoleName(user.role) }}\r\n                </span>\r\n                <span :class=\"getStatusColor(user.status)\" class=\"px-2 py-1 text-xs font-medium rounded-full\">\r\n                  {{ getStatusName(user.status) }}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <!-- النبذة الشخصية -->\r\n          <div v-if=\"user.bio\" class=\"mt-4\">\r\n            <h3 class=\"text-sm font-medium text-gray-700 mb-2\">نبذة شخصية</h3>\r\n            <p class=\"text-gray-600\">{{ user.bio }}</p>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- المعلومات الشخصية -->\r\n        <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n          <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">المعلومات الشخصية</h2>\r\n          <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700\">الاسم الكامل</label>\r\n              <p class=\"mt-1 text-sm text-gray-900\">{{ user.full_name || 'غير محدد' }}</p>\r\n            </div>\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700\">البريد الإلكتروني</label>\r\n              <p class=\"mt-1 text-sm text-gray-900\">{{ user.email }}</p>\r\n            </div>\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700\">رقم الهاتف</label>\r\n              <p class=\"mt-1 text-sm text-gray-900\">{{ user.phone || 'غير محدد' }}</p>\r\n            </div>\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700\">تاريخ الميلاد</label>\r\n              <p class=\"mt-1 text-sm text-gray-900\">{{ user.date_of_birth ? formatDate(user.date_of_birth) : 'غير محدد' }}</p>\r\n            </div>\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700\">الجنس</label>\r\n              <p class=\"mt-1 text-sm text-gray-900\">{{ getGenderName(user.gender) }}</p>\r\n            </div>\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700\">الجنسية</label>\r\n              <p class=\"mt-1 text-sm text-gray-900\">{{ user.nationality || 'غير محدد' }}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- العنوان -->\r\n        <div v-if=\"user.address || user.city || user.country\" class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n          <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">العنوان</h2>\r\n          <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div v-if=\"user.address\" class=\"md:col-span-2\">\r\n              <label class=\"block text-sm font-medium text-gray-700\">العنوان الكامل</label>\r\n              <p class=\"mt-1 text-sm text-gray-900\">{{ user.address }}</p>\r\n            </div>\r\n            <div v-if=\"user.city\">\r\n              <label class=\"block text-sm font-medium text-gray-700\">المدينة</label>\r\n              <p class=\"mt-1 text-sm text-gray-900\">{{ user.city }}</p>\r\n            </div>\r\n            <div v-if=\"user.country\">\r\n              <label class=\"block text-sm font-medium text-gray-700\">البلد</label>\r\n              <p class=\"mt-1 text-sm text-gray-900\">{{ user.country }}</p>\r\n            </div>\r\n            <div v-if=\"user.postal_code\">\r\n              <label class=\"block text-sm font-medium text-gray-700\">الرمز البريدي</label>\r\n              <p class=\"mt-1 text-sm text-gray-900\">{{ user.postal_code }}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- الشريط الجانبي -->\r\n      <div class=\"space-y-6\">\r\n        <!-- الحالة والدور -->\r\n        <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n          <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">الحالة والدور</h2>\r\n          <div class=\"space-y-4\">\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700\">الدور</label>\r\n              <div class=\"mt-1\">\r\n                <span :class=\"getRoleColor(user.role)\" class=\"px-2 py-1 text-xs font-medium rounded-full\">\r\n                  {{ getRoleName(user.role) }}\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700\">الحالة</label>\r\n              <div class=\"mt-1\">\r\n                <span :class=\"getStatusColor(user.status)\" class=\"px-2 py-1 text-xs font-medium rounded-full\">\r\n                  {{ getStatusName(user.status) }}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- الإعدادات -->\r\n        <div v-if=\"user.preferences\" class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n          <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">الإعدادات</h2>\r\n          <div class=\"space-y-3 text-sm\">\r\n            <div class=\"flex justify-between\">\r\n              <span class=\"text-gray-600\">اللغة:</span>\r\n              <span class=\"text-gray-900\">{{ user.preferences.language === 'ar' ? 'العربية' : 'English' }}</span>\r\n            </div>\r\n            <div class=\"flex justify-between\">\r\n              <span class=\"text-gray-600\">المنطقة الزمنية:</span>\r\n              <span class=\"text-gray-900\">{{ user.preferences.timezone }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- الإشعارات -->\r\n        <div v-if=\"user.preferences\" class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n          <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">الإشعارات</h2>\r\n          <div class=\"space-y-3 text-sm\">\r\n            <div class=\"flex justify-between items-center\">\r\n              <span class=\"text-gray-600\">البريد الإلكتروني:</span>\r\n              <Icon \r\n                :name=\"user.preferences.notifications.email ? 'material-symbols:check-circle' : 'material-symbols:cancel'\" \r\n                :class=\"user.preferences.notifications.email ? 'text-green-500' : 'text-red-500'\"\r\n                class=\"h-4 w-4\"\r\n              />\r\n            </div>\r\n            <div class=\"flex justify-between items-center\">\r\n              <span class=\"text-gray-600\">الرسائل النصية:</span>\r\n              <Icon \r\n                :name=\"user.preferences.notifications.sms ? 'material-symbols:check-circle' : 'material-symbols:cancel'\" \r\n                :class=\"user.preferences.notifications.sms ? 'text-green-500' : 'text-red-500'\"\r\n                class=\"h-4 w-4\"\r\n              />\r\n            </div>\r\n            <div class=\"flex justify-between items-center\">\r\n              <span class=\"text-gray-600\">الإشعارات الفورية:</span>\r\n              <Icon \r\n                :name=\"user.preferences.notifications.push ? 'material-symbols:check-circle' : 'material-symbols:cancel'\" \r\n                :class=\"user.preferences.notifications.push ? 'text-green-500' : 'text-red-500'\"\r\n                class=\"h-4 w-4\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- الخصوصية -->\r\n        <div v-if=\"user.preferences\" class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n          <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">الخصوصية</h2>\r\n          <div class=\"space-y-3 text-sm\">\r\n            <div class=\"flex justify-between\">\r\n              <span class=\"text-gray-600\">رؤية الملف الشخصي:</span>\r\n              <span class=\"text-gray-900\">{{ getPrivacyName(user.preferences.privacy.profile_visibility) }}</span>\r\n            </div>\r\n            <div class=\"flex justify-between items-center\">\r\n              <span class=\"text-gray-600\">إظهار البريد الإلكتروني:</span>\r\n              <Icon \r\n                :name=\"user.preferences.privacy.show_email ? 'material-symbols:check-circle' : 'material-symbols:cancel'\" \r\n                :class=\"user.preferences.privacy.show_email ? 'text-green-500' : 'text-red-500'\"\r\n                class=\"h-4 w-4\"\r\n              />\r\n            </div>\r\n            <div class=\"flex justify-between items-center\">\r\n              <span class=\"text-gray-600\">إظهار رقم الهاتف:</span>\r\n              <Icon \r\n                :name=\"user.preferences.privacy.show_phone ? 'material-symbols:check-circle' : 'material-symbols:cancel'\" \r\n                :class=\"user.preferences.privacy.show_phone ? 'text-green-500' : 'text-red-500'\"\r\n                class=\"h-4 w-4\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- معلومات النظام -->\r\n        <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n          <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">معلومات النظام</h2>\r\n          <div class=\"space-y-3 text-sm text-gray-600\">\r\n            <div class=\"flex justify-between\">\r\n              <span>تاريخ التسجيل:</span>\r\n              <span>{{ formatDate(user.created_at) }}</span>\r\n            </div>\r\n            <div class=\"flex justify-between\">\r\n              <span>آخر تحديث:</span>\r\n              <span>{{ formatDate(user.updated_at) }}</span>\r\n            </div>\r\n            <div class=\"flex justify-between\">\r\n              <span>آخر دخول:</span>\r\n              <span>{{ user.last_login ? formatDate(user.last_login) : 'لم يسجل دخول' }}</span>\r\n            </div>\r\n            <div class=\"flex justify-between\">\r\n              <span>عدد مرات الدخول:</span>\r\n              <span>{{ user.login_count || 0 }}</span>\r\n            </div>\r\n            <div class=\"flex justify-between items-center\">\r\n              <span>البريد مؤكد:</span>\r\n              <Icon \r\n                :name=\"user.email_verified ? 'material-symbols:check-circle' : 'material-symbols:cancel'\" \r\n                :class=\"user.email_verified ? 'text-green-500' : 'text-red-500'\"\r\n                class=\"h-4 w-4\"\r\n              />\r\n            </div>\r\n            <div class=\"flex justify-between items-center\">\r\n              <span>الهاتف مؤكد:</span>\r\n              <Icon \r\n                :name=\"user.phone_verified ? 'material-symbols:check-circle' : 'material-symbols:cancel'\" \r\n                :class=\"user.phone_verified ? 'text-green-500' : 'text-red-500'\"\r\n                class=\"h-4 w-4\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- حالة عدم وجود المستخدم -->\r\n    <div v-else class=\"text-center py-12\">\r\n      <Icon name=\"material-symbols:person-off\" class=\"h-16 w-16 text-gray-300 mx-auto mb-4\" />\r\n      <h3 class=\"text-lg font-medium text-gray-900 mb-2\">المستخدم غير موجود</h3>\r\n      <p class=\"text-gray-500 mb-6\">لم يتم العثور على المستخدم المطلوب</p>\r\n      <NuxtLink\r\n        to=\"/admin/users\"\r\n        class=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n      >\r\n        <Icon name=\"material-symbols:arrow-back\" class=\"h-5 w-5 ml-2\" />\r\n        العودة إلى قائمة المستخدمين\r\n      </NuxtLink>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport type { User } from '~/types/user'\r\n\r\n// إعداد الصفحة\r\ndefinePageMeta({\r\n  layout: 'admin',\r\n  middleware: 'admin'\r\n})\r\n\r\n// الحصول على معرف المستخدم من الرابط\r\nconst route = useRoute()\r\nconst userId = route.params.id as string\r\n\r\n// المتغيرات التفاعلية\r\nconst user = ref<User | null>(null)\r\nconst loading = ref(true)\r\n\r\n// تحميل بيانات المستخدم\r\nconst loadUser = async () => {\r\n  try {\r\n    loading.value = true\r\n    const response = await $fetch(`/api/admin/users/${userId}`)\r\n    \r\n    if (response.success && response.data) {\r\n      user.value = response.data\r\n    } else {\r\n      throw new Error(response.error || 'فشل في تحميل بيانات المستخدم')\r\n    }\r\n  } catch (error: any) {\r\n    console.error('Error loading user:', error)\r\n    // يمكن إضافة إشعار خطأ هنا\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// دوال المساعدة\r\nconst formatDate = (dateString: string) => {\r\n  const date = new Date(dateString)\r\n  return date.toLocaleDateString('ar-SA', {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric',\r\n    hour: '2-digit',\r\n    minute: '2-digit'\r\n  })\r\n}\r\n\r\nconst getRoleName = (role: string) => {\r\n  const roles = {\r\n    admin: 'مدير',\r\n    moderator: 'مشرف',\r\n    user: 'مستخدم'\r\n  }\r\n  return roles[role as keyof typeof roles] || role\r\n}\r\n\r\nconst getRoleColor = (role: string) => {\r\n  const colors = {\r\n    admin: 'bg-red-100 text-red-800',\r\n    moderator: 'bg-blue-100 text-blue-800',\r\n    user: 'bg-gray-100 text-gray-800'\r\n  }\r\n  return colors[role as keyof typeof colors] || 'bg-gray-100 text-gray-800'\r\n}\r\n\r\nconst getStatusName = (status: string) => {\r\n  const statuses = {\r\n    active: 'نشط',\r\n    inactive: 'غير نشط',\r\n    suspended: 'معلق'\r\n  }\r\n  return statuses[status as keyof typeof statuses] || status\r\n}\r\n\r\nconst getStatusColor = (status: string) => {\r\n  const colors = {\r\n    active: 'bg-green-100 text-green-800',\r\n    inactive: 'bg-red-100 text-red-800',\r\n    suspended: 'bg-orange-100 text-orange-800'\r\n  }\r\n  return colors[status as keyof typeof colors] || 'bg-gray-100 text-gray-800'\r\n}\r\n\r\nconst getGenderName = (gender?: string) => {\r\n  const genders = {\r\n    male: 'ذكر',\r\n    female: 'أنثى',\r\n    other: 'آخر'\r\n  }\r\n  return genders[gender as keyof typeof genders] || 'غير محدد'\r\n}\r\n\r\nconst getPrivacyName = (privacy: string) => {\r\n  const privacies = {\r\n    public: 'عام',\r\n    private: 'خاص',\r\n    friends: 'الأصدقاء فقط'\r\n  }\r\n  return privacies[privacy as keyof typeof privacies] || privacy\r\n}\r\n\r\n// تحميل البيانات عند تحميل الصفحة\r\nonMounted(() => {\r\n  loadUser()\r\n})\r\n\r\n// SEO والميتا\r\nuseHead({\r\n  title: `تفاصيل المستخدم - Wonder Land Admin`,\r\n  meta: [\r\n    { name: 'description', content: 'تفاصيل بيانات المستخدم' },\r\n    { name: 'robots', content: 'noindex, nofollow' }\r\n  ]\r\n})\r\n</script>\r\n\r\n\r\n"],"names":["userId","useRoute","user","ref","loading","formatDate","dateString","getRoleName","role","getRoleColor","getStatusName","status","getStatusColor","getGenderName","gender","getPrivacyName","privacy","useHead"],"mappings":"urBAiSM,MAAAA,EADQC,EAAS,EACF,OAAO,GAGtBC,EAAOC,EAAiB,IAAI,EAC5BC,EAAUD,EAAI,EAAI,EAsBlBE,EAAcC,GACL,IAAI,KAAKA,CAAU,EACpB,mBAAmB,QAAS,CACtC,KAAM,UACN,MAAO,OACP,IAAK,UACL,KAAM,UACN,OAAQ,SAAA,CACT,EAGGC,EAAeC,IACL,CACZ,MAAO,OACP,UAAW,OACX,KAAM,QACR,GACaA,CAA0B,GAAKA,EAGxCC,EAAgBD,IACL,CACb,MAAO,0BACP,UAAW,4BACX,KAAM,2BACR,GACcA,CAA2B,GAAK,4BAG1CE,EAAiBC,IACJ,CACf,OAAQ,MACR,SAAU,UACV,UAAW,MACb,GACgBA,CAA+B,GAAKA,EAGhDC,EAAkBD,IACP,CACb,OAAQ,8BACR,SAAU,0BACV,UAAW,+BACb,GACcA,CAA6B,GAAK,4BAG5CE,EAAiBC,IACL,CACd,KAAM,MACN,OAAQ,OACR,MAAO,KACT,GACeA,CAA8B,GAAK,WAG9CC,EAAkBC,IACJ,CAChB,OAAQ,MACR,QAAS,MACT,QAAS,cACX,GACiBA,CAAiC,GAAKA,EASjD,OAAAC,EAAA,CACN,MAAO,sCACP,KAAM,CACJ,CAAE,KAAM,cAAe,QAAS,wBAAyB,EACzD,CAAE,KAAM,SAAU,QAAS,mBAAoB,CAAA,CACjD,CACD"}