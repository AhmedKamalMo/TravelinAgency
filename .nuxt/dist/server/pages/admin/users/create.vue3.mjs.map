{"version":3,"file":"create.vue3.mjs","sources":["../../../../../../pages/admin/users/create.vue"],"sourcesContent":["<template>\r\n  <div class=\"space-y-6\">\r\n    <!-- رأس الصفحة -->\r\n    <div class=\"flex items-center justify-between\">\r\n      <div>\r\n        <h1 class=\"text-2xl font-bold text-gray-900\">إضافة مستخدم جديد</h1>\r\n        <p class=\"text-gray-600 mt-1\">إنشاء حساب مستخدم جديد في النظام</p>\r\n      </div>\r\n      <div class=\"flex items-center space-x-3 space-x-reverse\">\r\n        <NuxtLink\r\n          to=\"/admin/users\"\r\n          class=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n        >\r\n          <Icon name=\"material-symbols:arrow-back\" class=\"h-4 w-4 ml-2\" />\r\n          العودة\r\n        </NuxtLink>\r\n        <button\r\n          @click=\"createUser\"\r\n          :disabled=\"isLoading || !isFormValid\"\r\n          class=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n        >\r\n          <Icon \r\n            name=\"material-symbols:add\" \r\n            class=\"h-4 w-4 ml-2\"\r\n            :class=\"{ 'animate-spin': isLoading }\"\r\n          />\r\n          {{ isLoading ? 'جاري الإنشاء...' : 'إنشاء المستخدم' }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- نموذج الإنشاء -->\r\n    <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n      <!-- المعلومات الأساسية -->\r\n      <div class=\"lg:col-span-2 space-y-6\">\r\n        <!-- المعلومات الشخصية -->\r\n        <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n          <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">المعلومات الشخصية</h2>\r\n          <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">الاسم الكامل *</label>\r\n              <input\r\n                v-model=\"form.full_name\"\r\n                type=\"text\"\r\n                required\r\n                class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                placeholder=\"أدخل الاسم الكامل\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">البريد الإلكتروني *</label>\r\n              <input\r\n                v-model=\"form.email\"\r\n                type=\"email\"\r\n                required\r\n                class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                placeholder=\"أدخل البريد الإلكتروني\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">كلمة المرور *</label>\r\n              <input\r\n                v-model=\"form.password\"\r\n                type=\"password\"\r\n                required\r\n                class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                placeholder=\"أدخل كلمة المرور\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">تأكيد كلمة المرور *</label>\r\n              <input\r\n                v-model=\"confirmPassword\"\r\n                type=\"password\"\r\n                required\r\n                class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                placeholder=\"أعد إدخال كلمة المرور\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">رقم الهاتف</label>\r\n              <input\r\n                v-model=\"form.phone\"\r\n                type=\"tel\"\r\n                class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                placeholder=\"+966501234567\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">تاريخ الميلاد</label>\r\n              <input\r\n                v-model=\"form.date_of_birth\"\r\n                type=\"date\"\r\n                class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">الجنس</label>\r\n              <select\r\n                v-model=\"form.gender\"\r\n                class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"\">اختر الجنس</option>\r\n                <option value=\"male\">ذكر</option>\r\n                <option value=\"female\">أنثى</option>\r\n                <option value=\"other\">آخر</option>\r\n              </select>\r\n            </div>\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">الجنسية</label>\r\n              <input\r\n                v-model=\"form.nationality\"\r\n                type=\"text\"\r\n                class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                placeholder=\"الجنسية\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"mt-4\">\r\n            <label class=\"block text-sm font-medium text-gray-700 mb-2\">نبذة شخصية</label>\r\n            <textarea\r\n              v-model=\"form.bio\"\r\n              rows=\"3\"\r\n              class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              placeholder=\"أدخل نبذة شخصية\"\r\n            ></textarea>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- العنوان -->\r\n        <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n          <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">العنوان</h2>\r\n          <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div class=\"md:col-span-2\">\r\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">العنوان الكامل</label>\r\n              <input\r\n                v-model=\"form.address\"\r\n                type=\"text\"\r\n                class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                placeholder=\"أدخل العنوان الكامل\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">المدينة</label>\r\n              <input\r\n                v-model=\"form.city\"\r\n                type=\"text\"\r\n                class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                placeholder=\"المدينة\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">البلد</label>\r\n              <input\r\n                v-model=\"form.country\"\r\n                type=\"text\"\r\n                class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                placeholder=\"البلد\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">الرمز البريدي</label>\r\n              <input\r\n                v-model=\"form.postal_code\"\r\n                type=\"text\"\r\n                class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                placeholder=\"الرمز البريدي\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- الشريط الجانبي -->\r\n      <div class=\"space-y-6\">\r\n        <!-- الحالة والدور -->\r\n        <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n          <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">الحالة والدور</h2>\r\n          <div class=\"space-y-4\">\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">الدور</label>\r\n              <select\r\n                v-model=\"form.role\"\r\n                class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"user\">مستخدم</option>\r\n                <option value=\"moderator\">مشرف</option>\r\n                <option value=\"admin\">مدير</option>\r\n              </select>\r\n            </div>\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">الحالة</label>\r\n              <select\r\n                v-model=\"form.status\"\r\n                class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"active\">نشط</option>\r\n                <option value=\"inactive\">غير نشط</option>\r\n                <option value=\"suspended\">معلق</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- الإعدادات الافتراضية -->\r\n        <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n          <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">الإعدادات الافتراضية</h2>\r\n          <div class=\"space-y-4\">\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">اللغة</label>\r\n              <select\r\n                v-model=\"defaultPreferences.language\"\r\n                class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"ar\">العربية</option>\r\n                <option value=\"en\">English</option>\r\n              </select>\r\n            </div>\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">المنطقة الزمنية</label>\r\n              <select\r\n                v-model=\"defaultPreferences.timezone\"\r\n                class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"Asia/Riyadh\">الرياض (GMT+3)</option>\r\n                <option value=\"Asia/Dubai\">دبي (GMT+4)</option>\r\n                <option value=\"UTC\">UTC (GMT+0)</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- الإشعارات الافتراضية -->\r\n        <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n          <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">الإشعارات الافتراضية</h2>\r\n          <div class=\"space-y-3\">\r\n            <label class=\"flex items-center\">\r\n              <input\r\n                v-model=\"defaultPreferences.notifications.email\"\r\n                type=\"checkbox\"\r\n                class=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\r\n              />\r\n              <span class=\"mr-2 text-sm text-gray-700\">إشعارات البريد الإلكتروني</span>\r\n            </label>\r\n            <label class=\"flex items-center\">\r\n              <input\r\n                v-model=\"defaultPreferences.notifications.sms\"\r\n                type=\"checkbox\"\r\n                class=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\r\n              />\r\n              <span class=\"mr-2 text-sm text-gray-700\">إشعارات الرسائل النصية</span>\r\n            </label>\r\n            <label class=\"flex items-center\">\r\n              <input\r\n                v-model=\"defaultPreferences.notifications.push\"\r\n                type=\"checkbox\"\r\n                class=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\r\n              />\r\n              <span class=\"mr-2 text-sm text-gray-700\">الإشعارات الفورية</span>\r\n            </label>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- الخصوصية الافتراضية -->\r\n        <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n          <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">الخصوصية الافتراضية</h2>\r\n          <div class=\"space-y-4\">\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">رؤية الملف الشخصي</label>\r\n              <select\r\n                v-model=\"defaultPreferences.privacy.profile_visibility\"\r\n                class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"public\">عام</option>\r\n                <option value=\"private\">خاص</option>\r\n                <option value=\"friends\">الأصدقاء فقط</option>\r\n              </select>\r\n            </div>\r\n            <div class=\"space-y-2\">\r\n              <label class=\"flex items-center\">\r\n                <input\r\n                  v-model=\"defaultPreferences.privacy.show_email\"\r\n                  type=\"checkbox\"\r\n                  class=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\r\n                />\r\n                <span class=\"mr-2 text-sm text-gray-700\">إظهار البريد الإلكتروني</span>\r\n              </label>\r\n              <label class=\"flex items-center\">\r\n                <input\r\n                  v-model=\"defaultPreferences.privacy.show_phone\"\r\n                  type=\"checkbox\"\r\n                  class=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\r\n                />\r\n                <span class=\"mr-2 text-sm text-gray-700\">إظهار رقم الهاتف</span>\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- ملخص المعلومات -->\r\n        <div class=\"bg-blue-50 rounded-lg border border-blue-200 p-6\">\r\n          <h3 class=\"text-lg font-semibold text-blue-900 mb-3\">ملخص المعلومات</h3>\r\n          <div class=\"space-y-2 text-sm text-blue-800\">\r\n            <div class=\"flex justify-between\">\r\n              <span>الاسم:</span>\r\n              <span>{{ form.full_name || 'غير محدد' }}</span>\r\n            </div>\r\n            <div class=\"flex justify-between\">\r\n              <span>البريد:</span>\r\n              <span>{{ form.email || 'غير محدد' }}</span>\r\n            </div>\r\n            <div class=\"flex justify-between\">\r\n              <span>الدور:</span>\r\n              <span>{{ getRoleName(form.role) }}</span>\r\n            </div>\r\n            <div class=\"flex justify-between\">\r\n              <span>الحالة:</span>\r\n              <span>{{ getStatusName(form.status) }}</span>\r\n            </div>\r\n            <div class=\"flex justify-between\">\r\n              <span>الهاتف:</span>\r\n              <span>{{ form.phone || 'غير محدد' }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport type { CreateUserRequest } from '~/types/user'\r\n\r\n// إعداد الصفحة\r\ndefinePageMeta({\r\n  layout: 'admin',\r\n  middleware: 'admin'\r\n})\r\n\r\n// المتغيرات التفاعلية\r\nconst isLoading = ref(false)\r\nconst confirmPassword = ref('')\r\n\r\n// نموذج البيانات\r\nconst form = ref<CreateUserRequest>({\r\n  email: '',\r\n  password: '',\r\n  full_name: '',\r\n  phone: '',\r\n  role: 'user',\r\n  status: 'active',\r\n  bio: '',\r\n  date_of_birth: '',\r\n  gender: 'male',\r\n  nationality: '',\r\n  address: '',\r\n  city: '',\r\n  country: '',\r\n  postal_code: ''\r\n})\r\n\r\n// الإعدادات الافتراضية\r\nconst defaultPreferences = ref({\r\n  language: 'ar',\r\n  timezone: 'Asia/Riyadh',\r\n  notifications: {\r\n    email: true,\r\n    sms: true,\r\n    push: true\r\n  },\r\n  privacy: {\r\n    profile_visibility: 'public',\r\n    show_email: false,\r\n    show_phone: false\r\n  }\r\n})\r\n\r\n// التحقق من صحة النموذج\r\nconst isFormValid = computed(() => {\r\n  return form.value.email && \r\n         form.value.password && \r\n         form.value.full_name &&\r\n         form.value.password === confirmPassword.value &&\r\n         form.value.password.length >= 6\r\n})\r\n\r\n// إنشاء المستخدم\r\nconst createUser = async () => {\r\n  try {\r\n    isLoading.value = true\r\n    \r\n    // إضافة الإعدادات الافتراضية للنموذج\r\n    const userData = {\r\n      ...form.value,\r\n      preferences: defaultPreferences.value\r\n    }\r\n    \r\n    const response = await $fetch('/api/admin/users', {\r\n      method: 'POST',\r\n      body: userData\r\n    })\r\n    \r\n    if (response.success) {\r\n      // إشعار النجاح\r\n      console.log('تم إنشاء المستخدم بنجاح')\r\n      \r\n      // التنقل إلى صفحة تعديل المستخدم الجديد\r\n      await navigateTo(`/admin/users/${response.data?.id}/edit`)\r\n    } else {\r\n      throw new Error(response.error || 'فشل في إنشاء المستخدم')\r\n    }\r\n  } catch (error: any) {\r\n    console.error('Error creating user:', error)\r\n    // يمكن إضافة إشعار خطأ هنا\r\n  } finally {\r\n    isLoading.value = false\r\n  }\r\n}\r\n\r\n// دوال المساعدة\r\nconst getRoleName = (role: string) => {\r\n  const roles = {\r\n    admin: 'مدير',\r\n    moderator: 'مشرف',\r\n    user: 'مستخدم'\r\n  }\r\n  return roles[role as keyof typeof roles] || role\r\n}\r\n\r\nconst getStatusName = (status: string) => {\r\n  const statuses = {\r\n    active: 'نشط',\r\n    inactive: 'غير نشط',\r\n    suspended: 'معلق'\r\n  }\r\n  return statuses[status as keyof typeof statuses] || status\r\n}\r\n\r\n// SEO والميتا\r\nuseHead({\r\n  title: 'إضافة مستخدم جديد - Wonder Land Admin',\r\n  meta: [\r\n    { name: 'description', content: 'إنشاء حساب مستخدم جديد في النظام' },\r\n    { name: 'robots', content: 'noindex, nofollow' }\r\n  ]\r\n})\r\n</script>\r\n\r\n\r\n"],"names":["isLoading","ref","confirmPassword","form","defaultPreferences","isFormValid","computed","getRoleName","role","getStatusName","status","useHead"],"mappings":"mrBAoVM,MAAAA,EAAYC,EAAI,EAAK,EACrBC,EAAkBD,EAAI,EAAE,EAGxBE,EAAOF,EAAuB,CAClC,MAAO,GACP,SAAU,GACV,UAAW,GACX,MAAO,GACP,KAAM,OACN,OAAQ,SACR,IAAK,GACL,cAAe,GACf,OAAQ,OACR,YAAa,GACb,QAAS,GACT,KAAM,GACN,QAAS,GACT,YAAa,EAAA,CACd,EAGKG,EAAqBH,EAAI,CAC7B,SAAU,KACV,SAAU,cACV,cAAe,CACb,MAAO,GACP,IAAK,GACL,KAAM,EACR,EACA,QAAS,CACP,mBAAoB,SACpB,WAAY,GACZ,WAAY,EAAA,CACd,CACD,EAGKI,EAAcC,EAAS,IACpBH,EAAK,MAAM,OACXA,EAAK,MAAM,UACXA,EAAK,MAAM,WACXA,EAAK,MAAM,WAAaD,EAAgB,OACxCC,EAAK,MAAM,SAAS,QAAU,CACtC,EAoCKI,EAAeC,IACL,CACZ,MAAO,OACP,UAAW,OACX,KAAM,QACR,GACaA,CAA0B,GAAKA,EAGxCC,EAAiBC,IACJ,CACf,OAAQ,MACR,SAAU,UACV,UAAW,MACb,GACgBA,CAA+B,GAAKA,EAI9C,OAAAC,EAAA,CACN,MAAO,wCACP,KAAM,CACJ,CAAE,KAAM,cAAe,QAAS,kCAAmC,EACnE,CAAE,KAAM,SAAU,QAAS,mBAAoB,CAAA,CACjD,CACD"}