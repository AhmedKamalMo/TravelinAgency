{"file":"dashboard.vue.mjs","mappings":"4/BAoLA,MAAMA,EAAQC,EAAI,CAChB,cAAe,EACf,kBAAmB,EACnB,YAAa,EACb,WAAY,EACZ,cAAe,CAAA,CAChB,EAEKC,EAAmBD,EAAI,EAAE,EACzBE,EAAkBF,EAAI,EAAE,EACxBG,EAAoBH,EAAI,EAAI,EAC5BI,EAAkBJ,EAAI,EAAI,EAG1BK,EAAiBC,EAAS,IAAM,CACpC,CACE,IAAK,WACL,MAAO,iBACP,MAAOP,EAAM,MAAM,cACnB,KAAM,6BACN,OAAQ,eACR,UAAW,gBACb,EACA,CACE,IAAK,eACL,MAAO,iBACP,MAAOA,EAAM,MAAM,kBACnB,KAAM,+BACN,OAAQ,eACR,UAAW,gBACb,EACA,CACE,IAAK,WACL,MAAO,cACP,MAAOA,EAAM,MAAM,YACnB,KAAM,wBACN,OAAQ,eACR,UAAW,gBACb,EACA,CACE,IAAK,QACL,MAAO,aACP,MAAOA,EAAM,MAAM,WACnB,KAAM,yBACN,OAAQ,eACR,UAAW,gBACb,EACA,CACE,IAAK,WACL,MAAO,kBACP,MAAOA,EAAM,MAAM,cACnB,KAAM,+BACN,OAAQ,eACR,UAAW,gBAAA,CACb,CACD,EAGKQ,EAAmBP,EAAI,CAC3B,OAAQ,CAAC,QAAS,SAAU,OAAQ,QAAS,OAAQ,OAAO,EAC5D,SAAU,CAAC,CACT,MAAO,kBACP,KAAM,CAAC,KAAO,KAAO,KAAO,KAAO,KAAO,IAAK,EAC/C,YAAa,oBACb,gBAAiB,0BACjB,KAAM,GACN,QAAS,EACV,CAAA,CAAA,CACF,EAEKQ,EAA2BR,EAAI,CACnC,OAAQ,CAAC,eAAgB,eAAgB,OAAQ,KAAM,eAAe,EACtE,SAAU,CAAC,CACT,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,CAAC,EACxB,gBAAiB,CACf,0BACA,0BACA,0BACA,yBACA,yBACF,EACA,YAAa,CACX,oBACA,oBACA,oBACA,mBACA,mBAAA,CAEH,CAAA,CAAA,CACF,EAGKS,EAAoBT,EAAI,CAC5B,QAAS,CACP,OAAQ,CACN,QAAS,EAAA,CAEb,EACA,OAAQ,CACN,EAAG,CACD,YAAa,GACb,MAAO,CACL,SAAU,SAASU,EAAO,CACxB,OAAO,IAAI,KAAK,aAAa,OAAO,EAAE,OAAOA,CAAK,EAAI,OAAA,CACxD,CACF,CACF,CACF,CACD,EAEKC,EAA2BX,EAAI,CACnC,QAAS,CACP,OAAQ,CACN,SAAU,SACV,OAAQ,CACN,QAAS,GACT,cAAe,EAAA,CACjB,CACF,CACF,CACD,EA8EKY,EAAcC,GACL,IAAI,KAAKA,CAAU,EACpB,mBAAmB,QAAS,CACtC,KAAM,UACN,MAAO,QACP,IAAK,UACL,KAAM,UACN,OAAQ,SAAA,CACT,EAGGC,EAAeC,GACZ,IAAI,KAAK,aAAa,QAAS,CACpC,MAAO,WACP,SAAU,KAAA,CACX,EAAE,OAAOA,CAAK,EAgBT,OAAAC,EAAA,CACN,MAAO,kCACP,KAAM,CACJ,CAAE,KAAM,cAAe,QAAS,mDAAoD,EACpF,CAAE,KAAM,SAAU,QAAS,mBAAoB,CAAA,CACjD,CACD","names":["stats","ref","recentActivities","popularPackages","loadingActivities","loadingPackages","dashboardStats","computed","monthlySalesData","bookingsDistributionData","salesChartOptions","value","distributionChartOptions","formatDate","dateString","formatPrice","price","useHead"],"sources":["../../../../../pages/admin/dashboard.vue"],"sourcesContent":["<template>\r\n  <div class=\"space-y-6\">\r\n    <!-- مساحة إضافية في الأعلى -->\r\n    <div class=\"h-16\"></div>\r\n    \r\n    <!-- ترحيب -->\r\n    <div class=\"bg-gradient-to-r from-slate-500 to-slate-600 rounded-xl p-6 text-white shadow-sm\">\r\n      <h1 class=\"text-2xl font-semibold mb-2\">مرحباً بك في لوحة التحكم</h1>\r\n      <p class=\"text-slate-200\">إدارة شاملة لموقع Wonder Land Traveling Agency</p>\r\n    </div>\r\n\r\n    <!-- إحصائيات سريعة -->\r\n    <AdminStats :stats=\"dashboardStats\" />\r\n\r\n    <!-- الرسوم البيانية والإحصائيات -->\r\n    <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n      <!-- رسم بياني للمبيعات الشهرية -->\r\n      <div class=\"bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-slate-200/60 p-6 hover:shadow-md transition-all duration-200\">\r\n        <div class=\"flex items-center justify-between mb-4\">\r\n          <h2 class=\"text-lg font-semibold text-slate-800\">المبيعات الشهرية</h2>\r\n          <div class=\"flex items-center space-x-2 space-x-reverse\">\r\n            <span class=\"text-sm text-slate-500\">آخر 6 أشهر</span>\r\n            <Icon name=\"material-symbols:trending-up\" class=\"h-5 w-5 text-slate-600\" />\r\n          </div>\r\n        </div>\r\n        <LineChart \r\n          :data=\"monthlySalesData\" \r\n          :height=\"250\"\r\n          :options=\"salesChartOptions\"\r\n        />\r\n      </div>\r\n\r\n      <!-- رسم بياني لتوزيع الحجوزات -->\r\n      <div class=\"bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-slate-200/60 p-6 hover:shadow-md transition-all duration-200\">\r\n        <div class=\"flex items-center justify-between mb-4\">\r\n          <h2 class=\"text-lg font-semibold text-slate-800\">توزيع الحجوزات</h2>\r\n          <div class=\"flex items-center space-x-2 space-x-reverse\">\r\n            <span class=\"text-sm text-slate-500\">حسب النوع</span>\r\n            <Icon name=\"material-symbols:pie-chart\" class=\"h-5 w-5 text-slate-600\" />\r\n          </div>\r\n        </div>\r\n        <DoughnutChart \r\n          :data=\"bookingsDistributionData\" \r\n          :height=\"250\"\r\n          :options=\"distributionChartOptions\"\r\n        />\r\n      </div>\r\n    </div>\r\n\r\n    <!-- الأنشطة الحديثة والإحصائيات -->\r\n    <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n      <!-- الأنشطة الحديثة -->\r\n      <div class=\"bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-slate-200/60 hover:shadow-md transition-all duration-200\">\r\n        <div class=\"p-6 border-b border-slate-200/60\">\r\n          <h2 class=\"text-lg font-semibold text-slate-800\">الأنشطة الحديثة</h2>\r\n        </div>\r\n        <div class=\"p-6\">\r\n          <div class=\"space-y-4\">\r\n            <div v-for=\"activity in recentActivities\" :key=\"activity.id\" class=\"flex items-start space-x-3 space-x-reverse\">\r\n              <div :class=\"[\r\n                'flex-shrink-0 w-2 h-2 rounded-full mt-2',\r\n                activity.type === 'package' ? 'bg-slate-500' :\r\n                activity.type === 'message' ? 'bg-slate-400' :\r\n                activity.type === 'user' ? 'bg-slate-600' : 'bg-slate-300'\r\n              ]\"></div>\r\n              <div class=\"flex-1 min-w-0\">\r\n                <p class=\"text-sm text-slate-800\">{{ activity.title }}</p>\r\n                <p class=\"text-xs text-slate-500 mt-1\">{{ formatDate(activity.created_at) }}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div v-if=\"loadingActivities\" class=\"flex justify-center py-4\">\r\n            <Icon name=\"material-symbols:progress-activity\" class=\"animate-spin h-6 w-6 text-slate-400\" />\r\n          </div>\r\n          \r\n          <div v-if=\"recentActivities.length === 0 && !loadingActivities\" class=\"text-center py-8\">\r\n            <Icon name=\"material-symbols:inbox\" class=\"h-12 w-12 text-slate-300 mx-auto mb-2\" />\r\n            <p class=\"text-slate-500\">لا توجد أنشطة حديثة</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- الباقات الأكثر شعبية -->\r\n      <div class=\"bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-slate-200/60 hover:shadow-md transition-all duration-200\">\r\n        <div class=\"p-6 border-b border-slate-200/60\">\r\n          <h2 class=\"text-lg font-semibold text-slate-800\">الباقات الأكثر شعبية</h2>\r\n        </div>\r\n        <div class=\"p-6\">\r\n          <div class=\"space-y-4\">\r\n            <div v-for=\"pkg in popularPackages\" :key=\"pkg.id\" class=\"flex items-center justify-between\">\r\n              <div class=\"flex items-center space-x-3 space-x-reverse\">\r\n                <img \r\n                  :src=\"pkg.image\" \r\n                  :alt=\"pkg.title\"\r\n                  class=\"w-10 h-10 rounded-lg object-cover\"\r\n                  loading=\"lazy\"\r\n                />\r\n                <div>\r\n                  <p class=\"text-sm font-medium text-slate-800\">{{ pkg.title }}</p>\r\n                  <p class=\"text-xs text-slate-500\">{{ pkg.views }} مشاهدة</p>\r\n                </div>\r\n              </div>\r\n              <span class=\"text-sm font-medium text-slate-600\">{{ formatPrice(pkg.price) }}</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div v-if=\"loadingPackages\" class=\"flex justify-center py-4\">\r\n            <Icon name=\"material-symbols:progress-activity\" class=\"animate-spin h-6 w-6 text-slate-400\" />\r\n          </div>\r\n\r\n          <div v-if=\"popularPackages.length === 0 && !loadingPackages\" class=\"text-center py-8\">\r\n            <Icon name=\"material-symbols:package-2-outline\" class=\"h-12 w-12 text-slate-300 mx-auto mb-2\" />\r\n            <p class=\"text-slate-500\">لا توجد حزم متاحة</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- إحصائيات SEO -->\r\n      <AdminSEODashboard />\r\n    </div>\r\n\r\n    <!-- الروابط السريعة -->\r\n    <div class=\"bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-slate-200/60 p-4 sm:p-6 hover:shadow-md transition-all duration-200\">\r\n      <h2 class=\"text-lg font-semibold text-slate-800 mb-4\">الروابط السريعة</h2>\r\n      <div class=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3 sm:gap-4\">\r\n        <NuxtLink\r\n          to=\"/admin/packages/create\"\r\n          class=\"flex flex-col items-center p-3 sm:p-4 bg-slate-50 rounded-lg hover:bg-slate-100 transition-all duration-200 group\"\r\n        >\r\n          <Icon name=\"material-symbols:add-box\" class=\"h-6 w-6 sm:h-8 sm:w-8 text-slate-600 mb-2 group-hover:scale-110 transition-transform\" />\r\n          <span class=\"text-xs sm:text-sm font-medium text-slate-700 text-center\">إضافة باقة</span>\r\n        </NuxtLink>\r\n\r\n        <NuxtLink\r\n          to=\"/admin/destinations/create\"\r\n          class=\"flex flex-col items-center p-3 sm:p-4 bg-slate-50 rounded-lg hover:bg-slate-100 transition-all duration-200 group\"\r\n        >\r\n          <Icon name=\"material-symbols:add-location\" class=\"h-6 w-6 sm:h-8 sm:w-8 text-slate-600 mb-2 group-hover:scale-110 transition-transform\" />\r\n          <span class=\"text-xs sm:text-sm font-medium text-slate-700 text-center\">إضافة وجهة</span>\r\n        </NuxtLink>\r\n\r\n        <NuxtLink\r\n          to=\"/admin/contacts\"\r\n          class=\"flex flex-col items-center p-3 sm:p-4 bg-slate-50 rounded-lg hover:bg-slate-100 transition-all duration-200 group\"\r\n        >\r\n          <Icon name=\"material-symbols:mail-outline\" class=\"h-6 w-6 sm:h-8 sm:w-8 text-slate-600 mb-2 group-hover:scale-110 transition-transform\" />\r\n          <span class=\"text-xs sm:text-sm font-medium text-slate-700 text-center\">عرض الرسائل</span>\r\n        </NuxtLink>\r\n\r\n        <NuxtLink\r\n          to=\"/admin/seo\"\r\n          class=\"flex flex-col items-center p-3 sm:p-4 bg-slate-50 rounded-lg hover:bg-slate-100 transition-all duration-200 group\"\r\n        >\r\n          <Icon name=\"material-symbols:search\" class=\"h-6 w-6 sm:h-8 sm:w-8 text-slate-600 mb-2 group-hover:scale-110 transition-transform\" />\r\n          <span class=\"text-xs sm:text-sm font-medium text-slate-700 text-center\">إدارة SEO</span>\r\n        </NuxtLink>\r\n\r\n        <NuxtLink\r\n          to=\"/admin/settings\"\r\n          class=\"flex flex-col items-center p-3 sm:p-4 bg-slate-50 rounded-lg hover:bg-slate-100 transition-all duration-200 group\"\r\n        >\r\n          <Icon name=\"material-symbols:settings\" class=\"h-6 w-6 sm:h-8 sm:w-8 text-slate-600 mb-2 group-hover:scale-110 transition-transform\" />\r\n          <span class=\"text-xs sm:text-sm font-medium text-slate-700 text-center\">الإعدادات</span>\r\n        </NuxtLink>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { LineChart, DoughnutChart } from '~/components/charts'\r\n\r\n// إعداد الصفحة\r\ndefinePageMeta({\r\n  layout: 'admin',\r\n  middleware: 'admin'\r\n})\r\n\r\n// المتغيرات التفاعلية\r\nconst stats = ref({\r\n  totalPackages: 0,\r\n  totalDestinations: 0,\r\n  newMessages: 0,\r\n  totalUsers: 0,\r\n  totalBookings: 0\r\n})\r\n\r\nconst recentActivities = ref([])\r\nconst popularPackages = ref([])\r\nconst loadingActivities = ref(true)\r\nconst loadingPackages = ref(true)\r\n\r\n// إحصائيات لوحة التحكم\r\nconst dashboardStats = computed(() => [\r\n  {\r\n    key: 'packages',\r\n    label: 'إجمالي الباقات',\r\n    value: stats.value.totalPackages,\r\n    icon: 'material-symbols:package-2',\r\n    iconBg: 'bg-slate-100',\r\n    iconColor: 'text-slate-600'\r\n  },\r\n  {\r\n    key: 'destinations',\r\n    label: 'إجمالي الوجهات',\r\n    value: stats.value.totalDestinations,\r\n    icon: 'material-symbols:location-on',\r\n    iconBg: 'bg-slate-100',\r\n    iconColor: 'text-slate-600'\r\n  },\r\n  {\r\n    key: 'messages',\r\n    label: 'رسائل جديدة',\r\n    value: stats.value.newMessages,\r\n    icon: 'material-symbols:mail',\r\n    iconBg: 'bg-slate-100',\r\n    iconColor: 'text-slate-600'\r\n  },\r\n  {\r\n    key: 'users',\r\n    label: 'المستخدمين',\r\n    value: stats.value.totalUsers,\r\n    icon: 'material-symbols:group',\r\n    iconBg: 'bg-slate-100',\r\n    iconColor: 'text-slate-600'\r\n  },\r\n  {\r\n    key: 'bookings',\r\n    label: 'إجمالي الحجوزات',\r\n    value: stats.value.totalBookings,\r\n    icon: 'material-symbols:book-online',\r\n    iconBg: 'bg-slate-100',\r\n    iconColor: 'text-slate-600'\r\n  }\r\n])\r\n\r\n// بيانات الرسوم البيانية\r\nconst monthlySalesData = ref({\r\n  labels: ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو'],\r\n  datasets: [{\r\n    label: 'المبيعات (ريال)',\r\n    data: [45000, 52000, 48000, 61000, 55000, 67000],\r\n    borderColor: 'rgb(59, 130, 246)',\r\n    backgroundColor: 'rgba(59, 130, 246, 0.1)',\r\n    fill: true,\r\n    tension: 0.4\r\n  }]\r\n})\r\n\r\nconst bookingsDistributionData = ref({\r\n  labels: ['رحلات داخلية', 'رحلات خارجية', 'عمرة', 'حج', 'رحلات ترفيهية'],\r\n  datasets: [{\r\n    data: [35, 25, 20, 15, 5],\r\n    backgroundColor: [\r\n      'rgba(59, 130, 246, 0.8)',\r\n      'rgba(16, 185, 129, 0.8)',\r\n      'rgba(245, 158, 11, 0.8)',\r\n      'rgba(239, 68, 68, 0.8)',\r\n      'rgba(139, 92, 246, 0.8)'\r\n    ],\r\n    borderColor: [\r\n      'rgb(59, 130, 246)',\r\n      'rgb(16, 185, 129)',\r\n      'rgb(245, 158, 11)',\r\n      'rgb(239, 68, 68)',\r\n      'rgb(139, 92, 246)'\r\n    ]\r\n  }]\r\n})\r\n\r\n// إعدادات الرسوم البيانية\r\nconst salesChartOptions = ref({\r\n  plugins: {\r\n    legend: {\r\n      display: false\r\n    }\r\n  },\r\n  scales: {\r\n    y: {\r\n      beginAtZero: true,\r\n      ticks: {\r\n        callback: function(value) {\r\n          return new Intl.NumberFormat('ar-SA').format(value) + ' ريال'\r\n        }\r\n      }\r\n    }\r\n  }\r\n})\r\n\r\nconst distributionChartOptions = ref({\r\n  plugins: {\r\n    legend: {\r\n      position: 'bottom',\r\n      labels: {\r\n        padding: 15,\r\n        usePointStyle: true\r\n      }\r\n    }\r\n  }\r\n})\r\n\r\n// تحميل الإحصائيات\r\nconst loadStats = async () => {\r\n  try {\r\n    const result = await $fetch('/api/admin/stats')\r\n    \r\n    if (result && result.success && result.data) {\r\n      stats.value = result.data.stats || {\r\n        totalPackages: 0,\r\n        totalDestinations: 0,\r\n        newMessages: 0,\r\n        totalUsers: 0,\r\n        totalBookings: 0\r\n      }\r\n      recentActivities.value = Array.isArray(result.data.recentActivities) ? result.data.recentActivities : []\r\n      popularPackages.value = Array.isArray(result.data.popularPackages) ? result.data.popularPackages : []\r\n    } else {\r\n      // Fallback values if API doesn't return expected structure\r\n      stats.value = {\r\n        totalPackages: 0,\r\n        totalDestinations: 0,\r\n        newMessages: 0,\r\n        totalUsers: 0,\r\n        totalBookings: 0\r\n      }\r\n      recentActivities.value = []\r\n      popularPackages.value = []\r\n    }\r\n  } catch (error) {\r\n    console.error('خطأ في تحميل الإحصائيات:', error)\r\n    // استخدام قيم افتراضية في حالة الخطأ\r\n    stats.value = {\r\n      totalPackages: 0,\r\n      totalDestinations: 0,\r\n      newMessages: 0,\r\n      totalUsers: 0,\r\n      totalBookings: 0\r\n    }\r\n    recentActivities.value = []\r\n    popularPackages.value = []\r\n  } finally {\r\n    loadingActivities.value = false\r\n    loadingPackages.value = false\r\n  }\r\n}\r\n\r\n// تحميل الأنشطة الحديثة\r\nconst loadRecentActivities = async () => {\r\n  try {\r\n    loadingActivities.value = true\r\n    \r\n    // الأنشطة يتم تحميلها الآن من API الإحصائيات\r\n    // لا حاجة لاستدعاء منفصل\r\n  } catch (error) {\r\n    console.error('خطأ في تحميل الأنشطة:', error)\r\n    recentActivities.value = []\r\n  } finally {\r\n    loadingActivities.value = false\r\n  }\r\n}\r\n\r\n// تحميل الباقات الأكثر شعبية\r\nconst loadPopularPackages = async () => {\r\n  try {\r\n    loadingPackages.value = true\r\n    \r\n    // الباقات الشعبية يتم تحميلها الآن من API الإحصائيات\r\n    // لا حاجة لاستدعاء منفصل\r\n  } catch (error) {\r\n    console.error('خطأ في تحميل الباقات الشعبية:', error)\r\n    popularPackages.value = []\r\n  } finally {\r\n    loadingPackages.value = false\r\n  }\r\n}\r\n\r\n// دوال المساعدة\r\nconst formatDate = (dateString) => {\r\n  const date = new Date(dateString)\r\n  return date.toLocaleDateString('ar-SA', {\r\n    year: 'numeric',\r\n    month: 'short',\r\n    day: 'numeric',\r\n    hour: '2-digit',\r\n    minute: '2-digit'\r\n  })\r\n}\r\n\r\nconst formatPrice = (price) => {\r\n  return new Intl.NumberFormat('ar-SA', {\r\n    style: 'currency',\r\n    currency: 'SAR'\r\n  }).format(price)\r\n}\r\n\r\n// تحميل البيانات عند تحميل الصفحة\r\nonMounted(async () => {\r\n  // التأكد من أن المستخدم مصادق عليه قبل تحميل البيانات\r\n  const { checkAuth } = useAuth()\r\n  try {\r\n    await checkAuth(true)\r\n    await loadStats()\r\n  } catch (error) {\r\n    console.error('خطأ في تحميل بيانات الداشبورد:', error)\r\n  }\r\n})\r\n\r\n// SEO والميتا\r\nuseHead({\r\n  title: 'لوحة التحكم - Wonder Land Admin',\r\n  meta: [\r\n    { name: 'description', content: 'لوحة تحكم إدارة موقع Wonder Land Traveling Agency' },\r\n    { name: 'robots', content: 'noindex, nofollow' }\r\n  ]\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n/* تحسينات إضافية */\r\n.animate-spin {\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n/* تحسين البطاقات */\r\n.bg-white {\r\n  transition: all 0.2s ease-in-out;\r\n}\r\n\r\n.bg-white:hover {\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\r\n}\r\n</style>\r\n"],"version":3}