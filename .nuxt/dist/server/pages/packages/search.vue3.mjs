import"../../node_modules/_nuxt/image/dist/runtime/components/NuxtImg.vue.mjs";import V from"../../node_modules/_nuxt/icon/dist/runtime/components/index2.mjs";import{defineComponent as E,computed as b,watch as G,mergeProps as J,unref as i}from"vue";import{ssrRenderAttrs as K,ssrRenderComponent as u,ssrInterpolate as s,ssrRenderList as Q}from"vue/server-renderer";import{useRoute as T,useRouter as U}from"vue-router";import{usePackages as W}from"../../composables/usePackages.mjs";import{usePackageSearch as X}from"../../composables/usePackageSearch.mjs";import"../../components/ui/icons/SaudiRyialSymbol.vue.mjs";import"../../components/packages/PackageCard.vue.mjs";import"F:/TravelinAgency/node_modules/hookable/dist/index.mjs";import Y from"../../node_modules/_nuxt/image/dist/runtime/components/NuxtImg.vue2.mjs";import Z from"../../components/ui/icons/SaudiRyialSymbol.vue2.mjs";import F from"../../components/packages/PackageCard.vue2.mjs";import{useI18n as k}from"../../node_modules/vue-i18n/dist/vue-i18n.mjs";const fe=E({__name:"search",__ssrInlineRender:!0,setup(_){T();const P=U(),{t:a,locale:A}=k(),{packages:x,pending:B,error:y}=W(),{filters:r,searchQuery:p,filterOptions:S}=X(),q=b(()=>{var e;return(e=r.value)!=null&&e.destinations?r.value.destinations.map(t=>{var l,o,c;const n=(o=(l=S.value)==null?void 0:l.destinations)==null?void 0:o.find(m=>m.id===t);return((c=n==null?void 0:n.name)==null?void 0:c[A.value])||t}):[]}),N=b(()=>{var e,t,n,l,o;return r.value?(((e=r.value.destinations)==null?void 0:e.length)||0)>0||(((t=r.value.priceRange)==null?void 0:t.min)||0)!==0||(((n=r.value.priceRange)==null?void 0:n.max)||1/0)!==1/0||(((l=r.value.duration)==null?void 0:l.min)||0)!==0||(((o=r.value.duration)==null?void 0:o.max)||1/0)!==1/0||(r.value.travelers||1)>1:!1}),D=e=>e.max===1/0?`${a("common.from")} ${e.min.toLocaleString()}`:`${e.min.toLocaleString()} - ${e.max.toLocaleString()}`,H=e=>e.max===1/0?`${a("common.from")} ${e.min} ${a("common.days")}`:`${e.min} - ${e.max} ${a("common.days")}`,f=b(()=>x.value?x.value.filter(e=>{var t,n,l,o,c,m,v,h,w,$,R,L,I,M,C,z;if(p.value){const d=p.value.toLowerCase(),j=((t=e.title_en)==null?void 0:t.toLowerCase().includes(d))||((n=e.title_ar)==null?void 0:n.toLowerCase().includes(d)),g=((l=e.description_en)==null?void 0:l.toLowerCase().includes(d))||((o=e.description_ar)==null?void 0:o.toLowerCase().includes(d));if(!j&&!g)return!1}if(((m=(c=r.value)==null?void 0:c.destinations)==null?void 0:m.length)>0){const d=(v=e==null?void 0:e.travel_period)==null?void 0:v.toLowerCase();if(!d||!r.value.destinations.some(g=>{const O=g.toLowerCase();return d.includes(O)}))return!1}return!((e==null?void 0:e.price_per_person)<(((w=(h=r.value)==null?void 0:h.priceRange)==null?void 0:w.min)||0)||((R=($=r.value)==null?void 0:$.priceRange)==null?void 0:R.max)!==1/0&&(e==null?void 0:e.price_per_person)>r.value.priceRange.max||(e==null?void 0:e.duration_days)<(((I=(L=r.value)==null?void 0:L.duration)==null?void 0:I.min)||0)||((C=(M=r.value)==null?void 0:M.duration)==null?void 0:C.max)!==1/0&&(e==null?void 0:e.duration_days)>r.value.duration.max||(((z=r.value)==null?void 0:z.travelers)||1)>1&&(e==null?void 0:e.max_persons)<r.value.travelers)}):[]);return G([r,p],([e,t])=>{var n;P.replace({query:{...t&&{q:t},...((n=e.destinations)==null?void 0:n.length)&&{periods:e.destinations.join(",")},...e.priceRange.min>0&&{priceMin:e.priceRange.min},...e.priceRange.max<1/0&&{priceMax:e.priceRange.max},...e.duration.min>0&&{durationMin:e.duration.min},...e.duration.max<1/0&&{durationMax:e.duration.max},...e.travelers>1&&{travelers:e.travelers}}})},{deep:!0}),(e,t,n,l)=>{var m;const o=Y,c=V;t(`<div${K(J({class:"min-h-screen bg-gray-50"},l))}><section class="relative bg-cover bg-center py-20"><div class="absolute inset-0">`),t(u(o,{src:"/images/packages/home/packages-hero-bg.jpeg",alt:"Stunning beachfront villa with private pool and ocean views",width:"1920",height:"1080",loading:"eager",format:"webp",quality:"90",class:"w-full h-full object-cover",placeholder:""},null,n)),t(`<div class="absolute inset-0 bg-gradient-to-b from-black/50 via-black/30 to-black/50"></div></div><div class="container relative z-10 mx-auto px-4 text-center text-white"><h1 class="text-2xl md:text-3xl font-bold mb-4">${s(i(a)("search.results.title"))}</h1><div class="flex items-center justify-center text-1xl gap-2 text-sm md:text-base mb-6 w-full">`),f.value.length>0?t(`<span>${s(i(a)("search.results.count",{count:f.value.length}))}</span>`):t(`<span>${s(i(a)("search.results.empty"))}</span>`),t('</div><div class="flex flex-wrap justify-center gap-3 mb-8">'),(m=i(r))!=null&&m.destinations&&i(r).destinations.length?t(`<div class="flex items-center gap-2 bg-white/10 backdrop-blur-sm px-4 py-2 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"></path></svg><span>${s(q.value.join(", "))}</span></div>`):t("<!---->"),i(r).priceRange.min!==0||i(r).priceRange.max!==1/0?(t('<div class="flex items-center gap-2 bg-white/10 backdrop-blur-sm px-4 py-2 rounded-full">'),t(u(Z,{size:20,class:"text-white"},null,n)),t(`<span>${s(D(i(r).priceRange))}</span></div>`)):t("<!---->"),i(r).duration.min!==0||i(r).duration.max!==1/0?t(`<div class="flex items-center gap-2 bg-white/10 backdrop-blur-sm px-4 py-2 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path></svg><span>${s(H(i(r).duration))}</span></div>`):t("<!---->"),i(r).travelers>1?t(`<div class="flex items-center gap-2 bg-white/10 backdrop-blur-sm px-4 py-2 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"></path></svg><span>${s(i(r).travelers)} ${s(i(a)("search.travelers_count",{count:i(r).travelers}))}</span></div>`):t("<!---->"),N.value?t(`<button class="flex items-center gap-2 bg-primary/20 hover:bg-primary/30 backdrop-blur-sm px-4 py-2 rounded-full transition-colors"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg> ${s(i(a)("search.active_filters.clear_filters"))}</button>`):t("<!---->"),t('</div></div></section><section class="py-16"><div class="container mx-auto px-4">'),i(B)?t('<div class="flex justify-center items-center min-h-[400px]"><div class="animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent"></div></div>'):i(y)?(t('<div class="text-center text-red-500 py-16"><div class="max-w-md mx-auto">'),t(u(c,{name:"material-symbols:error-outline",class:"h-16 w-16 mx-auto mb-4 text-red-400"},null,n)),t(`<h3 class="text-lg font-medium mb-2">${s(i(a)("common.error"))}</h3><p class="text-gray-500">${s(i(y).message||"An error occurred while loading packages")}</p></div></div>`)):i(x).length===0?(t('<div class="text-center text-gray-500 py-16"><div class="max-w-md mx-auto">'),t(u(c,{name:"material-symbols:package-2-outline",class:"h-16 w-16 mx-auto mb-4 text-gray-400"},null,n)),t(`<h3 class="text-lg font-medium mb-2">${s(i(a)("packages.no_packages"))}</h3><p class="text-gray-500">${s(i(a)("packages.no_packages_description"))}</p></div></div>`)):f.value.length===0?(t('<div class="text-center py-16"><div class="max-w-md mx-auto">'),t(u(c,{name:"material-symbols:search-off",class:"h-16 w-16 mx-auto mb-4 text-gray-400"},null,n)),t(`<h3 class="text-lg font-medium mb-2">${s(i(a)("search.results.empty"))}</h3><p class="text-gray-500 mb-6">${s(i(a)("search.results.empty_description"))}</p><button class="px-6 py-2 bg-primary text-white rounded-xl hover:bg-primary/90 transition-colors">${s(i(a)("search.actions.clear_filters"))}</button></div></div>`)):(t('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"><!--[-->'),Q(f.value,v=>{t(u(F,{key:v.id,package_:v},null,n))}),t("<!--]--></div>")),t("</div></section></div>")}}});export{fe as default};
//# sourceMappingURL=search.vue3.mjs.map
