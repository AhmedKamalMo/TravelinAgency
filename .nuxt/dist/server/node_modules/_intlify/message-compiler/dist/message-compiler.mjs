import{format as se,assign as ue,isString as te,join as ce}from"../../shared/dist/shared.mjs";/*!
  * message-compiler v9.14.4
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function me(r,n,u){return{line:r,column:n,offset:u}}function V(r,n,u){return{start:r,end:n}}const ae={USE_MODULO_SYNTAX:1,__EXTEND_POINT__:2},ye={[ae.USE_MODULO_SYNTAX]:"Use modulo before '{{0}}'."};function be(r,n,...u){const f=process.env.NODE_ENV!=="production"?se(ye[r],...u||[]):r,L={message:String(f),code:r};return n&&(L.location=n),L}const N={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},Ue={[N.EXPECTED_TOKEN]:"Expected token: '{0}'",[N.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[N.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[N.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[N.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[N.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[N.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[N.EMPTY_PLACEHOLDER]:"Empty placeholder",[N.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[N.INVALID_LINKED_FORMAT]:"Invalid linked format",[N.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[N.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[N.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[N.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[N.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[N.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function B(r,n,u={}){const{domain:f,messages:L,args:l}=u,I=process.env.NODE_ENV!=="production"?se((L||Ue)[r]||"",...l||[]):r,_=new SyntaxError(String(I));return _.code=r,n&&(_.location=n),_.domain=f,_}function nt(r){throw r}const Re=/<\/?[\w\s="/.':;#-\/]+>/,rt=r=>Re.test(r),w=" ",ve="\r",y=`
`,Me="\u2028",Xe="\u2029";function ge(r){const n=r;let u=0,f=1,L=1,l=0;const I=o=>n[o]===ve&&n[o+1]===y,_=o=>n[o]===y,D=o=>n[o]===Xe,m=o=>n[o]===Me,b=o=>I(o)||_(o)||D(o)||m(o),S=()=>u,T=()=>f,v=()=>L,M=()=>l,h=o=>I(o)||D(o)||m(o)?y:n[o],C=()=>h(u),X=()=>h(u+l);function $(){return l=0,b(u)&&(f++,L=0),I(u)&&u++,u++,L++,n[u]}function s(){return I(u+l)&&l++,l++,n[u+l]}function a(){u=0,f=1,L=1,l=0}function d(o=0){l=o}function c(){const o=u+l;for(;o!==u;)$();l=0}return{index:S,line:T,column:v,peekOffset:M,charAt:h,currentChar:C,currentPeek:X,next:$,peek:s,reset:a,resetPeek:d,skipToPeek:c}}const H=void 0,we=".",ne="'",Ye="tokenizer";function He(r,n={}){const u=n.location!==!1,f=ge(r),L=()=>f.index(),l=()=>me(f.line(),f.column(),f.index()),I=l(),_=L(),D={currentType:14,offset:_,startLoc:I,endLoc:I,lastType:14,lastOffset:_,lastStartLoc:I,lastEndLoc:I,braceNest:0,inLinked:!1,text:""},m=()=>D,{onError:b}=n;function S(e,t,i,...E){const k=m();if(t.column+=i,t.offset+=i,b){const A=u?V(k.startLoc,t):null,Y=B(e,A,{domain:Ye,args:E});b(Y)}}function T(e,t,i){e.endLoc=l(),e.currentType=t;const E={type:t};return u&&(E.loc=V(e.startLoc,e.endLoc)),i!=null&&(E.value=i),E}const v=e=>T(e,14);function M(e,t){return e.currentChar()===t?(e.next(),t):(S(N.EXPECTED_TOKEN,l(),0,t),"")}function h(e){let t="";for(;e.currentPeek()===w||e.currentPeek()===y;)t+=e.currentPeek(),e.peek();return t}function C(e){const t=h(e);return e.skipToPeek(),t}function X(e){if(e===H)return!1;const t=e.charCodeAt(0);return t>=97&&t<=122||t>=65&&t<=90||t===95}function $(e){if(e===H)return!1;const t=e.charCodeAt(0);return t>=48&&t<=57}function s(e,t){const{currentType:i}=t;if(i!==2)return!1;h(e);const E=X(e.currentPeek());return e.resetPeek(),E}function a(e,t){const{currentType:i}=t;if(i!==2)return!1;h(e);const E=e.currentPeek()==="-"?e.peek():e.currentPeek(),k=$(E);return e.resetPeek(),k}function d(e,t){const{currentType:i}=t;if(i!==2)return!1;h(e);const E=e.currentPeek()===ne;return e.resetPeek(),E}function c(e,t){const{currentType:i}=t;if(i!==8)return!1;h(e);const E=e.currentPeek()===".";return e.resetPeek(),E}function o(e,t){const{currentType:i}=t;if(i!==9)return!1;h(e);const E=X(e.currentPeek());return e.resetPeek(),E}function p(e,t){const{currentType:i}=t;if(!(i===8||i===12))return!1;h(e);const E=e.currentPeek()===":";return e.resetPeek(),E}function O(e,t){const{currentType:i}=t;if(i!==10)return!1;const E=()=>{const A=e.currentPeek();return A==="{"?X(e.peek()):A==="@"||A==="%"||A==="|"||A===":"||A==="."||A===w||!A?!1:A===y?(e.peek(),E()):P(e,!1)},k=E();return e.resetPeek(),k}function U(e){h(e);const t=e.currentPeek()==="|";return e.resetPeek(),t}function W(e){const t=h(e),i=e.currentPeek()==="%"&&e.peek()==="{";return e.resetPeek(),{isModulo:i,hasSpace:t.length>0}}function P(e,t=!0){const i=(k=!1,A="",Y=!1)=>{const K=e.currentPeek();return K==="{"?A==="%"?!1:k:K==="@"||!K?A==="%"?!0:k:K==="%"?(e.peek(),i(k,"%",!0)):K==="|"?A==="%"||Y?!0:!(A===w||A===y):K===w?(e.peek(),i(!0,w,Y)):K===y?(e.peek(),i(!0,y,Y)):!0},E=i();return t&&e.resetPeek(),E}function g(e,t){const i=e.currentChar();return i===H?H:t(i)?(e.next(),i):null}function oe(e){const t=e.charCodeAt(0);return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57||t===95||t===36}function le(e){return g(e,oe)}function fe(e){const t=e.charCodeAt(0);return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57||t===95||t===36||t===45}function Ee(e){return g(e,fe)}function de(e){const t=e.charCodeAt(0);return t>=48&&t<=57}function Ne(e){return g(e,de)}function Le(e){const t=e.charCodeAt(0);return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function _e(e){return g(e,Le)}function Z(e){let t="",i="";for(;t=Ne(e);)i+=t;return i}function pe(e){C(e);const t=e.currentChar();return t!=="%"&&S(N.EXPECTED_TOKEN,l(),0,t),e.next(),"%"}function z(e){let t="";for(;;){const i=e.currentChar();if(i==="{"||i==="}"||i==="@"||i==="|"||!i)break;if(i==="%")if(P(e))t+=i,e.next();else break;else if(i===w||i===y)if(P(e))t+=i,e.next();else{if(U(e))break;t+=i,e.next()}else t+=i,e.next()}return t}function Ie(e){C(e);let t="",i="";for(;t=Ee(e);)i+=t;return e.currentChar()===H&&S(N.UNTERMINATED_CLOSING_BRACE,l(),0),i}function Ce(e){C(e);let t="";return e.currentChar()==="-"?(e.next(),t+=`-${Z(e)}`):t+=Z(e),e.currentChar()===H&&S(N.UNTERMINATED_CLOSING_BRACE,l(),0),t}function Te(e){return e!==ne&&e!==y}function he(e){C(e),M(e,"'");let t="",i="";for(;t=g(e,Te);)t==="\\"?i+=Ae(e):i+=t;const E=e.currentChar();return E===y||E===H?(S(N.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,l(),0),E===y&&(e.next(),M(e,"'")),i):(M(e,"'"),i)}function Ae(e){const t=e.currentChar();switch(t){case"\\":case"'":return e.next(),`\\${t}`;case"u":return ee(e,t,4);case"U":return ee(e,t,6);default:return S(N.UNKNOWN_ESCAPE_SEQUENCE,l(),0,t),""}}function ee(e,t,i){M(e,t);let E="";for(let k=0;k<i;k++){const A=_e(e);if(!A){S(N.INVALID_UNICODE_ESCAPE_SEQUENCE,l(),0,`\\${t}${E}${e.currentChar()}`);break}E+=A}return`\\${t}${E}`}function Se(e){return e!=="{"&&e!=="}"&&e!==w&&e!==y}function ke(e){C(e);let t="",i="";for(;t=g(e,Se);)i+=t;return i}function Oe(e){let t="",i="";for(;t=le(e);)i+=t;return i}function De(e){const t=i=>{const E=e.currentChar();return E==="{"||E==="%"||E==="@"||E==="|"||E==="("||E===")"||!E||E===w?i:(i+=E,e.next(),t(i))};return t("")}function Q(e){C(e);const t=M(e,"|");return C(e),t}function q(e,t){let i=null;switch(e.currentChar()){case"{":return t.braceNest>=1&&S(N.NOT_ALLOW_NEST_PLACEHOLDER,l(),0),e.next(),i=T(t,2,"{"),C(e),t.braceNest++,i;case"}":return t.braceNest>0&&t.currentType===2&&S(N.EMPTY_PLACEHOLDER,l(),0),e.next(),i=T(t,3,"}"),t.braceNest--,t.braceNest>0&&C(e),t.inLinked&&t.braceNest===0&&(t.inLinked=!1),i;case"@":return t.braceNest>0&&S(N.UNTERMINATED_CLOSING_BRACE,l(),0),i=F(e,t)||v(t),t.braceNest=0,i;default:{let k=!0,A=!0,Y=!0;if(U(e))return t.braceNest>0&&S(N.UNTERMINATED_CLOSING_BRACE,l(),0),i=T(t,1,Q(e)),t.braceNest=0,t.inLinked=!1,i;if(t.braceNest>0&&(t.currentType===5||t.currentType===6||t.currentType===7))return S(N.UNTERMINATED_CLOSING_BRACE,l(),0),t.braceNest=0,J(e,t);if(k=s(e,t))return i=T(t,5,Ie(e)),C(e),i;if(A=a(e,t))return i=T(t,6,Ce(e)),C(e),i;if(Y=d(e,t))return i=T(t,7,he(e)),C(e),i;if(!k&&!A&&!Y)return i=T(t,13,ke(e)),S(N.INVALID_TOKEN_IN_PLACEHOLDER,l(),0,i.value),C(e),i;break}}return i}function F(e,t){const{currentType:i}=t;let E=null;const k=e.currentChar();switch((i===8||i===9||i===12||i===10)&&(k===y||k===w)&&S(N.INVALID_LINKED_FORMAT,l(),0),k){case"@":return e.next(),E=T(t,8,"@"),t.inLinked=!0,E;case".":return C(e),e.next(),T(t,9,".");case":":return C(e),e.next(),T(t,10,":");default:return U(e)?(E=T(t,1,Q(e)),t.braceNest=0,t.inLinked=!1,E):c(e,t)||p(e,t)?(C(e),F(e,t)):o(e,t)?(C(e),T(t,12,Oe(e))):O(e,t)?(C(e),k==="{"?q(e,t)||E:T(t,11,De(e))):(i===8&&S(N.INVALID_LINKED_FORMAT,l(),0),t.braceNest=0,t.inLinked=!1,J(e,t))}}function J(e,t){let i={type:14};if(t.braceNest>0)return q(e,t)||v(t);if(t.inLinked)return F(e,t)||v(t);switch(e.currentChar()){case"{":return q(e,t)||v(t);case"}":return S(N.UNBALANCED_CLOSING_BRACE,l(),0),e.next(),T(t,3,"}");case"@":return F(e,t)||v(t);default:{if(U(e))return i=T(t,1,Q(e)),t.braceNest=0,t.inLinked=!1,i;const{isModulo:k,hasSpace:A}=W(e);if(k)return A?T(t,0,z(e)):T(t,4,pe(e));if(P(e))return T(t,0,z(e));break}}return i}function Pe(){const{currentType:e,offset:t,startLoc:i,endLoc:E}=D;return D.lastType=e,D.lastOffset=t,D.lastStartLoc=i,D.lastEndLoc=E,D.offset=L(),D.startLoc=l(),f.currentChar()===H?T(D,14):J(f,D)}return{nextToken:Pe,currentOffset:L,currentPosition:l,context:m}}const Ke="parser",$e=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function xe(r,n,u){switch(r){case"\\\\":return"\\";case"\\'":return"'";default:{const f=parseInt(n||u,16);return f<=55295||f>=57344?String.fromCodePoint(f):"�"}}}function Ge(r={}){const n=r.location!==!1,{onError:u,onWarn:f}=r;function L(s,a,d,c,...o){const p=s.currentPosition();if(p.offset+=c,p.column+=c,u){const O=n?V(d,p):null,U=B(a,O,{domain:Ke,args:o});u(U)}}function l(s,a,d,c,...o){const p=s.currentPosition();if(p.offset+=c,p.column+=c,f){const O=n?V(d,p):null;f(be(a,O,o))}}function I(s,a,d){const c={type:s};return n&&(c.start=a,c.end=a,c.loc={start:d,end:d}),c}function _(s,a,d,c){n&&(s.end=a,s.loc&&(s.loc.end=d))}function D(s,a){const d=s.context(),c=I(3,d.offset,d.startLoc);return c.value=a,_(c,s.currentOffset(),s.currentPosition()),c}function m(s,a){const d=s.context(),{lastOffset:c,lastStartLoc:o}=d,p=I(5,c,o);return p.index=parseInt(a,10),s.nextToken(),_(p,s.currentOffset(),s.currentPosition()),p}function b(s,a,d){const c=s.context(),{lastOffset:o,lastStartLoc:p}=c,O=I(4,o,p);return O.key=a,d===!0&&(O.modulo=!0),s.nextToken(),_(O,s.currentOffset(),s.currentPosition()),O}function S(s,a){const d=s.context(),{lastOffset:c,lastStartLoc:o}=d,p=I(9,c,o);return p.value=a.replace($e,xe),s.nextToken(),_(p,s.currentOffset(),s.currentPosition()),p}function T(s){const a=s.nextToken(),d=s.context(),{lastOffset:c,lastStartLoc:o}=d,p=I(8,c,o);return a.type!==12?(L(s,N.UNEXPECTED_EMPTY_LINKED_MODIFIER,d.lastStartLoc,0),p.value="",_(p,c,o),{nextConsumeToken:a,node:p}):(a.value==null&&L(s,N.UNEXPECTED_LEXICAL_ANALYSIS,d.lastStartLoc,0,R(a)),p.value=a.value||"",_(p,s.currentOffset(),s.currentPosition()),{node:p})}function v(s,a){const d=s.context(),c=I(7,d.offset,d.startLoc);return c.value=a,_(c,s.currentOffset(),s.currentPosition()),c}function M(s){const a=s.context(),d=I(6,a.offset,a.startLoc);let c=s.nextToken();if(c.type===9){const o=T(s);d.modifier=o.node,c=o.nextConsumeToken||s.nextToken()}switch(c.type!==10&&L(s,N.UNEXPECTED_LEXICAL_ANALYSIS,a.lastStartLoc,0,R(c)),c=s.nextToken(),c.type===2&&(c=s.nextToken()),c.type){case 11:c.value==null&&L(s,N.UNEXPECTED_LEXICAL_ANALYSIS,a.lastStartLoc,0,R(c)),d.key=v(s,c.value||"");break;case 5:c.value==null&&L(s,N.UNEXPECTED_LEXICAL_ANALYSIS,a.lastStartLoc,0,R(c)),d.key=b(s,c.value||"");break;case 6:c.value==null&&L(s,N.UNEXPECTED_LEXICAL_ANALYSIS,a.lastStartLoc,0,R(c)),d.key=m(s,c.value||"");break;case 7:c.value==null&&L(s,N.UNEXPECTED_LEXICAL_ANALYSIS,a.lastStartLoc,0,R(c)),d.key=S(s,c.value||"");break;default:{L(s,N.UNEXPECTED_EMPTY_LINKED_KEY,a.lastStartLoc,0);const o=s.context(),p=I(7,o.offset,o.startLoc);return p.value="",_(p,o.offset,o.startLoc),d.key=p,_(d,o.offset,o.startLoc),{nextConsumeToken:c,node:d}}}return _(d,s.currentOffset(),s.currentPosition()),{node:d}}function h(s){const a=s.context(),d=a.currentType===1?s.currentOffset():a.offset,c=a.currentType===1?a.endLoc:a.startLoc,o=I(2,d,c);o.items=[];let p=null,O=null;do{const P=p||s.nextToken();switch(p=null,P.type){case 0:P.value==null&&L(s,N.UNEXPECTED_LEXICAL_ANALYSIS,a.lastStartLoc,0,R(P)),o.items.push(D(s,P.value||""));break;case 6:P.value==null&&L(s,N.UNEXPECTED_LEXICAL_ANALYSIS,a.lastStartLoc,0,R(P)),o.items.push(m(s,P.value||""));break;case 4:O=!0;break;case 5:P.value==null&&L(s,N.UNEXPECTED_LEXICAL_ANALYSIS,a.lastStartLoc,0,R(P)),o.items.push(b(s,P.value||"",!!O)),O&&(l(s,ae.USE_MODULO_SYNTAX,a.lastStartLoc,0,R(P)),O=null);break;case 7:P.value==null&&L(s,N.UNEXPECTED_LEXICAL_ANALYSIS,a.lastStartLoc,0,R(P)),o.items.push(S(s,P.value||""));break;case 8:{const g=M(s);o.items.push(g.node),p=g.nextConsumeToken||null;break}}}while(a.currentType!==14&&a.currentType!==1);const U=a.currentType===1?a.lastOffset:s.currentOffset(),W=a.currentType===1?a.lastEndLoc:s.currentPosition();return _(o,U,W),o}function C(s,a,d,c){const o=s.context();let p=c.items.length===0;const O=I(1,a,d);O.cases=[],O.cases.push(c);do{const U=h(s);p||(p=U.items.length===0),O.cases.push(U)}while(o.currentType!==14);return p&&L(s,N.MUST_HAVE_MESSAGES_IN_PLURAL,d,0),_(O,s.currentOffset(),s.currentPosition()),O}function X(s){const a=s.context(),{offset:d,startLoc:c}=a,o=h(s);return a.currentType===14?o:C(s,d,c,o)}function $(s){const a=He(s,ue({},r)),d=a.context(),c=I(0,d.offset,d.startLoc);return n&&c.loc&&(c.loc.source=s),c.body=X(a),r.onCacheKey&&(c.cacheKey=r.onCacheKey(s)),d.currentType!==14&&L(a,N.UNEXPECTED_LEXICAL_ANALYSIS,d.lastStartLoc,0,s[d.offset]||""),_(c,a.currentOffset(),a.currentPosition()),c}return{parse:$}}function R(r){if(r.type===14)return"EOF";const n=(r.value||"").replace(/\r?\n/gu,"\\n");return n.length>10?n.slice(0,9)+"…":n}function Fe(r,n={}){const u={ast:r,helpers:new Set};return{context:()=>u,helper:l=>(u.helpers.add(l),l)}}function re(r,n){for(let u=0;u<r.length;u++)j(r[u],n)}function j(r,n){switch(r.type){case 1:re(r.cases,n),n.helper("plural");break;case 2:re(r.items,n);break;case 6:{j(r.key,n),n.helper("linked"),n.helper("type");break}case 5:n.helper("interpolate"),n.helper("list");break;case 4:n.helper("interpolate"),n.helper("named");break}}function Ve(r,n={}){const u=Fe(r);u.helper("normalize"),r.body&&j(r.body,u);const f=u.context();r.helpers=Array.from(f.helpers)}function Be(r){const n=r.body;return n.type===2?ie(n):n.cases.forEach(u=>ie(u)),r}function ie(r){if(r.items.length===1){const n=r.items[0];(n.type===3||n.type===9)&&(r.static=n.value,delete n.value)}else{const n=[];for(let u=0;u<r.items.length;u++){const f=r.items[u];if(!(f.type===3||f.type===9)||f.value==null)break;n.push(f.value)}if(n.length===r.items.length){r.static=ce(n);for(let u=0;u<r.items.length;u++){const f=r.items[u];(f.type===3||f.type===9)&&delete f.value}}}}const We="minifier";function x(r){switch(r.t=r.type,r.type){case 0:{const n=r;x(n.body),n.b=n.body,delete n.body;break}case 1:{const n=r,u=n.cases;for(let f=0;f<u.length;f++)x(u[f]);n.c=u,delete n.cases;break}case 2:{const n=r,u=n.items;for(let f=0;f<u.length;f++)x(u[f]);n.i=u,delete n.items,n.static&&(n.s=n.static,delete n.static);break}case 3:case 9:case 8:case 7:{const n=r;n.value&&(n.v=n.value,delete n.value);break}case 6:{const n=r;x(n.key),n.k=n.key,delete n.key,n.modifier&&(x(n.modifier),n.m=n.modifier,delete n.modifier);break}case 5:{const n=r;n.i=n.index,delete n.index;break}case 4:{const n=r;n.k=n.key,delete n.key;break}default:if(process.env.NODE_ENV!=="production")throw B(N.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:We,args:[r.type]})}delete r.type}const Qe="parser";function qe(r,n){const{filename:u,breakLineCode:f,needIndent:L}=n,l=n.location!==!1,I={filename:u,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:f,needIndent:L,indentLevel:0};l&&r.loc&&(I.source=r.loc.source);const _=()=>I;function D(h,C){I.code+=h}function m(h,C=!0){const X=C?f:"";D(L?X+"  ".repeat(h):X)}function b(h=!0){const C=++I.indentLevel;h&&m(C)}function S(h=!0){const C=--I.indentLevel;h&&m(C)}function T(){m(I.indentLevel)}return{context:_,push:D,indent:b,deindent:S,newline:T,helper:h=>`_${h}`,needIndent:()=>I.needIndent}}function Je(r,n){const{helper:u}=r;r.push(`${u("linked")}(`),G(r,n.key),n.modifier?(r.push(", "),G(r,n.modifier),r.push(", _type")):r.push(", undefined, _type"),r.push(")")}function je(r,n){const{helper:u,needIndent:f}=r;r.push(`${u("normalize")}([`),r.indent(f());const L=n.items.length;for(let l=0;l<L&&(G(r,n.items[l]),l!==L-1);l++)r.push(", ");r.deindent(f()),r.push("])")}function Ze(r,n){const{helper:u,needIndent:f}=r;if(n.cases.length>1){r.push(`${u("plural")}([`),r.indent(f());const L=n.cases.length;for(let l=0;l<L&&(G(r,n.cases[l]),l!==L-1);l++)r.push(", ");r.deindent(f()),r.push("])")}}function ze(r,n){n.body?G(r,n.body):r.push("null")}function G(r,n){const{helper:u}=r;switch(n.type){case 0:ze(r,n);break;case 1:Ze(r,n);break;case 2:je(r,n);break;case 6:Je(r,n);break;case 8:r.push(JSON.stringify(n.value),n);break;case 7:r.push(JSON.stringify(n.value),n);break;case 5:r.push(`${u("interpolate")}(${u("list")}(${n.index}))`,n);break;case 4:r.push(`${u("interpolate")}(${u("named")}(${JSON.stringify(n.key)}))`,n);break;case 9:r.push(JSON.stringify(n.value),n);break;case 3:r.push(JSON.stringify(n.value),n);break;default:if(process.env.NODE_ENV!=="production")throw B(N.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:Qe,args:[n.type]})}}const et=(r,n={})=>{const u=te(n.mode)?n.mode:"normal",f=te(n.filename)?n.filename:"message.intl";n.sourceMap;const L=n.breakLineCode!=null?n.breakLineCode:u==="arrow"?";":`
`,l=n.needIndent?n.needIndent:u!=="arrow",I=r.helpers||[],_=qe(r,{filename:f,breakLineCode:L,needIndent:l});_.push(u==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),_.indent(l),I.length>0&&(_.push(`const { ${ce(I.map(b=>`${b}: _${b}`),", ")} } = ctx`),_.newline()),_.push("return "),G(_,r),_.deindent(l),_.push("}"),delete r.helpers;const{code:D,map:m}=_.context();return{ast:r,code:D,map:m?m.toJSON():void 0}};function it(r,n={}){const u=ue({},n),f=!!u.jit,L=!!u.minify,l=u.optimize==null?!0:u.optimize,_=Ge(u).parse(r);return f?(l&&Be(_),L&&x(_),{ast:_,code:""}):(Ve(_,u),et(_,u))}export{N as CompileErrorCodes,ae as CompileWarnCodes,Ke as ERROR_DOMAIN,it as baseCompile,B as createCompileError,be as createCompileWarn,V as createLocation,Ge as createParser,me as createPosition,nt as defaultOnError,rt as detectHtmlTag,Ue as errorMessages,ye as warnMessages};
//# sourceMappingURL=message-compiler.mjs.map
