{"version":3,"file":"urls.mjs","sources":["../../../../../../node_modules/site-config-stack/dist/urls.mjs"],"sourcesContent":["import { hasProtocol, parseURL, withLeadingSlash, withoutTrailingSlash, withBase, withTrailingSlash } from 'ufo';\n\nfunction resolveSitePath(pathOrUrl, options) {\n  let path = pathOrUrl;\n  if (hasProtocol(pathOrUrl, { strict: false, acceptRelative: true })) {\n    const parsed = parseURL(pathOrUrl);\n    path = parsed.pathname;\n  }\n  const base = withLeadingSlash(options.base || \"/\");\n  if (base !== \"/\" && path.startsWith(base)) {\n    path = path.slice(base.length);\n  }\n  let origin = withoutTrailingSlash(options.absolute ? options.siteUrl : \"\");\n  if (base !== \"/\" && origin.endsWith(base)) {\n    origin = origin.slice(0, origin.indexOf(base));\n  }\n  const baseWithOrigin = options.withBase ? withBase(base, origin || \"/\") : origin;\n  const resolvedUrl = withBase(path, baseWithOrigin);\n  return path === \"/\" && !options.withBase ? withTrailingSlash(resolvedUrl) : fixSlashes(options.trailingSlash, resolvedUrl);\n}\nfunction isPathFile(path) {\n  const lastSegment = path.split(\"/\").pop();\n  return !!(lastSegment || path).match(/\\.[0-9a-z]+$/i)?.[0];\n}\nfunction fixSlashes(trailingSlash, pathOrUrl) {\n  const $url = parseURL(pathOrUrl);\n  if (isPathFile($url.pathname))\n    return pathOrUrl;\n  const fixedPath = trailingSlash ? withTrailingSlash($url.pathname) : withoutTrailingSlash($url.pathname);\n  return `${$url.protocol ? `${$url.protocol}//` : \"\"}${$url.host || \"\"}${fixedPath}${$url.search || \"\"}${$url.hash || \"\"}`;\n}\n\nexport { fixSlashes, isPathFile, resolveSitePath };\n"],"names":["resolveSitePath","pathOrUrl","options","path","hasProtocol","parseURL","base","withLeadingSlash","origin","withoutTrailingSlash","baseWithOrigin","withBase","resolvedUrl","withTrailingSlash","fixSlashes","isPathFile","_a","trailingSlash","$url","fixedPath"],"mappings":"0JAEA,SAASA,EAAgBC,EAAWC,EAAS,CAC3C,IAAIC,EAAOF,EACPG,EAAYH,EAAW,CAAE,OAAQ,GAAO,eAAgB,EAAI,CAAE,IAEhEE,EADeE,EAASJ,CAAS,EACnB,UAEhB,MAAMK,EAAOC,EAAiBL,EAAQ,MAAQ,GAAG,EAC7CI,IAAS,KAAOH,EAAK,WAAWG,CAAI,IACtCH,EAAOA,EAAK,MAAMG,EAAK,MAAM,GAE/B,IAAIE,EAASC,EAAqBP,EAAQ,SAAWA,EAAQ,QAAU,EAAE,EACrEI,IAAS,KAAOE,EAAO,SAASF,CAAI,IACtCE,EAASA,EAAO,MAAM,EAAGA,EAAO,QAAQF,CAAI,CAAC,GAE/C,MAAMI,EAAiBR,EAAQ,SAAWS,EAASL,EAAME,GAAU,GAAG,EAAIA,EACpEI,EAAcD,EAASR,EAAMO,CAAc,EACjD,OAAOP,IAAS,KAAO,CAACD,EAAQ,SAAWW,EAAkBD,CAAW,EAAIE,EAAWZ,EAAQ,cAAeU,CAAW,CAC3H,CACA,SAASG,EAAWZ,EAAM,OAExB,MAAO,CAAC,GAAEa,GADUb,EAAK,MAAM,GAAG,EAAE,IAAK,GAChBA,GAAM,MAAM,eAAe,IAA1C,MAAAa,EAA8C,GAC1D,CACA,SAASF,EAAWG,EAAehB,EAAW,CAC5C,MAAMiB,EAAOb,EAASJ,CAAS,EAC/B,GAAIc,EAAWG,EAAK,QAAQ,EAC1B,OAAOjB,EACT,MAAMkB,EAAYF,EAAgBJ,EAAkBK,EAAK,QAAQ,EAAIT,EAAqBS,EAAK,QAAQ,EACvG,MAAO,GAAGA,EAAK,SAAW,GAAGA,EAAK,QAAQ,KAAO,EAAE,GAAGA,EAAK,MAAQ,EAAE,GAAGC,CAAS,GAAGD,EAAK,QAAU,EAAE,GAAGA,EAAK,MAAQ,EAAE,EACzH","x_google_ignoreList":[0]}