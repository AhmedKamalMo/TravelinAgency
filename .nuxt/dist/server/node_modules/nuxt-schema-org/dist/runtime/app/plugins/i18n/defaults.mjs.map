{"version":3,"file":"defaults.mjs","sources":["../../../../../../../../../../node_modules/nuxt-schema-org/dist/runtime/app/plugins/i18n/defaults.js"],"sourcesContent":["import {\n  createSitePathResolver,\n  defineNuxtPlugin,\n  defineWebPage,\n  defineWebSite,\n  useLocalePath,\n  useRuntimeConfig,\n  useSchemaOrg,\n  useSiteConfig\n} from \"#imports\";\nimport { resolveSitePath } from \"site-config-stack/urls\";\nimport { hasProtocol, withHttps } from \"ufo\";\nimport { maybeAddIdentitySchemaOrg } from \"../../utils/shared.js\";\nexport default defineNuxtPlugin({\n  name: \"nuxt-schema-org:defaults\",\n  dependsOn: [\n    \"nuxt-schema-org:init\"\n  ],\n  setup(nuxtApp) {\n    const siteConfig = useSiteConfig();\n    const pathResolver = createSitePathResolver({\n      canonical: true,\n      absolute: true\n    });\n    if (!nuxtApp.$i18n)\n      return;\n    const localePath = useLocalePath();\n    const locales = nuxtApp.$i18n?.locales.value || [];\n    const siteUrl = pathResolver(localePath(\"index\")).value;\n    const websiteId = `${siteUrl}#website`;\n    const website = defineWebSite({\n      \"@id\": websiteId,\n      \"url\": siteUrl,\n      \"name\": siteConfig?.name || \"\",\n      \"inLanguage\": nuxtApp.$i18n.localeProperties.value.language || \"\",\n      \"description\": siteConfig.description || \"\"\n    });\n    const nuxtBase = useRuntimeConfig().app.baseURL || \"/\";\n    const resolveIdForLocale = (locale) => {\n      if (locale.domain) {\n        return resolveSitePath(localePath(\"index\", locale.code), {\n          absolute: true,\n          siteUrl: hasProtocol(locale.domain, { acceptRelative: false }) ? locale.domain : withHttps(locale.domain),\n          trailingSlash: siteConfig.trailingSlash,\n          base: nuxtBase\n        });\n      }\n      return pathResolver(localePath(\"index\", locale.code)).value;\n    };\n    if (siteConfig.defaultLocale) {\n      if (siteConfig.currentLocale && siteConfig.currentLocale !== siteConfig.defaultLocale) {\n        website.translationOfWork = {\n          \"@type\": \"WebSite\",\n          \"@id\": `${resolveIdForLocale({ code: siteConfig.currentLocale })}#website`\n        };\n      } else {\n        website.workTranslation = locales.filter((locale) => locale.code !== siteConfig.defaultLocale).map((locale) => {\n          return {\n            \"@type\": \"WebSite\",\n            \"@id\": `${resolveIdForLocale(locale)}#website`\n          };\n        });\n      }\n    }\n    useSchemaOrg([\n      website,\n      defineWebPage({\n        isPartOf: {\n          \"@id\": websiteId\n        }\n      })\n    ]);\n    maybeAddIdentitySchemaOrg();\n  }\n});\n"],"names":["defaults_YlXDnzKDrNotL_BrBwgqlwKVZIfmVSvhRtsEp2y7vZ0","defineNuxtPlugin","nuxtApp","siteConfig","useSiteConfig","pathResolver","createSitePathResolver","localePath","useLocalePath","locales","_a","siteUrl","websiteId","website","defineWebSite","nuxtBase","useRuntimeConfig","resolveIdForLocale","locale","resolveSitePath","hasProtocol","withHttps","useSchemaOrg","defineWebPage","maybeAddIdentitySchemaOrg"],"mappings":"gyBAaA,MAAAA,EAAeC,EAAiB,CAC9B,KAAM,2BACN,UAAW,CACT,sBACD,EACD,MAAMC,EAAS,OACb,MAAMC,EAAaC,EAAe,EAC5BC,EAAeC,EAAuB,CAC1C,UAAW,GACX,SAAU,EAChB,CAAK,EACD,GAAI,CAACJ,EAAQ,MACX,OACF,MAAMK,EAAaC,EAAe,EAC5BC,IAAUC,EAAAR,EAAQ,QAAR,YAAAQ,EAAe,QAAQ,QAAS,CAAE,EAC5CC,EAAUN,EAAaE,EAAW,OAAO,CAAC,EAAE,MAC5CK,EAAY,GAAGD,CAAO,WACtBE,EAAUC,EAAc,CAC5B,MAAOF,EACP,IAAOD,EACP,MAAQR,GAAA,YAAAA,EAAY,OAAQ,GAC5B,WAAcD,EAAQ,MAAM,iBAAiB,MAAM,UAAY,GAC/D,YAAeC,EAAW,aAAe,EAC/C,CAAK,EACKY,EAAWC,EAAgB,EAAG,IAAI,SAAW,IAC7CC,EAAsBC,GACtBA,EAAO,OACFC,EAAgBZ,EAAW,QAASW,EAAO,IAAI,EAAG,CACvD,SAAU,GACV,QAASE,EAAYF,EAAO,OAAQ,CAAE,eAAgB,GAAO,EAAIA,EAAO,OAASG,EAAUH,EAAO,MAAM,EACxG,cAAef,EAAW,cAC1B,KAAMY,CAChB,CAAS,EAEIV,EAAaE,EAAW,QAASW,EAAO,IAAI,CAAC,EAAE,MAEpDf,EAAW,gBACTA,EAAW,eAAiBA,EAAW,gBAAkBA,EAAW,cACtEU,EAAQ,kBAAoB,CAC1B,QAAS,UACT,MAAO,GAAGI,EAAmB,CAAE,KAAMd,EAAW,aAAe,CAAA,CAAC,UACjE,EAEDU,EAAQ,gBAAkBJ,EAAQ,OAAQS,GAAWA,EAAO,OAASf,EAAW,aAAa,EAAE,IAAKe,IAC3F,CACL,QAAS,UACT,MAAO,GAAGD,EAAmBC,CAAM,CAAC,UACrC,EACF,GAGLI,EAAa,CACXT,EACAU,EAAc,CACZ,SAAU,CACR,MAAOX,CACjB,CACO,CAAA,CACP,CAAK,EACDY,EAA2B,CAC/B,CACA,CAAC","x_google_ignoreList":[0]}