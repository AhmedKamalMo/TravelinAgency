import{hasInjectionContext as P,getCurrentInstance as w,shallowReactive as p,reactive as H,effectScope as b,getCurrentScope as A}from"vue";import{createHooks as N}from"F:/TravelinAgency/node_modules/hookable/dist/index.mjs";import{getContext as I}from"F:/TravelinAgency/node_modules/unctx/dist/index.mjs";import{appId as g}from"../../../../_virtual/virtual_nuxt_F__TravelinAgency_.nuxt_nuxt.config.mjs";function k(e=g){return I(e,{asyncContext:!1})}const W="__nuxt_plugin";function F(e){var c;let n=0;const t={_id:e.id||g||"nuxt-app",_scope:b(),provide:void 0,globalName:"nuxt",versions:{get nuxt(){return"3.16.2"},get vue(){return t.vueApp.version}},payload:p({...((c=e.ssrContext)==null?void 0:c.payload)||{},data:p({}),state:H({}),once:new Set,_errors:p({})}),static:{data:{}},runWithContext(r){return t._scope.active&&!A()?t._scope.run(()=>v(t,r)):v(t,r)},isHydrating:!1,deferHydration(){if(!t.isHydrating)return()=>{};n++;let r=!1;return()=>{if(!r&&(r=!0,n--,n===0))return t.isHydrating=!1,t.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:p({}),_payloadRevivers:{},...e};t.payload.serverRendered=!0,t.ssrContext&&(t.payload.path=t.ssrContext.url,t.ssrContext.nuxt=t,t.ssrContext.payload=t.payload,t.ssrContext.config={public:t.ssrContext.runtimeConfig.public,app:t.ssrContext.runtimeConfig.app}),t.hooks=N(),t.hook=t.hooks.hook;{const r=async function(s,i){for(const f of s)await t.runWithContext(()=>f(...i))};t.hooks.callHook=(s,...i)=>t.hooks.callHookWith(r,s,...i)}t.callHook=t.hooks.callHook,t.provide=(r,s)=>{const i="$"+r;d(t,i,s),d(t.vueApp.config.globalProperties,i,s)},d(t.vueApp,"$nuxt",t),d(t.vueApp.config.globalProperties,"$nuxt",t);const a=e.ssrContext.runtimeConfig;return t.provide("config",a),t}function $(e,n){n.hooks&&e.hooks.addHooks(n.hooks)}async function j(e,n){if(typeof n=="function"){const{provide:t}=await e.runWithContext(()=>n(e))||{};if(t&&typeof t=="object")for(const a in t)e.provide(a,t[a])}}async function G(e,n){var f,x,h,C;const t=[],a=[],c=[],r=[];let s=0;async function i(o){var y;const m=((y=o.dependsOn)==null?void 0:y.filter(l=>n.some(u=>u._name===l)&&!t.includes(l)))??[];if(m.length>0)a.push([new Set(m),o]);else{const l=j(e,o).then(async()=>{o._name&&(t.push(o._name),await Promise.all(a.map(async([u,_])=>{u.has(o._name)&&(u.delete(o._name),u.size===0&&(s++,await i(_)))})))});o.parallel?c.push(l.catch(u=>r.push(u))):await l}}for(const o of n)(f=e.ssrContext)!=null&&f.islandContext&&((x=o.env)==null?void 0:x.islands)===!1||$(e,o);for(const o of n)(h=e.ssrContext)!=null&&h.islandContext&&((C=o.env)==null?void 0:C.islands)===!1||await i(o);if(await Promise.all(c),s)for(let o=0;o<s;o++)await Promise.all(c);if(r.length)throw r[0]}function O(e){if(typeof e=="function")return e;const n=e._name||e.name;return delete e.name,Object.assign(e.setup||(()=>{}),e,{[W]:!0,_name:n})}function v(e,n,t){const a=()=>n(),c=k(e._id);return e.vueApp.runWithContext(()=>c.callAsync(e,a))}function R(e){var t;let n;return P()&&(n=(t=w())==null?void 0:t.appContext.app.$nuxt),n||(n=k(e).tryUse()),n||null}function S(e){const n=R(e);if(!n)throw new Error("[nuxt] instance unavailable");return n}function T(e){return S().$config}function d(e,n,t){Object.defineProperty(e,n,{get:()=>t})}export{W as NuxtPluginIndicator,j as applyPlugin,G as applyPlugins,v as callWithNuxt,F as createNuxtApp,O as defineNuxtPlugin,k as getNuxtAppCtx,$ as registerPluginHooks,R as tryUseNuxtApp,S as useNuxtApp,T as useRuntimeConfig};
//# sourceMappingURL=nuxt.mjs.map
