import{defineComponent as i,inject as d,computed as c,unref as f,ref as P,h as s,Suspense as v,nextTick as L,mergeProps as b,provide as h}from"vue";import{useRoute as g}from"../composables/router.mjs";import{useNuxtApp as R}from"../nuxt.mjs";import{_wrapInTransition as S}from"./utils.mjs";import{PageRouteSymbol as j,LayoutMetaSymbol as k}from"./injections.mjs";import{useRoute as x}from"vue-router";import l from"../../../../../_virtual/virtual_nuxt_F__TravelinAgency_.nuxt_layouts.mjs";import{appLayoutTransition as T}from"../../../../../_virtual/virtual_nuxt_F__TravelinAgency_.nuxt_nuxt.config.mjs";const A=i({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},setup(t,e){return()=>s(l[t.name],t.layoutProps,e.slots)}}),_={name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},q=i({name:"NuxtLayout",inheritAttrs:!1,props:_,setup(t,e){const o=R(),a=d(j),r=a===g()?x():a,u=c(()=>{let n=f(t.name)??r.meta.layout??"default";return n&&!(n in l)&&t.fallback&&(n=f(t.fallback)),n}),m=P();e.expose({layoutRef:m});const y=o.deferHydration();return()=>{const n=u.value&&u.value in l,p=r.meta.layoutTransition??T;return S(n&&p,{default:()=>s(v,{suspensible:!0,onResolve:()=>{L(y)}},{default:()=>s(B,{layoutProps:b(e.attrs,{ref:m}),key:u.value||void 0,name:u.value,shouldProvide:!t.name,hasTransition:!!p},e.slots)})}).default()}}}),B=i({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean}},setup(t,e){const o=t.name;return t.shouldProvide&&h(k,{isCurrent:a=>o===(a.meta.layout??"default")}),()=>{var a,r;return!o||typeof o=="string"&&!(o in l)?(r=(a=e.slots).default)==null?void 0:r.call(a):s(A,{key:o,layoutProps:t.layoutProps,name:o},e.slots)}}});export{q as default};
//# sourceMappingURL=nuxt-layout.mjs.map
