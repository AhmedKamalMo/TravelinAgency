{"version":3,"file":"nuxt-layout.mjs","sources":["../../../../../../../../node_modules/nuxt/dist/app/components/nuxt-layout.js"],"sourcesContent":["import { Suspense, computed, defineComponent, h, inject, mergeProps, nextTick, onMounted, provide, ref, unref } from \"vue\";\nimport { useRoute, useRouter } from \"../composables/router.js\";\nimport { useNuxtApp } from \"../nuxt.js\";\nimport { _wrapInTransition } from \"./utils.js\";\nimport { LayoutMetaSymbol, PageRouteSymbol } from \"./injections.js\";\nimport { useRoute as useVueRouterRoute } from \"#build/pages\";\nimport layouts from \"#build/layouts\";\nimport { appLayoutTransition as defaultLayoutTransition } from \"#build/nuxt.config.mjs\";\nconst LayoutLoader = defineComponent({\n  name: \"LayoutLoader\",\n  inheritAttrs: false,\n  props: {\n    name: String,\n    layoutProps: Object\n  },\n  setup(props, context) {\n    return () => h(layouts[props.name], props.layoutProps, context.slots);\n  }\n});\nconst nuxtLayoutProps = {\n  name: {\n    type: [String, Boolean, Object],\n    default: null\n  },\n  fallback: {\n    type: [String, Object],\n    default: null\n  }\n};\nexport default defineComponent({\n  name: \"NuxtLayout\",\n  inheritAttrs: false,\n  props: nuxtLayoutProps,\n  setup(props, context) {\n    const nuxtApp = useNuxtApp();\n    const injectedRoute = inject(PageRouteSymbol);\n    const route = injectedRoute === useRoute() ? useVueRouterRoute() : injectedRoute;\n    const layout = computed(() => {\n      let layout2 = unref(props.name) ?? route.meta.layout ?? \"default\";\n      if (layout2 && !(layout2 in layouts)) {\n        if (import.meta.dev && layout2 !== \"default\") {\n          console.warn(`Invalid layout \\`${layout2}\\` selected.`);\n        }\n        if (props.fallback) {\n          layout2 = unref(props.fallback);\n        }\n      }\n      return layout2;\n    });\n    const layoutRef = ref();\n    context.expose({ layoutRef });\n    const done = nuxtApp.deferHydration();\n    if (import.meta.client && nuxtApp.isHydrating) {\n      const removeErrorHook = nuxtApp.hooks.hookOnce(\"app:error\", done);\n      useRouter().beforeEach(removeErrorHook);\n    }\n    if (import.meta.dev) {\n      nuxtApp._isNuxtLayoutUsed = true;\n    }\n    return () => {\n      const hasLayout = layout.value && layout.value in layouts;\n      const transitionProps = route.meta.layoutTransition ?? defaultLayoutTransition;\n      return _wrapInTransition(hasLayout && transitionProps, {\n        default: () => h(Suspense, { suspensible: true, onResolve: () => {\n          nextTick(done);\n        } }, {\n          default: () => h(\n            LayoutProvider,\n            {\n              layoutProps: mergeProps(context.attrs, { ref: layoutRef }),\n              key: layout.value || void 0,\n              name: layout.value,\n              shouldProvide: !props.name,\n              hasTransition: !!transitionProps\n            },\n            context.slots\n          )\n        })\n      }).default();\n    };\n  }\n});\nconst LayoutProvider = defineComponent({\n  name: \"NuxtLayoutProvider\",\n  inheritAttrs: false,\n  props: {\n    name: {\n      type: [String, Boolean]\n    },\n    layoutProps: {\n      type: Object\n    },\n    hasTransition: {\n      type: Boolean\n    },\n    shouldProvide: {\n      type: Boolean\n    }\n  },\n  setup(props, context) {\n    const name = props.name;\n    if (props.shouldProvide) {\n      provide(LayoutMetaSymbol, {\n        isCurrent: (route) => name === (route.meta.layout ?? \"default\")\n      });\n    }\n    let vnode;\n    if (import.meta.dev && import.meta.client) {\n      onMounted(() => {\n        nextTick(() => {\n          if ([\"#comment\", \"#text\"].includes(vnode?.el?.nodeName)) {\n            if (name) {\n              console.warn(`[nuxt] \\`${name}\\` layout does not have a single root node and will cause errors when navigating between routes.`);\n            } else {\n              console.warn(\"[nuxt] `<NuxtLayout>` needs to be passed a single root node in its default slot.\");\n            }\n          }\n        });\n      });\n    }\n    return () => {\n      if (!name || typeof name === \"string\" && !(name in layouts)) {\n        if (import.meta.dev && import.meta.client && props.hasTransition) {\n          vnode = context.slots.default?.();\n          return vnode;\n        }\n        return context.slots.default?.();\n      }\n      if (import.meta.dev && import.meta.client && props.hasTransition) {\n        vnode = h(\n          LayoutLoader,\n          { key: name, layoutProps: props.layoutProps, name },\n          context.slots\n        );\n        return vnode;\n      }\n      return h(\n        LayoutLoader,\n        { key: name, layoutProps: props.layoutProps, name },\n        context.slots\n      );\n    };\n  }\n});\n"],"names":["LayoutLoader","defineComponent","props","context","h","layouts","nuxtLayoutProps","__nuxt_component_0","nuxtApp","useNuxtApp","injectedRoute","inject","PageRouteSymbol","route","useRoute","useVueRouterRoute","layout","computed","layout2","unref","layoutRef","ref","done","hasLayout","transitionProps","defaultLayoutTransition","_wrapInTransition","Suspense","nextTick","LayoutProvider","mergeProps","name","provide","LayoutMetaSymbol","_b","_a"],"mappings":"4lBAQA,MAAMA,EAAeC,EAAgB,CACnC,KAAM,eACN,aAAc,GACd,MAAO,CACL,KAAM,OACN,YAAa,MACd,EACD,MAAMC,EAAOC,EAAS,CACpB,MAAO,IAAMC,EAAEC,EAAQH,EAAM,IAAI,EAAGA,EAAM,YAAaC,EAAQ,KAAK,CACxE,CACA,CAAC,EACKG,EAAkB,CACtB,KAAM,CACJ,KAAM,CAAC,OAAQ,QAAS,MAAM,EAC9B,QAAS,IACV,EACD,SAAU,CACR,KAAM,CAAC,OAAQ,MAAM,EACrB,QAAS,IACb,CACA,EACAC,EAAeN,EAAgB,CAC7B,KAAM,aACN,aAAc,GACd,MAAOK,EACP,MAAMJ,EAAOC,EAAS,CACpB,MAAMK,EAAUC,EAAY,EACtBC,EAAgBC,EAAOC,CAAe,EACtCC,EAAQH,IAAkBI,EAAQ,EAAKC,EAAmB,EAAGL,EAC7DM,EAASC,EAAS,IAAM,CAC5B,IAAIC,EAAUC,EAAMjB,EAAM,IAAI,GAAKW,EAAM,KAAK,QAAU,UACxD,OAAIK,GAAW,EAAEA,KAAWb,IAItBH,EAAM,WACRgB,EAAUC,EAAMjB,EAAM,QAAQ,GAG3BgB,CACb,CAAK,EACKE,EAAYC,EAAK,EACvBlB,EAAQ,OAAO,CAAE,UAAAiB,EAAW,EAC5B,MAAME,EAAOd,EAAQ,eAAgB,EAQrC,MAAO,IAAM,CACX,MAAMe,EAAYP,EAAO,OAASA,EAAO,SAASX,EAC5CmB,EAAkBX,EAAM,KAAK,kBAAoBY,EACvD,OAAOC,EAAkBH,GAAaC,EAAiB,CACrD,QAAS,IAAMpB,EAAEuB,EAAU,CAAE,YAAa,GAAM,UAAW,IAAM,CAC/DC,EAASN,CAAI,CACvB,GAAa,CACH,QAAS,IAAMlB,EACbyB,EACA,CACE,YAAaC,EAAW3B,EAAQ,MAAO,CAAE,IAAKiB,EAAW,EACzD,IAAKJ,EAAO,OAAS,OACrB,KAAMA,EAAO,MACb,cAAe,CAACd,EAAM,KACtB,cAAe,CAAC,CAACsB,CAClB,EACDrB,EAAQ,KACpB,CACS,CAAA,CACF,CAAA,EAAE,QAAS,CACb,CACL,CACA,CAAC,EACK0B,EAAiB5B,EAAgB,CACrC,KAAM,qBACN,aAAc,GACd,MAAO,CACL,KAAM,CACJ,KAAM,CAAC,OAAQ,OAAO,CACvB,EACD,YAAa,CACX,KAAM,MACP,EACD,cAAe,CACb,KAAM,OACP,EACD,cAAe,CACb,KAAM,OACZ,CACG,EACD,MAAMC,EAAOC,EAAS,CACpB,MAAM4B,EAAO7B,EAAM,KACnB,OAAIA,EAAM,eACR8B,EAAQC,EAAkB,CACxB,UAAYpB,GAAUkB,KAAUlB,EAAM,KAAK,QAAU,UAC7D,CAAO,EAgBI,IAAM,SACX,MAAI,CAACkB,GAAQ,OAAOA,GAAS,UAAY,EAAEA,KAAQ1B,IAK1C6B,GAAAC,EAAAhC,EAAQ,OAAM,UAAd,YAAA+B,EAAA,KAAAC,GAUF/B,EACLJ,EACA,CAAE,IAAK+B,EAAM,YAAa7B,EAAM,YAAa,KAAA6B,CAAM,EACnD5B,EAAQ,KACT,CACF,CACL,CACA,CAAC","x_google_ignoreList":[0]}