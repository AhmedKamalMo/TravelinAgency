import{noop as A,toValue as E,isObject as w,tryOnScopeDispose as g}from"../shared/index.mjs";import{watch as L}from"vue";function d(s){var i;const n=E(s);return(i=n==null?void 0:n.$el)!=null?i:n}const v=void 0;function y(...s){let i,n,r,a;if(typeof s[0]=="string"||Array.isArray(s[0])?([n,r,a]=s,i=v):[i,n,r,a]=s,!i)return A;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const f=[],p=()=>{f.forEach(c=>c()),f.length=0},l=(c,u,t,e)=>(c.addEventListener(u,t,e),()=>c.removeEventListener(u,t,e)),m=L(()=>[d(i),E(a)],([c,u])=>{if(p(),!c)return;const t=w(u)?{...u}:u;f.push(...n.flatMap(e=>r.map(o=>l(c,e,o,t))))},{immediate:!0,flush:"post"}),h=()=>{m(),p()};return g(h),h}function O(s,i,n={}){const{window:r=v,ignore:a=[],capture:f=!0,detectIframe:p=!1}=n;if(!r)return A;let l=!0;const m=t=>a.some(e=>{if(typeof e=="string")return Array.from(r.document.querySelectorAll(e)).some(o=>o===t.target||t.composedPath().includes(o));{const o=d(e);return o&&(t.target===o||t.composedPath().includes(o))}}),c=[y(r,"click",t=>{const e=d(s);if(!(!e||e===t.target||t.composedPath().includes(e))){if(t.detail===0&&(l=!m(t)),!l){l=!0;return}i(t)}},{passive:!0,capture:f}),y(r,"pointerdown",t=>{const e=d(s);l=!m(t)&&!!(e&&!t.composedPath().includes(e))},{passive:!0}),p&&y(r,"blur",t=>{setTimeout(()=>{var e;const o=d(s);((e=r.document.activeElement)==null?void 0:e.tagName)==="IFRAME"&&!(o!=null&&o.contains(r.document.activeElement))&&i(t)},0)})].filter(Boolean);return()=>c.forEach(t=>t())}export{v as defaultWindow,w as isObject,A as noop,O as onClickOutside,E as toValue,g as tryOnScopeDispose,d as unrefElement,y as useEventListener};
//# sourceMappingURL=index.mjs.map
