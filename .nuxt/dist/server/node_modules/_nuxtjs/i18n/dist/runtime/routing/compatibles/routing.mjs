import{isString as g,assign as b}from"../../../../../../_intlify/shared/dist/shared.mjs";import{hasProtocol as y,parsePath as S,parseQuery as x,withTrailingSlash as _,withoutTrailingSlash as w}from"../../../../../../ufo/dist/index.mjs";import{DEFAULT_DYNAMIC_PARAMS_KEY as C}from"../../../../../../../.nuxt/i18n.options.mjs";import{routeToObject as D,resolve as E}from"./utils.mjs";import{getRouteName as N,getLocale as I,getLocaleRouteName as L}from"../utils.mjs";import{extendSwitchLocalePathIntercepter as A,extendPrefixable as F}from"../../utils.mjs";import{unref as m}from"vue";const T=new Set(["prefix_and_default","prefix_except_default"]);function q(e){const{currentLocale:t,defaultLocale:n,strategy:a}=e;return!(t===n&&T.has(a))&&a!=="no_prefix"}const U=q;function R(e,t){const{routesNameSeparator:n}=e.runtimeConfig.public.i18n,a=m(t);return a==null||!a.name?void 0:N(a.name).split(n)[0]}function z(e,t,n){var i;if(typeof t=="string"&&y(t,{acceptRelative:!0}))return t;const a=d(e,t,n);return a==null?"":((i=a.redirectedFrom)==null?void 0:i.fullPath)||a.fullPath}function V(e,t,n){return d(e,t,n)??void 0}function X(e,t,n){return d(e,t,n)??void 0}function d(e,t,n){const{router:a,i18n:i}=e,s=n||I(i),{defaultLocale:l,strategy:u,trailingSlash:p}=e.runtimeConfig.public.i18n,h=F(e.runtimeConfig);let c;if(g(t))if(t[0]==="/"){const{pathname:r,search:f,hash:P}=S(t),v=x(f);c={path:r,query:v,hash:P}}else c={name:t};else c=t;let o=b({},c);if((r=>"path"in r&&!!r.path&&!("name"in r))(o)){const r=E(e,o,u,s),f=R(e,r);g(f)?(o={name:L(f,s,e.runtimeConfig.public.i18n),params:r.params,query:r.query,hash:r.hash},o.state=r.state):(h({currentLocale:s,defaultLocale:l,strategy:u})&&(o.path=`/${s}${o.path}`),o.path=p?_(o.path,!0):w(o.path,!0))}else!o.name&&!("path"in o)&&(o.name=R(e,a.currentRoute.value)),o.name=L(o.name,s,e.runtimeConfig.public.i18n);try{const r=a.resolve(o);return r.name?r:a.resolve(t)}catch(r){if(typeof r=="object"&&"type"in r&&r.type===1)return null}}const G=e=>e;function M(e,t){var a;if(e.runtimeConfig.public.i18n.experimental.switchLocalePathLinkSSR)return m(e.metaState.value);const n=t.meta||{};return((a=m(n))==null?void 0:a[C])||{}}function H(e,t,n){const a=n??e.router.currentRoute.value,i=R(e,a);if(!i)return"";const s=A(e.runtimeConfig),l=D(a),u=M(e,a)[t],p={...l,name:i,params:{...l.params,...u}},h=z(e,p,t);return s(h,t)}export{U as DefaultPrefixable,G as DefaultSwitchLocalePathIntercepter,R as getRouteBaseName,X as localeLocation,z as localePath,V as localeRoute,d as resolveRoute,H as switchLocalePath};
//# sourceMappingURL=routing.mjs.map
