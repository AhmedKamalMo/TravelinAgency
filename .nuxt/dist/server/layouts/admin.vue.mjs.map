{"version":3,"file":"admin.vue.mjs","sources":["../../../../layouts/admin.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen bg-gradient-to-br from-pink-50 via-purple-50 to-blue-100 flex\" dir=\"rtl\">\n    <!-- شريط علوي -->\n    <header class=\"bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500/90 backdrop-blur-lg shadow-md border-b border-pink-200/70 fixed w-full top-0 z-40\">\n      <div class=\"flex items-center justify-between h-16 px-6\">\n        <!-- زر القائمة الجانبية (للجوال) -->\n        <button\n          @click=\"sidebarOpen = !sidebarOpen\"\n          class=\"md:hidden p-2 rounded-lg text-white hover:text-pink-100 hover:bg-pink-400/30 transition-all duration-200\"\n        >\n          <Icon name=\"material-symbols:menu\" class=\"h-6 w-6\" />\n        </button>\n\n        <!-- شعار وعنوان -->\n        <div class=\"flex items-center\">\n          <div class=\"h-8 w-8 bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 rounded-lg flex items-center justify-center ml-3 shadow-lg\">\n            <Icon name=\"material-symbols:admin-panel-settings\" class=\"h-5 w-5 text-white\" />\n          </div>\n          <h1 class=\"text-xl font-bold text-white drop-shadow\">لوحة تحكم الإدارة</h1>\n        </div>\n\n        <!-- معلومات المستخدم -->\n        <div class=\"flex items-center space-x-4 space-x-reverse\">\n          <!-- زر زيارة الموقع -->\n          <button\n            @click=\"visitWebsite\"\n            class=\"flex items-center space-x-2 space-x-reverse px-3 py-2 rounded-lg text-white hover:text-pink-100 hover:bg-pink-400/30 transition-all duration-200 border border-pink-200/60 hover:border-pink-300/60\"\n            title=\"زيارة الموقع\"\n          >\n            <Icon name=\"material-symbols:open-in-new\" class=\"h-4 w-4\" />\n            <span class=\"hidden md:block text-sm font-medium\">زيارة الموقع</span>\n          </button>\n          \n          <!-- الإشعارات -->\n          <NotificationDropdown />\n\n          <!-- قائمة المستخدم -->\n          <div class=\"relative\" ref=\"userMenuRef\">\n            <button\n              @click=\"userMenuOpen = !userMenuOpen\"\n              class=\"flex items-center space-x-2 space-x-reverse p-2 rounded-lg text-white hover:text-pink-100 hover:bg-pink-400/30 transition-all duration-200\"\n            >\n              <div class=\"h-8 w-8 bg-gradient-to-r from-pink-400 via-purple-500 to-indigo-500 rounded-full flex items-center justify-center shadow-md\">\n                <Icon name=\"material-symbols:person-outline\" class=\"h-5 w-5 text-white\" />\n              </div>\n              <span class=\"hidden md:block font-medium text-white/90\">{{ userEmail }}</span>\n              <Icon name=\"material-symbols:keyboard-arrow-down\" class=\"h-4 w-4 text-pink-100\" />\n            </button>\n\n            <!-- قائمة منسدلة -->\n            <Transition\n              enter-active-class=\"transition ease-out duration-100\"\n              enter-from-class=\"transform opacity-0 scale-95\"\n              enter-to-class=\"transform opacity-100 scale-100\"\n              leave-active-class=\"transition ease-in duration-75\"\n              leave-from-class=\"transform opacity-100 scale-100\"\n              leave-to-class=\"transform opacity-0 scale-95\"\n            >\n              <div\n                v-if=\"userMenuOpen\"\n                class=\"absolute left-0 mt-2 w-48 bg-gradient-to-br from-white via-pink-50 to-purple-100/95 backdrop-blur-sm rounded-xl shadow-xl border border-pink-200/60 py-1 z-50\"\n              >\n                <NuxtLink to=\"/admin/profile\" class=\"flex items-center px-4 py-2 text-sm text-pink-700 hover:bg-pink-100/80 transition-colors\">\n                  <Icon name=\"material-symbols:person-outline\" class=\"h-4 w-4 ml-2 text-pink-500\" />\n                  الملف الشخصي\n                </NuxtLink>\n                <NuxtLink to=\"/admin/settings\" class=\"flex items-center px-4 py-2 text-sm text-purple-700 hover:bg-purple-100/80 transition-colors\">\n                  <Icon name=\"material-symbols:settings-outline\" class=\"h-4 w-4 ml-2 text-purple-500\" />\n                  الإعدادات\n                </NuxtLink>\n                <hr class=\"my-1 border-pink-200/60\" />\n                <button\n                  @click=\"handleLogout\"\n                  class=\"w-full flex items-center px-4 py-2 text-sm text-red-600 hover:bg-red-100/80 transition-colors\"\n                >\n                  <Icon name=\"material-symbols:logout\" class=\"h-4 w-4 ml-2 text-red-500\" />\n                  تسجيل الخروج\n                </button>\n              </div>\n            </Transition>\n          </div>\n        </div>\n      </div>\n    </header>\n\n    <!-- القائمة الجانبية -->\n    <aside\n      :class=\"[\n        'fixed inset-y-0 right-0 z-50 w-64 bg-gradient-to-b from-pink-200 via-purple-100 to-blue-100/95 backdrop-blur-lg shadow-2xl border-l border-pink-200/70 transform transition-transform duration-300 ease-in-out md:translate-x-0 md:static md:inset-0 md:flex-shrink-0',\n        sidebarOpen ? 'translate-x-0' : 'translate-x-full'\n      ]\"\n    >\n      <!-- خلفية للجوال -->\n      <div\n        v-if=\"sidebarOpen\"\n        @click=\"sidebarOpen = false\"\n        class=\"md:hidden fixed inset-0 bg-pink-400/40 backdrop-blur-sm z-40\"\n      ></div>\n\n      <!-- محتوى القائمة الجانبية -->\n      <div class=\"flex flex-col h-full pt-16 md:pt-16 relative z-50 bg-gradient-to-b from-pink-200 via-purple-100 to-blue-100/95 backdrop-blur-lg transition-colors duration-500\">\n        <!-- شعار (للجوال فقط) -->\n        <div class=\"md:hidden p-6 border-b border-none\">\n          <div class=\"flex items-center animate-fade-in-down\">\n            <div class=\"h-12 w-12 bg-gradient-to-tr from-pink-500 via-purple-500 to-indigo-500 rounded-2xl flex items-center justify-center ml-3 shadow-2xl transition-all duration-500 hover:scale-110\">\n              <Icon name=\"material-symbols:admin-panel-settings\" class=\"h-7 w-7 text-white drop-shadow-xl animate-pulse\" />\n            </div>\n            <h2 class=\"text-xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-indigo-800 via-pink-700 to-purple-800 ml-2 transition-colors duration-500 animate-fade-in\">\n              لوحة التحكم\n            </h2>\n          </div>\n        </div>\n\n        <!-- قائمة التنقل -->\n        <nav class=\"flex-1 px-4 py-6 space-y-2 overflow-y-auto\">\n          <NuxtLink\n            to=\"/admin/dashboard\"\n            class=\"nav-link\"\n            :class=\"{ 'nav-link-active': $route.path === '/admin/dashboard' }\"\n          >\n            <Icon name=\"material-symbols:dashboard-outline\" class=\"nav-icon\" />\n            <span>لوحة المعلومات</span>\n          </NuxtLink>\n\n          <NuxtLink\n            to=\"/admin/content\"\n            class=\"nav-link\"\n            :class=\"{ 'nav-link-active': $route.path.startsWith('/admin/content') }\"\n          >\n            <Icon name=\"material-symbols:description-outline\" class=\"nav-icon\" />\n            <span>إدارة المحتوى</span>\n          </NuxtLink>\n\n          <NuxtLink\n            to=\"/admin/packages\"\n            class=\"nav-link\"\n            :class=\"{ 'nav-link-active': $route.path.startsWith('/admin/packages') }\"\n          >\n            <Icon name=\"material-symbols:package-2-outline\" class=\"nav-icon\" />\n            <span>إدارة الباقات</span>\n          </NuxtLink>\n\n          <NuxtLink\n            to=\"/admin/destinations\"\n            class=\"nav-link\"\n            :class=\"{ 'nav-link-active': $route.path.startsWith('/admin/destinations') }\"\n          >\n            <Icon name=\"material-symbols:location-on-outline\" class=\"nav-icon\" />\n            <span>إدارة الوجهات</span>\n          </NuxtLink>\n\n          <NuxtLink\n            to=\"/admin/bookings\"\n            class=\"nav-link\"\n            :class=\"{ 'nav-link-active': $route.path.startsWith('/admin/bookings') }\"\n          >\n            <Icon name=\"material-symbols:book-online-outline\" class=\"nav-icon\" />\n            <span>الحجوزات</span>\n          </NuxtLink>\n\n          <NuxtLink\n            to=\"/admin/contacts\"\n            class=\"nav-link relative\"\n            :class=\"{ 'nav-link-active': $route.path.startsWith('/admin/contacts') }\"\n          >\n            <Icon name=\"material-symbols:contact-mail-outline\" class=\"nav-icon\" />\n            <span>رسائل التواصل</span>\n            <span \n              v-if=\"unreadCount > 0\" \n              class=\"absolute left-2 top-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold animate-pulse\"\n            >\n              {{ unreadCount > 99 ? '99+' : unreadCount }}\n            </span>\n          </NuxtLink>\n\n          <NuxtLink\n            to=\"/admin/notifications\"\n            class=\"nav-link\"\n            :class=\"{ 'nav-link-active': $route.path.startsWith('/admin/notifications') }\"\n          >\n            <Icon name=\"material-symbols:notifications-outline\" class=\"nav-icon\" />\n            <span>الإشعارات</span>\n          </NuxtLink>\n\n          <NuxtLink\n            to=\"/admin/users\"\n            class=\"nav-link\"\n            :class=\"{ 'nav-link-active': $route.path.startsWith('/admin/users') }\"\n          >\n            <Icon name=\"material-symbols:group-outline\" class=\"nav-icon\" />\n            <span>إدارة المستخدمين</span>\n          </NuxtLink>\n\n          <NuxtLink\n            to=\"/admin/reports\"\n            class=\"nav-link\"\n            :class=\"{ 'nav-link-active': $route.path.startsWith('/admin/reports') }\"\n          >\n            <Icon name=\"material-symbols:analytics-outline\" class=\"nav-icon\" />\n            <span>التقارير والإحصائيات</span>\n          </NuxtLink>\n\n          <NuxtLink\n            to=\"/admin/seo\"\n            class=\"nav-link\"\n            :class=\"{ 'nav-link-active': $route.path.startsWith('/admin/seo') }\"\n          >\n            <Icon name=\"material-symbols:search\" class=\"nav-icon\" />\n            <span>إدارة SEO</span>\n          </NuxtLink>\n\n          <NuxtLink\n            to=\"/admin/settings\"\n            class=\"nav-link\"\n            :class=\"{ 'nav-link-active': $route.path.startsWith('/admin/settings') }\"\n          >\n            <Icon name=\"material-symbols:settings-outline\" class=\"nav-icon\" />\n            <span>الإعدادات</span>\n          </NuxtLink>\n        </nav>\n\n        <!-- معلومات إضافية -->\n        <div class=\"p-4 border-t border-pink-200/60\">\n          <div class=\"flex items-center justify-between text-sm text-pink-700\">\n            <span>Wonder Land</span>\n            <span>v1.0.0</span>\n          </div>\n        </div>\n      </div>\n    </aside>\n\n    <!-- المحتوى الرئيسي -->\n    <main class=\"flex-1 pt-16 md:pt-0 min-h-screen bg-gradient-to-br from-white via-pink-50 to-purple-50\">\n      <div class=\"p-3 sm:p-4 md:p-6\">\n        <slot />\n      </div>\n    </main>\n  </div>\n  \n  <!-- حاوي الإشعارات -->\n  <NotificationContainer />\n</template>\n\n<script setup>\n// Import components\nimport NotificationContainer from '~/components/ui/NotificationContainer.vue'\nimport NotificationDropdown from '~/components/admin/NotificationDropdown.vue'\n\n// المتغيرات التفاعلية\nconst sidebarOpen = ref(false)\nconst userMenuOpen = ref(false)\nconst userMenuRef = ref(null)\n\n// Authentication\nconst { user, logout } = useAuth()\n\n// Message counter and notifications\nconst { unreadCount, fetchMessageCounts } = useMessageCounter()\nconst { startNotificationSystem, stopNotificationSystem } = useNotificationSystem()\n\n// معلومات المستخدم\nconst userEmail = computed(() => {\n  return user.value?.email || 'مستخدم'\n})\n\n// إغلاق القوائم عند النقر خارجها\nonClickOutside(userMenuRef, () => {\n  userMenuOpen.value = false\n})\n\n// دالة زيارة الموقع\nconst visitWebsite = () => {\n  if (process.client) {\n    window.open('/', '_blank')\n  }\n}\n\n// دالة تسجيل الخروج\nconst handleLogout = async () => {\n  try {\n    await logout()\n    await navigateTo('/admin/login')\n  } catch (error) {\n    console.error('خطأ في تسجيل الخروج:', error)\n  }\n}\n\n// إغلاق القائمة الجانبية عند تغيير المسار\nwatch(() => useRoute().path, () => {\n  sidebarOpen.value = false\n})\n\n// التحقق من تسجيل الدخول - تم إزالته لتجنب إعادة التوجيه المستمرة\n// يتم التعامل مع المصادقة في middleware بدلاً من ذلك\n\n// Initialize notification system and message counter\nonMounted(async () => {\n  if (process.client) {\n    // Load the service worker cleanup script\n    const script = document.createElement('script')\n    script.src = '/disable-sw.js'\n    script.async = true\n    document.head.appendChild(script)\n    \n    // Initialize message counter\n    await fetchMessageCounts()\n    \n    // Start notification system\n    await startNotificationSystem()\n  }\n})\n\n// Cleanup on unmount\nonUnmounted(() => {\n  if (process.client) {\n    stopNotificationSystem()\n  }\n})\n</script>\n\n<style scoped>\n/* أنماط القائمة الجانبية */\n.nav-link {\n  @apply flex items-center px-4 py-3 text-pink-700 rounded-xl hover:bg-gradient-to-l hover:from-pink-100 hover:to-purple-100 hover:text-purple-700 transition-all duration-200 font-medium shadow-none;\n}\n\n.nav-link-active {\n  @apply bg-gradient-to-l from-pink-200 via-purple-100 to-blue-100 text-purple-800 border-r-4 border-pink-500 shadow-lg;\n}\n\n.nav-icon {\n  @apply h-5 w-5 ml-3 flex-shrink-0 text-pink-500;\n}\n\n/* تحسينات الانتقالات */\n.transition-transform {\n  transition-property: transform;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n/* تحسين التمرير */\n.overflow-y-auto {\n  scrollbar-width: thin;\n  scrollbar-color: #f472b6 #f3e8ff;\n}\n\n.overflow-y-auto::-webkit-scrollbar {\n  width: 6px;\n}\n\n.overflow-y-auto::-webkit-scrollbar-track {\n  background: #f3e8ff;\n}\n\n.overflow-y-auto::-webkit-scrollbar-thumb {\n  background-color: #f472b6;\n  border-radius: 3px;\n}\n\n.overflow-y-auto::-webkit-scrollbar-thumb:hover {\n  background-color: #d946ef;\n}\n</style>\n"],"names":["sidebarOpen","ref","userMenuOpen","userMenuRef","user","useAuth","unreadCount","useMessageCounter","userEmail","computed","_a","onClickOutside","watch","useRoute"],"mappings":"mjCAyPM,MAAAA,EAAcC,EAAI,EAAK,EACvBC,EAAeD,EAAI,EAAK,EACxBE,EAAcF,EAAI,IAAI,EAGtB,CAAE,KAAAG,CAAa,EAAIC,EAAQ,EAG3B,CAAE,YAAAC,CAAgC,EAAIC,EAAkB,EAIxDC,EAAYC,EAAS,IAAM,OACxB,QAAAC,EAAAN,EAAK,QAAL,YAAAM,EAAY,QAAS,QAAA,CAC7B,EAGD,OAAAC,EAAeR,EAAa,IAAM,CAChCD,EAAa,MAAQ,EAAA,CACtB,EAoBDU,EAAM,IAAMC,IAAW,KAAM,IAAM,CACjCb,EAAY,MAAQ,EAAA,CACrB"}