{"file":"searchSection.vue2.mjs","mappings":"yxBAgVeA,EAAU,EACLC,EAAe,EACnC,KAAM,CAAE,OAAAC,EAAQ,EAAAC,CAAE,EAAIC,EAAQ,EAcxB,CACJ,YAAAC,EAEA,WAAAC,EAIA,iBAAAC,CAEF,EAAIC,EAAe,EAGbC,EAAcC,EAAI,EAAE,EACpBC,EAAkBD,EAAc,EAAE,EAGlCE,EAAqBF,EAAI,EAAK,EAC9BG,EAAiBH,EAAI,EAAK,EAC1BI,EAAqBJ,EAAI,EAAK,EAG9BK,EAAWL,EAAI,EAAK,EAGpBM,EAAU,CACd,CAAE,GAAI,UAAW,KAAM,CAAE,GAAI,UAAW,GAAI,QAAU,EACtD,CAAE,GAAI,WAAY,KAAM,CAAE,GAAI,WAAY,GAAI,SAAW,EACzD,CAAE,GAAI,QAAS,KAAM,CAAE,GAAI,QAAS,GAAI,OAAS,EACjD,CAAE,GAAI,QAAS,KAAM,CAAE,GAAI,QAAS,GAAI,QAAU,EAClD,CAAE,GAAI,MAAO,KAAM,CAAE,GAAI,MAAO,GAAI,OAAS,EAC7C,CAAE,GAAI,OAAQ,KAAM,CAAE,GAAI,OAAQ,GAAI,QAAU,EAChD,CAAE,GAAI,OAAQ,KAAM,CAAE,GAAI,OAAQ,GAAI,QAAU,EAChD,CAAE,GAAI,SAAU,KAAM,CAAE,GAAI,SAAU,GAAI,QAAU,EACpD,CAAE,GAAI,YAAa,KAAM,CAAE,GAAI,YAAa,GAAI,SAAW,EAC3D,CAAE,GAAI,UAAW,KAAM,CAAE,GAAI,UAAW,GAAI,SAAW,EACvD,CAAE,GAAI,WAAY,KAAM,CAAE,GAAI,WAAY,GAAI,SAAW,EACzD,CAAE,GAAI,WAAY,KAAM,CAAE,GAAI,WAAY,GAAI,QAAW,CAAA,CAC3D,EA+GMC,EAAyBC,EAAS,IACjCP,EAAgB,MAAM,OACpBA,EAAgB,MACpB,IAAUQ,GAAA,CACT,MAAMC,EAASJ,EAAQ,KAAU,GAAA,EAAE,KAAOG,CAAE,EACtCE,EAAYnB,EAAO,MAAM,UAAU,EAAG,CAAC,EACtC,OAAAkB,GAAA,YAAAA,EAAQ,KAAKC,EACrB,CAAA,EACA,OAAO,OAAO,EACd,KAAK,IAAI,EAR8BlB,EAAE,iBAAiB,CAS9D","names":["useRouter","useLocaleRoute","locale","t","useI18n","priceRanges","priceRange","formatPriceRange","useQuickSearch","searchQuery","ref","selectedPeriods","showPeriodSelector","showBudgetMenu","isMobileBudgetOpen","isMobile","periods","selectedPeriodsDisplay","computed","id","period","localeKey"],"sources":["../../../../../components/HomeSections/searchSection.vue"],"sourcesContent":["<template>\n  <section class=\"search-section relative py-24 bg-gradient-to-b from-primary/10 to-surface-container-low\">\n    <!-- Background Pattern -->\n    <div class=\"absolute inset-0 opacity-10\">\n      <div class=\"absolute inset-0 opacity-50\"></div>\n    </div>\n\n    <div class=\"container relative\">\n      <div class=\"max-w-4xl mx-auto\">\n        <!-- Search Header -->\n        <div class=\"text-center mb-12\">\n          <h2 class=\"text-4xl md:text-5xl font-bold text-gray-900 mb-6 leading-tight\">\n            {{ $t('search.find_perfect_package') }}\n          </h2>\n          <p class=\"text-lg md:text-xl text-gray-600 max-w-2xl mx-auto\">\n            {{ $t('search.search_description') }}\n          </p>\n        </div>\n\n        <!-- Main Search Bar -->\n        <div class=\"bg-white rounded-3xl shadow-xl p-12 h-auto w-full max-w-5xl mx-auto\">\n          <div class=\"flex flex-col gap-6\">\n            <!-- Search Form -->\n            <div class=\"flex flex-col md:flex-row gap-6\">\n              <!-- Destination Input -->\n              <div class=\"flex-1\">\n                <label class=\"block text-base font-medium text-gray-700 mb-2\">\n                  {{ $t('search.where_to') }}\n                </label>\n                <div class=\"relative\">\n                  <span class=\"absolute start-4 top-1/2 -translate-y-1/2\">\n                    <Icon name=\"material-symbols:search\" class=\"h-6 w-6 text-gray-400\" />\n                  </span>\n                  <input\n                    v-model=\"searchQuery\"\n                    type=\"text\"\n                    :placeholder=\"$t('search.packages_placeholder')\"\n                    class=\"w-full ps-12 pe-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary transition-colors\"\n                  />\n                </div>\n              </div>\n\n              <!-- Travel Period -->\n              <div class=\"flex-1 relative\">\n                <label class=\"block text-base font-medium text-gray-700 mb-2\">\n                  {{ $t('search.when') }}\n                </label>\n                <button\n                  id=\"period-button\"\n                  @click.stop=\"showPeriodSelector = !showPeriodSelector\"\n                  class=\"w-full flex items-center justify-between px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl hover:bg-gray-100 focus:ring-2 focus:ring-primary/20 focus:border-primary transition-colors\"\n                >\n                  <span class=\"flex items-center gap-2\">\n                    <Icon name=\"material-symbols:calendar-month-outline\" class=\"h-6 w-6 text-gray-400\" />\n                    <span class=\"text-base text-gray-600\">\n                      {{ selectedPeriodsDisplay }}\n                    </span>\n                  </span>\n                  <Icon name=\"material-symbols:keyboard-arrow-down-rounded\" class=\"h-5 w-5 text-gray-400\" />\n                </button>\n\n                <!-- Desktop Period Dropdown -->\n                <Transition\n                  enter-active-class=\"transition ease-out duration-200\"\n                  enter-from-class=\"opacity-0 translate-y-1\"\n                  enter-to-class=\"opacity-100 translate-y-0\"\n                  leave-active-class=\"transition ease-in duration-150\"\n                  leave-from-class=\"opacity-100 translate-y-0\"\n                  leave-to-class=\"opacity-0 translate-y-1\"\n                >\n                  <div\n                    id=\"period-dropdown\"\n                    v-if=\"showPeriodSelector && !isMobile\"\n                    class=\"absolute left-0 mt-2 w-[400px] bg-white rounded-xl shadow-lg border border-gray-100 z-50\"\n                    @click.stop\n                  >\n                    <div class=\"p-4\">\n                      <div class=\"flex justify-between items-start mb-3\">\n                        <div>\n                          <h3 class=\"text-lg font-medium\">{{ $t('search.when') }}</h3>\n                          <p class=\"text-sm text-gray-500 mt-0.5\">{{ $t('search.when_subtitle') }}</p>\n                        </div>\n                        <button\n                          @click=\"showPeriodSelector = false\"\n                          class=\"p-1.5 rounded-lg hover:bg-red-50 text-red-500 transition-colors\"\n                        >\n                          <Icon name=\"material-symbols:close\" class=\"w-5 h-5\" />\n                        </button>\n                      </div>\n                      <div class=\"grid grid-cols-3 gap-2\">\n                        <button\n                          v-for=\"period in periods\"\n                          :key=\"period.id\"\n                          @click.stop=\"selectPeriod(period.id)\"\n                          class=\"px-4 py-2.5 rounded-lg text-base transition-colors text-center\"\n                          :class=\"[\n                            selectedPeriods.includes(period.id)\n                              ? 'bg-primary/10 text-primary font-medium'\n                              : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                          ]\"\n                        >\n                          {{ period.name[locale.substring(0, 2) as 'en' | 'ar'] }}\n                        </button>\n                      </div>\n                      <div class=\"mt-6 flex justify-end\">\n                        <button\n                          class=\"w-full md:w-auto px-6 py-3 rounded-lg bg-primary text-white font-semibold shadow hover:bg-primary-600 transition-colors disabled:opacity-50\"\n                          :disabled=\"selectedPeriods.length === 0\"\n                          @click.stop=\"confirmPeriods\"\n                        >\n                          {{ $t('search.confirm') }}\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </Transition>\n              </div>\n\n              <!-- Budget -->\n              <div class=\"flex-1 relative\">\n                <label class=\"block text-base font-medium text-gray-700 mb-2\">\n                  {{ $t('search.budget') }}\n                </label>\n                <button\n                  id=\"budget-button\"\n                  @click.stop=\"openBudgetMenu\"\n                  class=\"w-full flex items-center justify-between px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl hover:bg-gray-100 focus:ring-2 focus:ring-primary/20 focus:border-primary transition-colors\"\n                >\n                  <span class=\"flex items-center gap-2\">\n                    <SaudiRyialSymbol \n                      :size=\"20\"\n                      class=\"text-gray-400\"\n                    />\n                    <span class=\"text-base text-gray-600\">\n                      {{ priceRange.min > 0 ? formatPriceRange(priceRange) : $t('search.select_budget') }}\n                    </span>\n                  </span>\n                  <Icon name=\"material-symbols:keyboard-arrow-down-rounded\" class=\"h-5 w-5 text-gray-400\" />\n                </button>\n\n                <!-- Desktop Budget Dropdown -->\n                <div\n                  v-if=\"showBudgetMenu && !isMobile\"\n                  id=\"budget-dropdown\"\n                  class=\"absolute z-10 w-[400px] mt-2 bg-white border border-gray-200 rounded-xl shadow-lg\"\n                >\n                  <div class=\"p-4\">\n                    <div class=\"flex justify-between items-start mb-3\">\n                      <div>\n                        <h3 class=\"text-lg font-medium\">{{ $t('search.budget_label') }}</h3>\n                        <p class=\"text-sm text-gray-500 mt-0.5\">{{ $t('search.budget_subtitle') }}</p>\n                      </div>\n                      <button\n                        @click=\"closeBudgetMenu\"\n                        class=\"p-1.5 rounded-lg hover:bg-red-50 text-red-500 transition-colors\"\n                      >\n                        <Icon name=\"material-symbols:close\" class=\"w-5 h-5\" />\n                      </button>\n                    </div>\n                    <div class=\"space-y-2\">\n                      <button\n                        v-for=\"(range, index) in priceRanges\"\n                        :key=\"'price-' + index\"\n                        @click=\"setPriceRange(range.min, range.max)\"\n                        class=\"w-full flex items-center gap-2 px-4 py-3 rounded-xl transition-colors\"\n                        :class=\"[\n                          priceRange.min === range.min && priceRange.max === range.max\n                            ? 'bg-primary/10 text-primary'\n                            : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                        ]\"\n                      >\n                        <SaudiRyialSymbol \n                          :size=\"20\"\n                          :class=\"[\n                            priceRange.min === range.min && priceRange.max === range.max \n                              ? 'text-primary' \n                              : 'text-gray-400'\n                          ]\"\n                        />\n                        {{ formatPriceRange(range) }}\n                      </button>\n                    </div>\n                    <div class=\"mt-6 flex justify-end\">\n                      <button\n                        class=\"w-full md:w-auto px-6 py-3 rounded-lg bg-primary text-white font-semibold shadow hover:bg-primary-600 transition-colors disabled:opacity-50\"\n                        :disabled=\"(!priceRange.min && !priceRange.max) || (priceRange.min === priceRanges[0].min && priceRange.max === priceRanges[0].max)\"\n                        @click.stop=\"confirmBudget\"\n                      >\n                        {{ $t('search.confirm') }}\n                      </button>\n                    </div>\n                  </div>\n                </div>\n\n                <!-- Mobile Budget Menu -->\n                <div\n                  v-if=\"isMobileBudgetOpen\"\n                  id=\"mobile-budget-menu\"\n                  class=\"fixed inset-0 z-50 flex items-end bg-black bg-opacity-50\"\n                  @click=\"isMobileBudgetOpen = false\"\n                >\n                  <div \n                    class=\"w-full bg-white rounded-t-xl\"\n                    @click.stop\n                  >\n                    <div class=\"p-4\">\n                      <div class=\"flex justify-between items-start mb-3\">\n                        <div>\n                          <h3 class=\"text-lg font-medium\">{{ $t('search.budget_label') }}</h3>\n                          <p class=\"text-sm text-gray-500 mt-0.5\">{{ $t('search.budget_subtitle') }}</p>\n                        </div>\n                        <button\n                          @click=\"isMobileBudgetOpen = false\"\n                          class=\"p-1.5 rounded-lg hover:bg-red-50 text-red-500 transition-colors\"\n                        >\n                          <Icon name=\"material-symbols:close\" class=\"w-5 h-5\" />\n                        </button>\n                      </div>\n                      <div class=\"space-y-2\">\n                        <button\n                          v-for=\"(range, index) in priceRanges\"\n                          :key=\"'price-' + index\"\n                          @click.stop=\"setPriceRange(range.min, range.max)\"\n                          class=\"w-full flex items-center gap-2 px-4 py-3 rounded-xl transition-colors\"\n                          :class=\"[\n                            priceRange.min === range.min && priceRange.max === range.max\n                              ? 'bg-primary/10 text-primary'\n                              : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                          ]\"\n                        >\n                          <SaudiRyialSymbol \n                            :size=\"20\"\n                            :class=\"[\n                              priceRange.min === range.min && priceRange.max === range.max \n                                ? 'text-primary' \n                                : 'text-gray-400'\n                            ]\"\n                          />\n                          {{ formatPriceRange(range) }}\n                        </button>\n                      </div>\n                      <div class=\"mt-6 flex justify-end\">\n                        <button\n                          class=\"w-full px-6 py-3 rounded-lg bg-primary text-white font-semibold shadow hover:bg-primary-600 transition-colors disabled:opacity-50\"\n                          :disabled=\"(!priceRange.min && !priceRange.max) || (priceRange.min === priceRanges[0].min && priceRange.max === priceRanges[0].max)\"\n                          @click.stop=\"confirmBudget\"\n                        >\n                          {{ $t('search.confirm') }}\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <!-- Card Actions -->\n            <div class=\"flex mt-2\">\n              <button\n                @click=\"navigateToSearch\"\n                class=\"w-full h-12 px-8 bg-primary text-white rounded-xl hover:bg-primary/90 transition-colors flex items-center justify-center gap-2\"\n              >\n                <Icon name=\"material-symbols:search\" class=\"h-5 w-5\" />\n                {{ $t('search.find_perfect_package') }}\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Only show bottom sheets on mobile -->\n    <template v-if=\"isMobile\">\n      <!-- Period Selector Modal -->\n      <Transition name=\"fade\">\n        <div \n          v-if=\"showPeriodSelector\"\n          class=\"fixed inset-0 z-50 flex items-end bg-black bg-opacity-50\"\n          @click=\"showPeriodSelector = false\"\n        >\n          <div \n            class=\"w-full bg-white rounded-t-xl\"\n            @click.stop\n          >\n            <div class=\"p-4\">\n              <div class=\"flex justify-between items-start mb-3\">\n                <div>\n                  <h3 class=\"text-lg font-medium\">{{ $t('search.when') }}</h3>\n                  <p class=\"text-sm text-gray-500 mt-0.5\">{{ $t('search.when_subtitle') }}</p>\n                </div>\n                <button\n                  @click=\"showPeriodSelector = false\"\n                  class=\"p-1.5 rounded-lg hover:bg-red-50 text-red-500 transition-colors\"\n                >\n                  <Icon name=\"material-symbols:close\" class=\"w-5 h-5\" />\n                </button>\n              </div>\n              <div class=\"grid grid-cols-3 gap-2\">\n                <button\n                  v-for=\"period in periods\"\n                  :key=\"period.id\"\n                  @click.stop=\"selectPeriod(period.id)\"\n                  class=\"px-4 py-3 rounded-xl text-base transition-colors text-center\"\n                  :class=\"[\n                    selectedPeriods.includes(period.id)\n                      ? 'bg-primary/10 text-primary font-medium'\n                      : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                  ]\"\n                >\n                  {{ period.name[locale.substring(0, 2) as 'en' | 'ar'] }}\n                </button>\n              </div>\n              <div class=\"mt-6 flex justify-end\">\n                <button\n                  class=\"w-full px-6 py-3 rounded-lg bg-primary text-white font-semibold shadow hover:bg-primary-600 transition-colors disabled:opacity-50\"\n                  :disabled=\"selectedPeriods.length === 0\"\n                  @click.stop=\"confirmPeriods\"\n                >\n                  {{ $t('search.confirm') }}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </Transition>\n    </template>\n  </section>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed } from 'vue'\nimport { useI18n } from 'vue-i18n'\nimport { useRouter } from 'vue-router'\nimport { useQuickSearch } from '~/composables/useQuickSearch'\nimport SaudiRyialSymbol from '~/components/ui/icons/SaudiRyialSymbol.vue'\n\nconst router = useRouter()\nconst localeRoute = useLocaleRoute()\nconst { locale, t } = useI18n()\n\n// Confirm period selection\nfunction confirmPeriods() {\n  showPeriodSelector.value = false;\n  // Any additional logic to finalize the selection can go here\n}\n\n// Confirm budget selection\nfunction confirmBudget() {\n  isMobileBudgetOpen.value = false;\n  showBudgetMenu.value = false;\n  // Any additional logic to finalize the budget selection can go here\n}\nconst {\n  priceRanges,\n  durationRanges,\n  priceRange,\n  durationRange,\n  setPriceRange,\n  setDurationRange,\n  formatPriceRange,\n  formatDurationRange\n} = useQuickSearch()\n\n// Initialize state\nconst searchQuery = ref('')\nconst selectedPeriods = ref<string[]>([])\n\n// Control panel visibility\nconst showPeriodSelector = ref(false)\nconst showBudgetMenu = ref(false)\nconst isMobileBudgetOpen = ref(false)\n\n// Check if mobile\nconst isMobile = ref(false)\n\n// Available periods (months)\nconst periods = [\n  { id: 'january', name: { en: 'January', ar: 'يناير' } },\n  { id: 'february', name: { en: 'February', ar: 'فبراير' } },\n  { id: 'march', name: { en: 'March', ar: 'مارس' } },\n  { id: 'april', name: { en: 'April', ar: 'أبريل' } },\n  { id: 'may', name: { en: 'May', ar: 'مايو' } },\n  { id: 'june', name: { en: 'June', ar: 'يونيو' } },\n  { id: 'july', name: { en: 'July', ar: 'يوليو' } },\n  { id: 'august', name: { en: 'August', ar: 'أغسطس' } },\n  { id: 'september', name: { en: 'September', ar: 'سبتمبر' } },\n  { id: 'october', name: { en: 'October', ar: 'أكتوبر' } },\n  { id: 'november', name: { en: 'November', ar: 'نوفمبر' } },\n  { id: 'december', name: { en: 'December', ar: 'ديسمبر' } }\n]\n\n// Update isMobile on mount and resize\nonMounted(() => {\n  checkIfMobile()\n  window.addEventListener('resize', checkIfMobile)\n\n  document.addEventListener('click', (event) => {\n    const target = event.target as HTMLElement\n    const periodButton = document.querySelector('#period-button')\n    const periodDropdown = document.querySelector('#period-dropdown')\n    const budgetButton = document.querySelector('#budget-button')\n    const budgetDropdown = document.querySelector('#budget-dropdown')\n    const mobileBudgetMenu = document.querySelector('#mobile-budget-menu')\n\n    // Close period selector if clicking outside both button and dropdown\n    if (\n      showPeriodSelector.value &&\n      !periodButton?.contains(target) &&\n      !periodDropdown?.contains(target)\n    ) {\n      showPeriodSelector.value = false\n    }\n\n    // Close desktop budget menu if clicking outside both button and dropdown\n    if (\n      !isMobile.value &&\n      showBudgetMenu.value &&\n      !budgetButton?.contains(target) &&\n      !budgetDropdown?.contains(target)\n    ) {\n      showBudgetMenu.value = false\n    }\n\n    // Close mobile budget menu if clicking outside\n    if (\n      isMobile.value &&\n      isMobileBudgetOpen.value &&\n      !mobileBudgetMenu?.contains(target)\n    ) {\n      isMobileBudgetOpen.value = false\n    }\n  })\n})\n\nonUnmounted(() => {\n  window.removeEventListener('resize', checkIfMobile)\n})\n\nfunction checkIfMobile() {\n  isMobile.value = window.innerWidth < 768\n}\n\n// Handle period selection\nconst selectPeriod = (periodId: string) => {\n  const index = selectedPeriods.value.indexOf(periodId)\n  if (index === -1) {\n    selectedPeriods.value.push(periodId)\n  } else {\n    selectedPeriods.value.splice(index, 1)\n  }\n}\n\n// Budget menu controls\nfunction openBudgetMenu() {\n  if (isMobile.value) {\n    isMobileBudgetOpen.value = true\n  } else {\n    showBudgetMenu.value = true\n  }\n}\n\nfunction closeBudgetMenu() {\n  if (isMobile.value) {\n    isMobileBudgetOpen.value = false\n  } else {\n    showBudgetMenu.value = false\n  }\n}\n\n// Navigation method\nfunction navigateToSearch() {\n  const query: Record<string, string | string[]> = {}\n\n  // Add periods if selected\n  if (selectedPeriods.value.length > 0) {\n    query.periods = selectedPeriods.value\n  }\n\n  // Add price range if set and not default\n  const currentPriceRange = priceRange.value\n  if (currentPriceRange && currentPriceRange.min !== -1 && currentPriceRange.max !== -1) {\n    query.priceMin = currentPriceRange.min.toString()\n    if (currentPriceRange.max !== Infinity) {\n      query.priceMax = currentPriceRange.max.toString()\n    }\n  }\n\n  // Add search query if present\n  if (searchQuery.value) {\n    query.q = searchQuery.value\n  }\n  const _locale = locale.value == \"ar-SA\" ? \"\" : locale.value\n  // Navigate to search page with query params\n  router.push({\n    path:  `${_locale}/Packages/search`,\n    query\n  })\n}\n\n// Computed property for selected periods display\nconst selectedPeriodsDisplay = computed(() => {\n  if (!selectedPeriods.value.length) return t('search.any_time')\n  return selectedPeriods.value\n    .map(id => {\n      const period = periods.find(p => p.id === id);\n      const localeKey = locale.value.substring(0, 2) as 'en' | 'ar';\n      return period?.name[localeKey];\n    })\n    .filter(Boolean)\n    .join(', ')\n})\n</script>\n\n<style scoped>\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.3s ease;\n}\n\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n</style>"],"version":3}