{"version":3,"file":"useSEO.mjs","sources":["../../../../composables/useSEO.ts"],"sourcesContent":["export const useSEO = () => {\r\n  // SEO data state\r\n  const seoData = ref({\r\n    siteTitleAr: '',\r\n    siteTitleEn: '',\r\n    siteDescriptionAr: '',\r\n    siteDescriptionEn: '',\r\n    keywords: '',\r\n    siteUrl: '',\r\n    ogImage: '',\r\n    twitterHandle: '',\r\n    googleAnalytics: '',\r\n    googleSearchConsole: ''\r\n  })\r\n\r\n  const seoStats = ref({\r\n    indexedPages: 0,\r\n    performanceScore: 0,\r\n    seoIssues: 0,\r\n    internalLinks: 0\r\n  })\r\n\r\n  const seoPages = ref([])\r\n  const loading = ref(false)\r\n  const error = ref(null)\r\n\r\n  // Load SEO data\r\n  const loadSeoData = async () => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n      \r\n      const response = await $fetch('/api/seo')\r\n      if (response.success) {\r\n        const { seoData: apiSeoData, seoStats: apiSeoStats, seoPages: apiSeoPages } = response.data\r\n        \r\n        seoData.value = { ...seoData.value, ...apiSeoData }\r\n        seoStats.value = { ...seoStats.value, ...apiSeoStats }\r\n        seoPages.value = apiSeoPages\r\n      }\r\n    } catch (err) {\r\n      error.value = err\r\n      console.error('Error loading SEO data:', err)\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  // Save SEO settings\r\n  const saveSeoSettings = async (data: any) => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n      \r\n      const response = await $fetch('/api/seo', {\r\n        method: 'PUT',\r\n        body: data\r\n      })\r\n      \r\n      if (response.success) {\r\n        seoData.value = { ...seoData.value, ...data.seoData }\r\n        return { success: true, message: response.message }\r\n      }\r\n    } catch (err) {\r\n      error.value = err\r\n      console.error('Error saving SEO settings:', err)\r\n      return { success: false, error: err }\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  // Generate sitemap\r\n  const generateSitemap = async (settings: any) => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n      \r\n      const response = await $fetch('/api/seo/sitemap/generate', {\r\n        method: 'POST',\r\n        body: settings\r\n      })\r\n      \r\n      if (response.success) {\r\n        return { success: true, data: response.data }\r\n      }\r\n    } catch (err) {\r\n      error.value = err\r\n      console.error('Error generating sitemap:', err)\r\n      return { success: false, error: err }\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  // SEO page management\r\n  const createSeoPage = async (pageData: any) => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n      \r\n      const response = await $fetch('/api/seo/pages', {\r\n        method: 'POST',\r\n        body: pageData\r\n      })\r\n      \r\n      if (response.success) {\r\n        seoPages.value.push(response.data)\r\n        return { success: true, data: response.data }\r\n      }\r\n    } catch (err) {\r\n      error.value = err\r\n      console.error('Error creating SEO page:', err)\r\n      return { success: false, error: err }\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  const updateSeoPage = async (id: number, pageData: any) => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n      \r\n      const response = await $fetch(`/api/seo/pages/${id}`, {\r\n        method: 'PUT',\r\n        body: pageData\r\n      })\r\n      \r\n      if (response.success) {\r\n        const index = seoPages.value.findIndex(p => p.id === id)\r\n        if (index !== -1) {\r\n          seoPages.value[index] = { ...seoPages.value[index], ...response.data }\r\n        }\r\n        return { success: true, data: response.data }\r\n      }\r\n    } catch (err) {\r\n      error.value = err\r\n      console.error('Error updating SEO page:', err)\r\n      return { success: false, error: err }\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  const deleteSeoPage = async (id: number) => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n      \r\n      const response = await $fetch(`/api/seo/pages/${id}`, {\r\n        method: 'DELETE'\r\n      })\r\n      \r\n      if (response.success) {\r\n        seoPages.value = seoPages.value.filter(p => p.id !== id)\r\n        return { success: true, message: response.message }\r\n      }\r\n    } catch (err) {\r\n      error.value = err\r\n      console.error('Error deleting SEO page:', err)\r\n      return { success: false, error: err }\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  // SEO analysis helpers\r\n  const analyzeSeoScore = (page: any) => {\r\n    let score = 0\r\n    const issues = []\r\n\r\n    // Check title\r\n    if (page.title && page.title.length > 0) {\r\n      score += 20\r\n    } else {\r\n      issues.push('عنوان الصفحة مفقود')\r\n    }\r\n\r\n    // Check description\r\n    if (page.description && page.description.length > 0) {\r\n      score += 20\r\n    } else {\r\n      issues.push('وصف الصفحة مفقود')\r\n    }\r\n\r\n    // Check keywords\r\n    if (page.keywords && page.keywords.length > 0) {\r\n      score += 15\r\n    } else {\r\n      issues.push('الكلمات المفتاحية مفقودة')\r\n    }\r\n\r\n    // Check title length\r\n    if (page.title && page.title.length >= 30 && page.title.length <= 60) {\r\n      score += 15\r\n    } else if (page.title) {\r\n      issues.push('طول العنوان غير مناسب (يجب أن يكون بين 30-60 حرف)')\r\n    }\r\n\r\n    // Check description length\r\n    if (page.description && page.description.length >= 120 && page.description.length <= 160) {\r\n      score += 15\r\n    } else if (page.description) {\r\n      issues.push('طول الوصف غير مناسب (يجب أن يكون بين 120-160 حرف)')\r\n    }\r\n\r\n    // Check OG image\r\n    if (page.ogImage && page.ogImage.length > 0) {\r\n      score += 15\r\n    } else {\r\n      issues.push('صورة Open Graph مفقودة')\r\n    }\r\n\r\n    return {\r\n      score: Math.min(score, 100),\r\n      issues,\r\n      status: score >= 80 ? 'optimized' : score >= 60 ? 'needs-work' : 'not-optimized'\r\n    }\r\n  }\r\n\r\n  // SEO recommendations\r\n  const getSeoRecommendations = () => {\r\n    const recommendations = []\r\n\r\n    if (!seoData.value.siteTitleAr) {\r\n      recommendations.push('أضف عنوان الموقع باللغة العربية')\r\n    }\r\n\r\n    if (!seoData.value.siteDescriptionAr) {\r\n      recommendations.push('أضف وصف الموقع باللغة العربية')\r\n    }\r\n\r\n    if (!seoData.value.keywords) {\r\n      recommendations.push('أضف الكلمات المفتاحية للموقع')\r\n    }\r\n\r\n    if (!seoData.value.googleAnalytics) {\r\n      recommendations.push('أضف كود Google Analytics لتتبع الزوار')\r\n    }\r\n\r\n    if (!seoData.value.googleSearchConsole) {\r\n      recommendations.push('أضف كود Google Search Console لتحسين الفهرسة')\r\n    }\r\n\r\n    return recommendations\r\n  }\r\n\r\n  return {\r\n    // State\r\n    seoData: readonly(seoData),\r\n    seoStats: readonly(seoStats),\r\n    seoPages: readonly(seoPages),\r\n    loading: readonly(loading),\r\n    error: readonly(error),\r\n\r\n    // Actions\r\n    loadSeoData,\r\n    saveSeoSettings,\r\n    generateSitemap,\r\n    createSeoPage,\r\n    updateSeoPage,\r\n    deleteSeoPage,\r\n\r\n    // Helpers\r\n    analyzeSeoScore,\r\n    getSeoRecommendations\r\n  }\r\n}\r\n"],"names":["useSEO","seoData","ref","seoStats","seoPages","loading","error","loadSeoData","response","apiSeoData","apiSeoStats","apiSeoPages","err","saveSeoSettings","data","generateSitemap","settings","createSeoPage","pageData","updateSeoPage","id","index","p","deleteSeoPage","analyzeSeoScore","page","score","issues","getSeoRecommendations","recommendations","readonly"],"mappings":"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"}