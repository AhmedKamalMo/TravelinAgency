import{ref as u,computed as s}from"vue";import{usePackages as x}from"./usePackages.mjs";import{useI18n as h}from"../node_modules/vue-i18n/dist/vue-i18n.mjs";const P=()=>{const{locale:I}=h(),{getPackages:m}=x(),i=u(""),e=u({periods:[],priceRange:{min:0,max:1/0},duration:{min:0,max:1/0},dates:{start:null,end:null},travelers:1,type:[]}),o=s(()=>m()),c=s(()=>{const a=o.value||[];if(a.length===0)return{periods:[],priceRanges:[],durationRanges:[]};const n=new Set;a.forEach(r=>{r.travel_period&&n.add(r.travel_period)});const t=["january","february","march","april","may","june","july","august","september","october","november","december"],v=Array.from(n).sort((r,p)=>{const b=t.findIndex(l=>r.toLowerCase().includes(l)),g=t.findIndex(l=>p.toLowerCase().includes(l));return b-g}),y={january:{en:"January",ar:"يناير"},february:{en:"February",ar:"فبراير"},march:{en:"March",ar:"مارس"},april:{en:"April",ar:"أبريل"},may:{en:"May",ar:"مايو"},june:{en:"June",ar:"يونيو"},july:{en:"July",ar:"يوليو"},august:{en:"August",ar:"أغسطس"},september:{en:"September",ar:"سبتمبر"},october:{en:"October",ar:"أكتوبر"},november:{en:"November",ar:"نوفمبر"},december:{en:"December",ar:"ديسمبر"}};return{periods:v.map(r=>({id:r,name:y[r]||{en:r,ar:r}})),priceRanges:[{min:0,max:1e3,label:"Under $1,000"},{min:1e3,max:3e3,label:"$1,000 - $3,000"},{min:3e3,max:5e3,label:"$3,000 - $5,000"},{min:5e3,max:1/0,label:"Over $5,000"}],durationRanges:[{min:0,max:3,label:"1-3 days"},{min:4,max:7,label:"4-7 days"},{min:8,max:14,label:"8-14 days"},{min:15,max:1/0,label:"15+ days"}]}}),d=s(()=>{let a=o.value||[];if(i.value){const n=i.value.toLowerCase();a=a.filter(t=>t.title_en.toLowerCase().includes(n)||t.description_en.toLowerCase().includes(n))}return e.value.periods.length>0&&(a=a.filter(n=>e.value.periods.some(t=>n.travel_period.toLowerCase()===t.toLowerCase()))),(e.value.priceRange.min>0||e.value.priceRange.max<1/0)&&(a=a.filter(n=>n.price>=e.value.priceRange.min&&n.price<=e.value.priceRange.max)),(e.value.duration.min>0||e.value.duration.max<1/0)&&(a=a.filter(n=>n.duration_days>=e.value.duration.min&&n.duration_days<=e.value.duration.max)),a}),f=s(()=>{let a=0;return a+=e.value.periods.length,(e.value.priceRange.min!==0||e.value.priceRange.max!==1/0)&&a++,(e.value.duration.min!==0||e.value.duration.max!==1/0)&&a++,e.value.dates.start&&e.value.dates.end&&a++,e.value.travelers>1&&a++,a});return{searchQuery:i,filters:e,filterOptions:c,filteredPackages:d,activeFiltersCount:f,resetFilters:()=>{i.value="",e.value={periods:[],priceRange:{min:0,max:1/0},duration:{min:0,max:1/0},dates:{start:null,end:null},travelers:1,type:[]}}}};export{P as usePackageSearch};
//# sourceMappingURL=usePackageSearch.mjs.map
