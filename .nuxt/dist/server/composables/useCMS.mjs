import{useState as c}from"../node_modules/nuxt/dist/app/composables/state.mjs";import{readonly as u}from"vue";const h=()=>{const s=c("cms.siteSettings",()=>({})),o=c("cms.navigation",()=>({})),r=c("cms.currentPage",()=>null),l=async()=>{try{const t=await $fetch("/api/public/site-settings");return s.value=t.data.settings,t.data.settings}catch(t){return console.error("Error loading site settings:",t),{}}},g=async t=>{try{const e=t?`/api/public/navigation?menu_name=${t}`:"/api/public/navigation",n=await $fetch(e);return o.value=n.data.menus,n.data.menus}catch(e){return console.error("Error loading navigation:",e),{}}},v=async t=>{try{const e=await $fetch(`/api/public/pages/${t}`);return r.value=e.data,e.data}catch(e){return console.error("Error loading page:",e),null}},p=(t,e,n="")=>{var a;return((a=s.value[t])==null?void 0:a[e])||n},d=t=>o.value[t]||[],f=()=>r.value,S=t=>{var e;return(e=r.value)!=null&&e.sections?r.value.sections.find(n=>n.section_type===t):null},m=t=>{var e;return(e=r.value)!=null&&e.sections?r.value.sections.filter(n=>n.section_type===t):[]},y=(t,e)=>{var a;if(!((a=r.value)!=null&&a.sections))return[];const n=r.value.sections.find(i=>i.id===t);return n!=null&&n.content_blocks?e?n.content_blocks.filter(i=>i.block_type===e):n.content_blocks:[]},P=async()=>{await Promise.all([l(),g()])};return{siteSettings:u(s),navigation:u(o),currentPage:u(r),loadSiteSettings:l,loadNavigation:g,loadPage:v,getSetting:p,getMenu:d,getCurrentPage:f,getPageSection:S,getPageSections:m,getSectionBlocks:y,initializeCMS:P}};export{h as useCMS};
//# sourceMappingURL=useCMS.mjs.map
