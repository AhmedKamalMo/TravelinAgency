import $ from"./CW2NxIwK.js";import{u as V}from"./DW4mBvn7.js";import{p as A,m as v,G as B,c as n,o as l,a as e,f as c,i as o,b as r,e as g,I as x,t as i,F as R,r as F,n as L}from"./D1nMFiHg.js";import{s as U}from"./x_rD_Ya3.js";const z={class:"space-y-6"},D={class:"flex items-center justify-between"},E={class:"flex items-center space-x-3 space-x-reverse"},G=["disabled"],M={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},S={class:"bg-white p-6 rounded-lg shadow-sm border border-gray-200"},q={class:"flex items-center"},H={class:"h-10 w-10 bg-blue-100 rounded-lg flex items-center justify-center"},J={class:"mr-4"},K={class:"text-2xl font-bold text-gray-900"},O={class:"bg-white p-6 rounded-lg shadow-sm border border-gray-200"},P={class:"flex items-center"},Q={class:"h-10 w-10 bg-green-100 rounded-lg flex items-center justify-center"},W={class:"mr-4"},X={class:"text-2xl font-bold text-gray-900"},Y={class:"bg-white p-6 rounded-lg shadow-sm border border-gray-200"},Z={class:"flex items-center"},ee={class:"h-10 w-10 bg-purple-100 rounded-lg flex items-center justify-center"},se={class:"mr-4"},te={class:"text-2xl font-bold text-gray-900"},oe={class:"bg-white p-6 rounded-lg shadow-sm border border-gray-200"},ae={class:"flex items-center"},ne={class:"h-10 w-10 bg-orange-100 rounded-lg flex items-center justify-center"},le={class:"mr-4"},re={class:"text-2xl font-bold text-gray-900"},ie={class:"bg-white rounded-lg shadow-sm border border-gray-200"},de={key:0,class:"p-8 text-center"},ce={key:1,class:"p-8 text-center"},me={key:2,class:"divide-y divide-gray-200"},ge={class:"flex items-start space-x-4 space-x-reverse"},xe={class:"flex-shrink-0"},ue={class:"flex-1 min-w-0"},_e={class:"flex items-center justify-between"},pe={class:"text-lg font-medium text-gray-900"},be={class:"flex items-center space-x-3 space-x-reverse"},ye={class:"text-sm text-gray-500"},he={key:0,class:"h-2 w-2 bg-blue-500 rounded-full"},fe=["onClick"],ve={class:"text-gray-600 mt-1"},ke={class:"mt-3 flex items-center text-sm text-gray-500 space-x-4 space-x-reverse"},we={class:"flex items-center"},Ce={class:"flex items-center"},Ne={class:"flex items-center"},je={key:0,class:"mt-3 p-3 bg-gray-50 rounded-lg"},Ie={class:"text-sm text-gray-700"},Te={class:"mt-4 flex items-center space-x-3 space-x-reverse"},$e=["onClick"],Ve=["onClick"],Ue=A({__name:"notifications",setup(Ae){const{notifications:u,totalUnread:k,isLoading:_,fetchNotifications:p,markAsRead:w,markAllAsRead:y,getNotificationIcon:C,getNotificationColor:h,formatNotificationTime:N}=V();v(()=>{p()});const j=async()=>{await p()},m=d=>u.value.filter(s=>s.type===d&&!s.is_read).length,I=d=>{let s="";switch(d.type){case"contact":s="/admin/contacts";break;case"package":s="/admin/packages";break;case"destination":s="/admin/destinations";break;case"booking":s="/admin/bookings";break}s&&L(s)},T=d=>{console.log("Reply to contact:",d)};let b=null;return v(()=>{b=U(()=>{p()},3e4)}),B(()=>{b&&clearInterval(b)}),(d,s)=>{const a=$;return l(),n("div",z,[e("div",D,[s[2]||(s[2]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"الإشعارات"),e("p",{class:"text-gray-600 mt-1"},"إدارة جميع الإشعارات والتنبيهات")],-1)),e("div",E,[e("button",{onClick:j,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:o(_)},[r(a,{name:"material-symbols:refresh",class:x(["h-4 w-4 ml-2",{"animate-spin":o(_)}])},null,8,["class"]),s[1]||(s[1]=g(" تحديث "))],8,G),o(k)>0?(l(),n("button",{key:0,onClick:s[0]||(s[0]=(...t)=>o(y)&&o(y)(...t)),class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"}," تعيين الكل كمقروء ")):c("",!0)])]),e("div",M,[e("div",S,[e("div",q,[e("div",H,[r(a,{name:"material-symbols:mail-outline",class:"h-5 w-5 text-blue-600"})]),e("div",J,[s[3]||(s[3]=e("p",{class:"text-sm font-medium text-gray-600"},"رسائل التواصل",-1)),e("p",K,i(m("contact")),1)])])]),e("div",O,[e("div",P,[e("div",Q,[r(a,{name:"material-symbols:package-2-outline",class:"h-5 w-5 text-green-600"})]),e("div",W,[s[4]||(s[4]=e("p",{class:"text-sm font-medium text-gray-600"},"استفسارات الباقات",-1)),e("p",X,i(m("package")),1)])])]),e("div",Y,[e("div",Z,[e("div",ee,[r(a,{name:"material-symbols:location-on-outline",class:"h-5 w-5 text-purple-600"})]),e("div",se,[s[5]||(s[5]=e("p",{class:"text-sm font-medium text-gray-600"},"استفسارات الوجهات",-1)),e("p",te,i(m("destination")),1)])])]),e("div",oe,[e("div",ae,[e("div",ne,[r(a,{name:"material-symbols:book-online-outline",class:"h-5 w-5 text-orange-600"})]),e("div",le,[s[6]||(s[6]=e("p",{class:"text-sm font-medium text-gray-600"},"الحجوزات الجديدة",-1)),e("p",re,i(m("booking")),1)])])])]),e("div",ie,[s[10]||(s[10]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h2",{class:"text-lg font-semibold text-gray-900"},"جميع الإشعارات")],-1)),o(_)?(l(),n("div",de,[r(a,{name:"material-symbols:refresh",class:"h-8 w-8 animate-spin mx-auto text-gray-400"}),s[7]||(s[7]=e("p",{class:"text-gray-500 mt-2"},"جاري تحميل الإشعارات...",-1))])):o(u).length===0?(l(),n("div",ce,[r(a,{name:"material-symbols:notifications-none",class:"h-12 w-12 mx-auto text-gray-400"}),s[8]||(s[8]=e("h3",{class:"text-lg font-medium text-gray-900 mt-4"},"لا توجد إشعارات",-1)),s[9]||(s[9]=e("p",{class:"text-gray-500 mt-2"},"ستظهر الإشعارات الجديدة هنا عند وصولها",-1))])):(l(),n("div",me,[(l(!0),n(R,null,F(o(u),t=>(l(),n("div",{key:`${t.type}-${t.id}`,class:x(["p-6 hover:bg-gray-50 transition-colors",{"bg-blue-50":!t.is_read}])},[e("div",ge,[e("div",xe,[e("div",{class:x(["h-10 w-10 rounded-full flex items-center justify-center",o(h)(t.type).replace("text-","bg-").replace("-600","-100")])},[r(a,{name:o(C)(t.type),class:x(["h-5 w-5",o(h)(t.type)])},null,8,["name","class"])],2)]),e("div",ue,[e("div",_e,[e("h3",pe,i(t.title),1),e("div",be,[e("span",ye,i(o(N)(t.created_at)),1),t.is_read?c("",!0):(l(),n("div",he)),t.is_read?c("",!0):(l(),n("button",{key:1,onClick:f=>o(w)(t.id,t.type),class:"text-sm text-blue-600 hover:text-blue-800 font-medium"}," تعيين كمقروء ",8,fe))])]),e("p",ve,i(t.description),1),e("div",ke,[e("span",we,[r(a,{name:"material-symbols:person-outline",class:"h-4 w-4 ml-1"}),g(" "+i(t.name),1)]),e("span",Ce,[r(a,{name:"material-symbols:mail-outline",class:"h-4 w-4 ml-1"}),g(" "+i(t.email),1)]),e("span",Ne,[r(a,{name:"material-symbols:phone-outline",class:"h-4 w-4 ml-1"}),g(" "+i(t.phone),1)])]),t.message?(l(),n("div",je,[e("p",Ie,i(t.message),1)])):c("",!0),e("div",Te,[e("button",{onClick:f=>I(t),class:"px-3 py-1 text-sm font-medium text-blue-600 bg-blue-50 rounded-md hover:bg-blue-100"}," عرض التفاصيل ",8,$e),t.type==="contact"?(l(),n("button",{key:0,onClick:f=>T(t),class:"px-3 py-1 text-sm font-medium text-green-600 bg-green-50 rounded-md hover:bg-green-100"}," الرد ",8,Ve)):c("",!0)])])])],2))),128))]))])])}}});export{Ue as default};
