import{defineEventHandler as e,getRouterParam as s,readBody as i,createError as o}from"file://F:/TravelinAgency/node_modules/h3/dist/index.mjs";import{e as n}from"../../../_/database.mjs";import"../../../_/nitro.mjs";import"file://F:/TravelinAgency/node_modules/destr/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/hookable/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/ofetch/dist/node.mjs";import"file://F:/TravelinAgency/node_modules/node-mock-http/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/klona/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/defu/dist/defu.mjs";import"file://F:/TravelinAgency/node_modules/scule/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/radix3/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/vue/index.mjs";import"node:fs";import"node:url";import"file://F:/TravelinAgency/node_modules/pathe/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/@iconify/utils/lib/index.mjs";import"file://F:/TravelinAgency/node_modules/ohash/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/consola/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/ipx/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/unstorage/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/unstorage/drivers/fs.mjs";import"file:///F:/TravelinAgency/node_modules/nuxt/dist/core/runtime/nitro/utils/cache-driver.js";import"file://F:/TravelinAgency/node_modules/unstorage/drivers/fs-lite.mjs";import"file://F:/TravelinAgency/node_modules/mysql2/promise.js";import"file://F:/TravelinAgency/node_modules/bcryptjs/index.js";import"file://F:/TravelinAgency/node_modules/jsonwebtoken/index.js";const t=e((async e=>{try{const t=s(e,"id"),d=await i(e),{is_read:r,status:l}=d;if(!t)throw o({statusCode:400,statusMessage:"Message ID is required"});console.log("Updating message status:",{id:t,is_read:r,status:l});const a=await n("\n      UPDATE contact_messages \n      SET status = ?, updated_at = NOW()\n      WHERE id = ?\n    ",[l||"read",t]);if(console.log("Database update result:",a),!a||0===a.affectedRows)throw o({statusCode:404,statusMessage:"Message not found"});return{success:!0,message:"Message status updated successfully"}}catch(e){if(console.error("Error updating message status:",e),e.statusCode)throw e;throw o({statusCode:500,statusMessage:"Failed to update message status"})}}));export{t as default};
//# sourceMappingURL=_id_.put.mjs.map
