import{defineEventHandler as e}from"file://F:/TravelinAgency/node_modules/h3/dist/index.mjs";import{executeQuery as n}from"../../_/database.mjs";import"../../_/nitro.mjs";import"file://F:/TravelinAgency/node_modules/destr/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/hookable/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/ofetch/dist/node.mjs";import"file://F:/TravelinAgency/node_modules/node-mock-http/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/klona/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/defu/dist/defu.mjs";import"file://F:/TravelinAgency/node_modules/scule/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/radix3/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/vue/index.mjs";import"node:fs";import"node:url";import"file://F:/TravelinAgency/node_modules/pathe/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/@iconify/utils/lib/index.mjs";import"file://F:/TravelinAgency/node_modules/ohash/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/consola/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/ipx/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/unstorage/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/unstorage/drivers/fs.mjs";import"file:///F:/TravelinAgency/node_modules/nuxt/dist/core/runtime/nitro/utils/cache-driver.js";import"file://F:/TravelinAgency/node_modules/unstorage/drivers/fs-lite.mjs";import"file://F:/TravelinAgency/node_modules/mysql2/promise.js";import"file://F:/TravelinAgency/node_modules/bcryptjs/index.js";import"file://F:/TravelinAgency/node_modules/jsonwebtoken/index.js";const t=e((async e=>{try{return{success:!0,bookings:(await n("\n      SELECT \n        b.id, \n        b.booking_number,\n        b.customer_name,\n        b.customer_email,\n        b.customer_phone,\n        p.title_ar as package_title,\n        b.departure_date as travel_date,\n        b.return_date,\n        b.guests_count,\n        b.booking_status as status,\n        b.payment_status,\n        b.total_amount,\n        b.paid_amount,\n        b.currency,\n        b.special_requests,\n        b.notes,\n        b.created_at,\n        b.updated_at\n      FROM bookings b\n      LEFT JOIN packages p ON b.package_id = p.id\n      ORDER BY b.created_at DESC\n    ")).map((e=>({id:e.id,booking_number:e.booking_number,customer_name:e.customer_name,customer_email:e.customer_email,customer_phone:e.customer_phone,package_title:e.package_title||"حزمة غير محددة",travel_date:e.travel_date,return_date:e.return_date,adults:e.guests_count||1,children:0,status:e.status||"pending",payment_status:e.payment_status||"pending",total_amount:e.total_amount||0,paid_amount:e.paid_amount||0,currency:e.currency||"SAR",special_requests:e.special_requests,notes:e.notes,created_at:e.created_at,updated_at:e.updated_at})))}}catch(e){return console.error("Error fetching bookings:",e),{error:"Failed to fetch bookings"}}}));export{t as default};
//# sourceMappingURL=bookings.mjs.map
