import{defineEventHandler as e,getRouterParam as i,createError as n}from"file://F:/TravelinAgency/node_modules/h3/dist/index.mjs";import{executeQuery as t}from"../../../_/database.mjs";import"../../../_/nitro.mjs";import"file://F:/TravelinAgency/node_modules/destr/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/hookable/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/ofetch/dist/node.mjs";import"file://F:/TravelinAgency/node_modules/node-mock-http/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/klona/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/defu/dist/defu.mjs";import"file://F:/TravelinAgency/node_modules/scule/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/radix3/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/vue/index.mjs";import"node:fs";import"node:url";import"file://F:/TravelinAgency/node_modules/pathe/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/@iconify/utils/lib/index.mjs";import"file://F:/TravelinAgency/node_modules/ohash/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/consola/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/ipx/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/unstorage/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/unstorage/drivers/fs.mjs";import"file:///F:/TravelinAgency/node_modules/nuxt/dist/core/runtime/nitro/utils/cache-driver.js";import"file://F:/TravelinAgency/node_modules/unstorage/drivers/fs-lite.mjs";import"file://F:/TravelinAgency/node_modules/mysql2/promise.js";import"file://F:/TravelinAgency/node_modules/bcryptjs/index.js";import"file://F:/TravelinAgency/node_modules/jsonwebtoken/index.js";const o=e((async e=>{try{const o=i(e,"id");if(!o)throw n({statusCode:400,statusMessage:"Destination ID is required"});const s=await t("\n      SELECT \n        id, \n        name_ar,\n        name_en,\n        description_ar,\n        description_en,\n        image_url,\n        category,\n        featured,\n        active,\n        created_at,\n        updated_at\n      FROM destinations \n      WHERE id = ?\n    ",[o]);if(!s||0===s.length)throw n({statusCode:404,statusMessage:"Destination not found"});const d=s[0];return{success:!0,data:{id:d.id,name:d.name_ar||d.name_en,name_ar:d.name_ar,name_en:d.name_en,description:d.description_ar||d.description_en,description_ar:d.description_ar,description_en:d.description_en,image:d.image_url,image_url:d.image_url,category:d.category,featured:1===d.featured,active:1===d.active,status:1===d.active?"active":"inactive",region_ar:"saudi"===d.category?"السعودية":"دولي",region_en:"saudi"===d.category?"Saudi Arabia":"International",location_type_ar:"وجهة",location_type_en:"Destination",destination_type_ar:"saudi"===d.category?"محلي":"دولي",destination_type_en:"saudi"===d.category?"Domestic":"International",coordinates:null,created_at:d.created_at,updated_at:d.updated_at}}}catch(e){if(console.error("Error fetching destination:",e),e.statusCode)throw e;throw n({statusCode:500,statusMessage:"Failed to fetch destination"})}}));export{o as default};
//# sourceMappingURL=_id_.mjs.map
