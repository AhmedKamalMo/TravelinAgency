import{defineEventHandler as e}from"file://F:/TravelinAgency/node_modules/h3/dist/index.mjs";import{readdir as t,stat as i}from"node:fs/promises";import{join as s,extname as a}from"node:path";const r=e((async e=>{try{const e=s(process.cwd(),"public","images","packages","imported"),r=s(process.cwd(),"public","images","packages","thumbnails"),g=(await t(e)).filter((e=>{const t=a(e).toLowerCase();return[".jpg",".jpeg",".png",".webp",".gif"].includes(t)})),m=[];for(const t of g)try{const g=s(e,t),o=await i(g),c=`thumb_${t}`,p=s(r,c);let n=!1;try{await i(p),n=!0}catch{n=!1}m.push({filename:t,originalName:t,path:`/images/packages/imported/${t}`,thumbnailPath:n?`/images/packages/thumbnails/${c}`:null,size:o.size,type:getMimeType(a(t)),createdAt:o.birthtime,modifiedAt:o.mtime})}catch(e){console.error(`Error processing file ${t}:`,e)}return m.sort(((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())),{success:!0,message:"Images retrieved successfully",images:m}}catch(e){return console.error("Error listing images:",e),{success:!1,message:"Failed to list images",images:[]}}}));function getMimeType(e){return{".jpg":"image/jpeg",".jpeg":"image/jpeg",".png":"image/png",".webp":"image/webp",".gif":"image/gif"}[e.toLowerCase()]||"image/jpeg"}export{r as default};
//# sourceMappingURL=list.get.mjs.map
