import{defineEventHandler as e,readBody as s,createError as t}from"file://F:/TravelinAgency/node_modules/h3/dist/index.mjs";import{unlink as r}from"node:fs/promises";import{join as o}from"node:path";const a=e((async e=>{try{const a=await s(e),{filename:i}=a;if(!i)throw t({statusCode:400,statusMessage:"Filename is required"});const c=o(process.cwd(),"public","images","packages","imported"),m=o(process.cwd(),"public","images","packages","thumbnails"),d=o(c,i),l=o(m,`thumb_${i}`);try{await r(d)}catch(e){console.error(`Error deleting image ${i}:`,e)}try{await r(l)}catch(e){console.error(`Error deleting thumbnail for ${i}:`,e)}return{success:!0,message:"Image deleted successfully"}}catch(e){if(console.error("Error deleting image:",e),e.statusCode)throw e;throw t({statusCode:500,statusMessage:"Failed to delete image"})}}));export{a as default};
//# sourceMappingURL=delete.post.mjs.map
