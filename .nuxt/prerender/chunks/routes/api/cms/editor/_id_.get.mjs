import{defineEventHandler as e,getRouterParam as t,createError as n}from"file://F:/TravelinAgency/node_modules/h3/dist/index.mjs";import{executeQuery as i}from"../../../../_/database.mjs";import"../../../../_/nitro.mjs";import"file://F:/TravelinAgency/node_modules/destr/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/hookable/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/ofetch/dist/node.mjs";import"file://F:/TravelinAgency/node_modules/node-mock-http/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/klona/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/defu/dist/defu.mjs";import"file://F:/TravelinAgency/node_modules/scule/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/radix3/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/vue/index.mjs";import"node:fs";import"node:url";import"file://F:/TravelinAgency/node_modules/pathe/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/@iconify/utils/lib/index.mjs";import"file://F:/TravelinAgency/node_modules/ohash/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/consola/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/ipx/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/unstorage/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/unstorage/drivers/fs.mjs";import"file:///F:/TravelinAgency/node_modules/nuxt/dist/core/runtime/nitro/utils/cache-driver.js";import"file://F:/TravelinAgency/node_modules/unstorage/drivers/fs-lite.mjs";import"file://F:/TravelinAgency/node_modules/mysql2/promise.js";import"file://F:/TravelinAgency/node_modules/bcryptjs/index.js";import"file://F:/TravelinAgency/node_modules/jsonwebtoken/index.js";const o=e((async e=>{try{const o=t(e,"id");if(!o)throw n({statusCode:400,statusMessage:"Page ID is required"});try{const e=await i("\n      SELECT \n        id, \n          title_ar,\n          title_en,\n          content_ar,\n          content_en,\n          type,\n        status,\n          url,\n          slug,\n          components,\n        created_at,\n        updated_at\n        FROM content_pages \n      WHERE id = ?\n      ",[o]);if(e&&e.length>0){const t=e[0];let n=[];try{t.components&&(n="string"==typeof t.components?JSON.parse(t.components):t.components)}catch(e){console.log("Error parsing components:",e),n=[]}return{success:!0,message:"Page retrieved successfully from database",page:{id:t.id,title:t.title_ar||t.title_en,title_ar:t.title_ar,title_en:t.title_en,content:t.content_ar||t.content_en,content_ar:t.content_ar,content_en:t.content_en,type:t.type||"page",status:t.status||"draft",url:t.url||`/${t.slug||""}`,slug:t.slug,created_at:t.created_at,updated_at:t.updated_at,components:n}}}}catch(e){console.log("Database page not available, using default page data...")}const a={1:{id:1,title_ar:"الصفحة الرئيسية",title_en:"Home Page",content_ar:"الصفحة الرئيسية لموقع وكالة السفر",content_en:"Main homepage of the travel agency website",type:"page",status:"published",url:"/",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},2:{id:2,title_ar:"الباقات السياحية",title_en:"Travel Packages",content_ar:"عرض جميع الباقات السياحية المتاحة",content_en:"View all available travel packages",type:"page",status:"published",url:"/packages/",created_at:new Date(Date.now()-864e5).toISOString(),updated_at:new Date(Date.now()-864e5).toISOString()},3:{id:3,title_ar:"باقة مخصصة",title_en:"Custom Package",content_ar:"إنشاء باقة سياحية مخصصة حسب احتياجاتك",content_en:"Create a custom travel package according to your needs",type:"page",status:"published",url:"/custom-package/",created_at:new Date(Date.now()-1728e5).toISOString(),updated_at:new Date(Date.now()-1728e5).toISOString()},4:{id:4,title_ar:"من نحن",title_en:"About Us",content_ar:"تعرف على وكالة السفر وخدماتنا",content_en:"Learn about our travel agency and services",type:"page",status:"published",url:"/about/",created_at:new Date(Date.now()-2592e5).toISOString(),updated_at:new Date(Date.now()-2592e5).toISOString()}}[o];if(a){let e=[];return"1"===o?e=[{type:"hero",props:{title:"مرحباً بك في Wonder Land",subtitle:"اكتشف أجمل الوجهات السياحية",backgroundImage:"/images/hero-bg.jpg",buttonText:"اكتشف الآن",buttonLink:"/packages"}},{type:"about",props:{title:"من نحن",content:"نحن وكالة سفر رائدة في المملكة العربية السعودية، نقدم أفضل خدمات السفر والسياحة لعملائنا الكرام.",image:"/images/about.jpg"}}]:"2"===o?e=[{type:"heading",props:{title:"الباقات السياحية",subtitle:"اكتشف أفضل العروض والرحلات"}},{type:"services",props:{title:"باقاتنا المميزة",services:[{title:"باقة دبي",description:"رحلة لمدة 3 أيام",price:"1500 ريال"},{title:"باقة تركيا",description:"رحلة لمدة 5 أيام",price:"2500 ريال"},{title:"باقة ماليزيا",description:"رحلة لمدة 7 أيام",price:"3500 ريال"}]}}]:"3"===o?e=[{type:"heading",props:{title:"باقة مخصصة",subtitle:"صمم رحلتك حسب احتياجاتك"}},{type:"contact",props:{title:"تواصل معنا",description:"أخبرنا عن رحلتك المثالية وسنساعدك في تصميمها"}}]:"4"===o&&(e=[{type:"heading",props:{title:"من نحن",subtitle:"تعرف على وكالة السفر وخدماتنا"}},{type:"about",props:{title:"قصتنا",content:"نحن وكالة سفر رائدة في المملكة العربية السعودية، نقدم أفضل خدمات السفر والسياحة لعملائنا الكرام. نسعى دائماً لتوفير تجارب سفر لا تُنسى.",image:"/images/about.jpg"}},{type:"testimonials",props:{title:"آراء عملائنا",testimonials:[{name:"أحمد محمد",text:"تجربة رائعة، شكراً لكم"},{name:"فاطمة علي",text:"خدمة ممتازة ورحلة لا تُنسى"}]}}]),{success:!0,message:"Page retrieved successfully from default data",page:{...a,title:a.title_ar||a.title_en,content:a.content_ar||a.content_en,components:e}}}throw n({statusCode:404,statusMessage:"Page not found"})}catch(e){if(console.error("Error fetching page for editor:",e),e.statusCode)throw e;throw n({statusCode:500,statusMessage:"Failed to fetch page data"})}}));export{o as default};
//# sourceMappingURL=_id_.get.mjs.map
