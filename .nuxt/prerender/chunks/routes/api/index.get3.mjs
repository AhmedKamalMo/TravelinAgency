import{defineEventHandler as e}from"file://F:/TravelinAgency/node_modules/h3/dist/index.mjs";import{executeQuery as i}from"../../_/database.mjs";import"../../_/nitro.mjs";import"file://F:/TravelinAgency/node_modules/destr/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/hookable/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/ofetch/dist/node.mjs";import"file://F:/TravelinAgency/node_modules/node-mock-http/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/klona/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/defu/dist/defu.mjs";import"file://F:/TravelinAgency/node_modules/scule/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/radix3/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/vue/index.mjs";import"node:fs";import"node:url";import"file://F:/TravelinAgency/node_modules/pathe/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/@iconify/utils/lib/index.mjs";import"file://F:/TravelinAgency/node_modules/ohash/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/consola/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/ipx/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/unstorage/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/unstorage/drivers/fs.mjs";import"file:///F:/TravelinAgency/node_modules/nuxt/dist/core/runtime/nitro/utils/cache-driver.js";import"file://F:/TravelinAgency/node_modules/unstorage/drivers/fs-lite.mjs";import"file://F:/TravelinAgency/node_modules/mysql2/promise.js";import"file://F:/TravelinAgency/node_modules/bcryptjs/index.js";import"file://F:/TravelinAgency/node_modules/jsonwebtoken/index.js";const t=e((async e=>{try{try{const e=await i("\n        SELECT \n          id, \n          title_ar,\n          title_en,\n          description_ar,\n          description_en,\n          price,\n          duration_days as duration,\n          image_url as image,\n          travel_period as location,\n          max_persons,\n          featured,\n          active as status,\n          created_at,\n          updated_at\n        FROM packages \n        ORDER BY created_at DESC\n      ");if(e&&e.length>0){return{success:!0,message:"Packages retrieved successfully from database",data:e.map((e=>({id:e.id,title:e.title_ar||e.title_en,title_ar:e.title_ar,title_en:e.title_en,description:e.description_ar||e.description_en,description_ar:e.description_ar,description_en:e.description_en,price:e.price,duration:`${e.duration} days`,duration_days:e.duration,image:e.image,image_url:e.image,destination:e.location,location:e.location,travel_period:e.location,max_persons:e.max_persons||10,category:"international",featured:e.featured,status:1===e.status?"active":"inactive",features:[],itinerary:[],included:[],excluded:[],created_at:e.created_at,updated_at:e.updated_at})))}}}catch(e){console.log("Database packages not available, trying local data...")}try{const e=await import("node:fs"),i=(await import("node:path")).join(process.cwd(),"public","packages-with-local-images.json"),t=e.readFileSync(i,"utf8"),a=JSON.parse(t);if(a&&Array.isArray(a)&&a.length>0){return{success:!0,message:"Packages retrieved successfully from local data",data:a.map((e=>({id:e.id,title:e.title,title_ar:e.title,title_en:e.title,description:e.description,description_ar:e.description,description_en:e.description,price:e.price,duration:e.duration,duration_days:7,image:e.image,image_url:e.image,destination:e.destination,location:e.destination,travel_period:e.destination,max_persons:10,category:"international",featured:e.featured,status:e.status,features:[],itinerary:[],included:[],excluded:[],created_at:e.created_at,updated_at:e.updated_at})))}}}catch(e){console.log("Local packages not available")}return{success:!1,message:"No packages found",data:[]}}catch(e){return console.error("Error fetching packages:",e),{success:!1,message:"Failed to fetch packages",error:"Internal server error",data:[]}}}));export{t as default};
//# sourceMappingURL=index.get3.mjs.map
