import{createRenderer as e,getRequestDependencies as t,getPreloadLinks as n,getPrefetchLinks as r}from"file://F:/TravelinAgency/node_modules/vue-bundle-renderer/dist/runtime.mjs";import{getResponseStatusText as o,getResponseStatus as s,getQuery as a,createError as i,appendResponseHeader as d}from"file://F:/TravelinAgency/node_modules/h3/dist/index.mjs";import{b as l,a as u,c,d as p,p as h,g as m,j as f,w as y,u as g}from"./nitro.mjs";import{createHead as _,propsToString as w,renderSSRHead as b}from"file://F:/TravelinAgency/node_modules/nuxt/node_modules/unhead/dist/server.mjs";import{walkResolver as v}from"file://F:/TravelinAgency/node_modules/nuxt/node_modules/unhead/dist/utils.mjs";import{toValue as x,isRef as C,hasInjectionContext as j,inject as A,ref as T,watchEffect as S,getCurrentInstance as R,onBeforeUnmount as P,onDeactivated as k,onActivated as H}from"file://F:/TravelinAgency/node_modules/vue/index.mjs";import{renderToString as $}from"file://F:/TravelinAgency/node_modules/vue/server-renderer/index.mjs";import{stringify as F,uneval as L}from"file://F:/TravelinAgency/node_modules/devalue/index.js";import{DeprecationsPlugin as U,PromisesPlugin as z,TemplateParamsPlugin as I,AliasSortingPlugin as O}from"file://F:/TravelinAgency/node_modules/nuxt/node_modules/unhead/dist/plugins.mjs";const VueResolver=(e,t)=>C(t)?x(t):t,M="usehead";function useHead(e,t={}){const n=t.head||function(){if(j()){const e=A(M);if(!e)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return e}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}();return n.ssr?n.push(e||{},t):function(e,t,n={}){const r=T(!1);let o;S((()=>{const s=r.value?{}:v(t,VueResolver);o?o.patch(s):o=e.push(s,n)}));R()&&(P((()=>{o.dispose()})),k((()=>{r.value=!0})),H((()=>{r.value=!1})));return o}(n,e,t)}function useServerHead(e,t={}){return useHead(e,{...t,mode:"server"})}function createHead(e={}){const t=_({...e,propResolvers:[VueResolver]});return t.install=function(e){return{install(t){t.config.globalProperties.$unhead=e,t.config.globalProperties.$head=e,t.provide(M,e)}}.install}(t),t}const N={meta:[{charset:"utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1"},{name:"description",content:"Your trusted travel partner for unforgettable experiences"}],link:[{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:""},{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;500;600;700;800;900&display=swap"}],style:[],script:[],noscript:[],title:"World Trip Agency",htmlAttrs:{lang:"ar-SA",dir:"rtl"}},E={id:"teleports"},D=`<div${w({id:"__nuxt"})}>`,q="</div>",getClientManifest=()=>import("../build/client.manifest.mjs").then((e=>e.default||e)).then((e=>"function"==typeof e?e():e)),X=lazyCachedFunction((()=>import("../build/styles.mjs").then((e=>e.default||e)))),B=lazyCachedFunction((async()=>{const t=await getClientManifest();if(!t)throw new Error("client.manifest is not available");const n=await import("../build/server.mjs").then((function(e){return e.q})).then((e=>e.default||e));if(!n)throw new Error("Server bundle is not available");return e(n,{manifest:t,renderToString:async function(e,t){const n=await $(e,t);return D+n+q},buildAssetsURL:l})})),J=lazyCachedFunction((async()=>{const t=await getClientManifest(),n=await import("../virtual/_virtual_spa-template.mjs").then((e=>e.template)).catch((()=>"")).then((e=>D+e+q)),r=e((()=>()=>{}),{manifest:t,renderToString:()=>n,buildAssetsURL:l}),o=await r.renderToString({});return{rendererContext:r.rendererContext,renderToString:e=>{const t=u(e.event);return e.modules||=new Set,e.payload.serverRendered=!1,e.config={public:t.public,app:t.app},Promise.resolve(o)}}}));function lazyCachedFunction(e){let t=null;return()=>(null===t&&(t=e().catch((e=>{throw t=null,e}))),t)}const W=c("internal:nuxt:prerender:payload");function renderPayloadResponse(e){return{body:F(splitPayload(e).payload,e._payloadReducers),statusCode:s(e.event),statusMessage:o(e.event),headers:{"content-type":"application/json;charset=utf-8","x-powered-by":"Nuxt"}}}function renderPayloadJsonScript(e){const t={type:"application/json",innerHTML:e.data?F(e.data,e.ssrContext._payloadReducers):"","data-nuxt-data":"nuxt-app","data-ssr":!e.ssrContext.noSSR,id:"__NUXT_DATA__"};e.src&&(t["data-src"]=e.src);return[t,{innerHTML:`window.__NUXT__={};window.__NUXT__.config=${L(e.ssrContext.config)}`}]}function splitPayload(e){const{data:t,prerenderedAt:n,...r}=e.payload;return{initial:{...r,prerenderedAt:n},payload:{data:t,prerenderedAt:n}}}c("internal:nuxt:prerender:island"),c("internal:nuxt:prerender:island-props");const Y={disableDefaults:!0,disableCapoSorting:!1,plugins:[U,z,I,O]},G={omitLineBreaks:!1};globalThis.__buildAssetsURL=l,globalThis.__publicAssetsURL=h;const K=!!E.id,Q=K?`<div${w(E)}>`:"",V=K?"</div>":"",Z=/^[^?]*\/_payload.json(?:\?.*)?$/,ee="_payload.json",te=new Set(["/index.html","/200.html","/404.html"]),ne=p((async e=>{const c=g(),p=e.path.startsWith("/__nuxt_error")?a(e):null;if(p&&p.statusCode&&(p.statusCode=Number.parseInt(p.statusCode)),p&&!("__unenv__"in e.node.req))throw i({statusCode:404,statusMessage:"Page Not Found: /__nuxt_error"});const h=void 0;let _=p?.url||e.path;const w=Z.test(_);if(w&&(_=_.substring(0,_.lastIndexOf("/"))||"/",e._path=_,e.node.req.url=_,await W.hasItem(_)))return W.getItem(_);const v=m(e),x=createHead(Y),C={mode:"server"};x.push(N,C);const j={url:_,event:e,runtimeConfig:u(e),noSSR:e.context.nuxt?.noSSR||!1===v.ssr&&!0||te.has(_),head:x,error:!!p,nuxt:void 0,payload:p?{error:p}:{},_payloadReducers:Object.create(null),modules:new Set,islandContext:h},A=!j.noSSR&&!0,T=A?f(j.runtimeConfig.app.cdnURL||j.runtimeConfig.app.baseURL,_.replace(/\?.*$/,""),ee)+"?"+j.runtimeConfig.app.buildId:void 0;j.payload.prerenderedAt=Date.now();const S=j.noSSR?await J():await B();for(const e of await getClientManifest().then((e=>Object.values(e).filter((e=>e._globalCSS)).map((e=>e.src)))))j.modules.add(e);const R=await S.renderToString(j).catch((async e=>{if(j._renderResponse&&"skipping render"===e.message)return{};const t=!p&&j.payload?.error||e;throw await(j.nuxt?.hooks.callHook("app:error",t)),t}));if(await(j.nuxt?.hooks.callHook("app:rendered",{ssrContext:j,renderResult:R})),j._renderResponse)return j._renderResponse;if(j.payload?.error&&!p)throw j.payload.error;if(w){const e=renderPayloadResponse(j);return await W.setItem(_,e),e}A&&(d(e,"x-nitro-prerender",f(_.replace(/\?.*$/,""),ee)),await W.setItem(y(_),renderPayloadResponse(j)));const P=await async function(e){const t=await X(),n=new Set;for(const r of e)if(r in t&&t[r])for(const e of await t[r]())n.add(e);return Array.from(n).map((e=>({innerHTML:e})))}(j.modules??[]),k=v.noScripts,{styles:H,scripts:$}=t(j,S.rendererContext);A&&!k&&x.push({link:[{rel:"preload",as:"fetch",crossorigin:"anonymous",href:T}]},C),j._preloadManifest&&x.push({link:[{rel:"preload",as:"fetch",fetchpriority:"low",crossorigin:"anonymous",href:l(`builds/meta/${j.runtimeConfig.app.buildId}.json`)}]},{...C,tagPriority:"low"}),P.length&&x.push({style:P});{const e=[];for(const t of Object.values(H))e.push({rel:"stylesheet",href:S.rendererContext.buildAssetsURL(t.file),crossorigin:""});e.length&&x.push({link:e},C)}k||(x.push({link:n(j,S.rendererContext)},C),x.push({link:r(j,S.rendererContext)},C),x.push({script:renderPayloadJsonScript(A?{ssrContext:j,data:splitPayload(j).initial,src:T}:{ssrContext:j,data:j.payload})},{...C,tagPosition:"bodyClose",tagPriority:"high"})),v.noScripts||x.push({script:Object.values($).map((e=>({type:e.module?"module":null,src:S.rendererContext.buildAssetsURL(e.file),defer:!e.module||null,tagPosition:"head",crossorigin:""})))},C);const{headTags:F,bodyTags:L,bodyTagsOpen:U,htmlAttrs:z,bodyAttrs:I}=await b(x,G),O={island:false,htmlAttrs:z?[z]:[],head:normalizeChunks([F]),bodyAttrs:I?[I]:[],bodyPrepend:normalizeChunks([U,j.teleports?.body]),body:[R.html,Q+(K?joinTags([j.teleports?.[`#${E.id}`]]):"")+V],bodyAppend:[L]};await c.hooks.callHook("render:html",O,{event:e});var M;return{body:(M=O,`<!DOCTYPE html><html${joinAttrs(M.htmlAttrs)}><head>${joinTags(M.head)}</head><body${joinAttrs(M.bodyAttrs)}>${joinTags(M.bodyPrepend)}${joinTags(M.body)}${joinTags(M.bodyAppend)}</body></html>`),statusCode:s(e),statusMessage:o(e),headers:{"content-type":"text/html;charset=utf-8","x-powered-by":"Nuxt"}}}));function normalizeChunks(e){return e.filter(Boolean).map((e=>e.trim()))}function joinTags(e){return e.join("")}function joinAttrs(e){return 0===e.length?"":" "+e.join(" ")}const re=Object.freeze({__proto__:null,default:ne});export{useServerHead as a,M as h,re as r,useHead as u};
//# sourceMappingURL=renderer.mjs.map
