import{q as e}from"./index2.mjs";import{ref as i,computed as a,defineComponent as n,watch as l,mergeProps as r,unref as s,useSSRContext as t}from"file://F:/TravelinAgency/node_modules/vue/index.mjs";import{ssrRenderAttrs as o,ssrRenderComponent as d,ssrInterpolate as u,ssrRenderList as m}from"file://F:/TravelinAgency/node_modules/vue/server-renderer/index.mjs";import{useRoute as c,useRouter as v}from"file://F:/TravelinAgency/node_modules/vue-router/dist/vue-router.node.mjs";import{k as p,d as g}from"./usePackages.mjs";import{i as x}from"./server.mjs";import{G as f}from"./NuxtImg.vue2.mjs";import{I as y}from"./PackageCard.vue2.mjs";import"file://F:/TravelinAgency/node_modules/@iconify/utils/lib/css/icon.mjs";import"file://F:/TravelinAgency/node_modules/@iconify/vue/dist/iconify.mjs";import"file://F:/TravelinAgency/node_modules/hookable/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/unctx/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/h3/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/radix3/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/defu/dist/defu.mjs";import"file://F:/TravelinAgency/node_modules/klona/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/nuxt/node_modules/cookie-es/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/destr/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/ohash/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/vue-devtools-stub/dist/index.mjs";import"../_/renderer.mjs";import"file://F:/TravelinAgency/node_modules/vue-bundle-renderer/dist/runtime.mjs";import"../_/nitro.mjs";import"file://F:/TravelinAgency/node_modules/ofetch/dist/node.mjs";import"file://F:/TravelinAgency/node_modules/node-mock-http/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/scule/dist/index.mjs";import"node:fs";import"node:url";import"file://F:/TravelinAgency/node_modules/pathe/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/@iconify/utils/lib/index.mjs";import"file://F:/TravelinAgency/node_modules/consola/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/ipx/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/unstorage/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/unstorage/drivers/fs.mjs";import"file:///F:/TravelinAgency/node_modules/nuxt/dist/core/runtime/nitro/utils/cache-driver.js";import"file://F:/TravelinAgency/node_modules/unstorage/drivers/fs-lite.mjs";import"file://F:/TravelinAgency/node_modules/nuxt/node_modules/unhead/dist/server.mjs";import"file://F:/TravelinAgency/node_modules/nuxt/node_modules/unhead/dist/utils.mjs";import"file://F:/TravelinAgency/node_modules/devalue/index.js";import"file://F:/TravelinAgency/node_modules/nuxt/node_modules/unhead/dist/plugins.mjs";import"file://F:/TravelinAgency/node_modules/@unhead/schema-org/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/@unhead/schema-org/dist/vue.mjs";import"file://F:/TravelinAgency/node_modules/floating-vue/dist/floating-vue.mjs";import"./nuxt-link.mjs";const h=n({__name:"search",__ssrInlineRender:!0,setup(n){c();const t=v(),{t:h,locale:b}=x(),{packages:_,pending:w,error:j}=p(),{filters:A,searchQuery:F,filterOptions:T}=(()=>{const{locale:e}=x(),{getPackages:n}=p(),l=i(""),r=i({periods:[],priceRange:{min:0,max:1/0},duration:{min:0,max:1/0},dates:{start:null,end:null},travelers:1,type:[]}),s=a((()=>n())),t=a((()=>{const e=s.value||[];if(0===e.length)return{periods:[],priceRanges:[],durationRanges:[]};const i=new Set;e.forEach((e=>{e.travel_period&&i.add(e.travel_period)}));const a=["january","february","march","april","may","june","july","august","september","october","november","december"],n=Array.from(i).sort(((e,i)=>a.findIndex((i=>e.toLowerCase().includes(i)))-a.findIndex((e=>i.toLowerCase().includes(e))))),l={january:{en:"January",ar:"يناير"},february:{en:"February",ar:"فبراير"},march:{en:"March",ar:"مارس"},april:{en:"April",ar:"أبريل"},may:{en:"May",ar:"مايو"},june:{en:"June",ar:"يونيو"},july:{en:"July",ar:"يوليو"},august:{en:"August",ar:"أغسطس"},september:{en:"September",ar:"سبتمبر"},october:{en:"October",ar:"أكتوبر"},november:{en:"November",ar:"نوفمبر"},december:{en:"December",ar:"ديسمبر"}};return{periods:n.map((e=>({id:e,name:l[e]||{en:e,ar:e}}))),priceRanges:[{min:0,max:1e3,label:"Under $1,000"},{min:1e3,max:3e3,label:"$1,000 - $3,000"},{min:3e3,max:5e3,label:"$3,000 - $5,000"},{min:5e3,max:1/0,label:"Over $5,000"}],durationRanges:[{min:0,max:3,label:"1-3 days"},{min:4,max:7,label:"4-7 days"},{min:8,max:14,label:"8-14 days"},{min:15,max:1/0,label:"15+ days"}]}})),o=a((()=>{let e=s.value||[];if(l.value){const i=l.value.toLowerCase();e=e.filter((e=>e.title_en.toLowerCase().includes(i)||e.description_en.toLowerCase().includes(i)))}return r.value.periods.length>0&&(e=e.filter((e=>r.value.periods.some((i=>e.travel_period.toLowerCase()===i.toLowerCase()))))),(r.value.priceRange.min>0||r.value.priceRange.max<1/0)&&(e=e.filter((e=>e.price>=r.value.priceRange.min&&e.price<=r.value.priceRange.max))),(r.value.duration.min>0||r.value.duration.max<1/0)&&(e=e.filter((e=>e.duration_days>=r.value.duration.min&&e.duration_days<=r.value.duration.max))),e})),d=a((()=>{let e=0;return e+=r.value.periods.length,(0!==r.value.priceRange.min||r.value.priceRange.max!==1/0)&&e++,(0!==r.value.duration.min||r.value.duration.max!==1/0)&&e++,r.value.dates.start&&r.value.dates.end&&e++,r.value.travelers>1&&e++,e}));return{searchQuery:l,filters:r,filterOptions:t,filteredPackages:o,activeFiltersCount:d,resetFilters:()=>{l.value="",r.value={periods:[],priceRange:{min:0,max:1/0},duration:{min:0,max:1/0},dates:{start:null,end:null},travelers:1,type:[]}}}})(),$=a((()=>{var e;return null!=(e=A.value)&&e.destinations?A.value.destinations.map((e=>{var i,a,n;const l=null==(a=null==(i=T.value)?void 0:i.destinations)?void 0:a.find((i=>i.id===e));return(null==(n=null==l?void 0:l.name)?void 0:n[b.value])||e})):[]})),k=a((()=>{var e,i,a,n,l;return!!A.value&&(((null==(e=A.value.destinations)?void 0:e.length)||0)>0||0!==((null==(i=A.value.priceRange)?void 0:i.min)||0)||((null==(a=A.value.priceRange)?void 0:a.max)||1/0)!==1/0||0!==((null==(n=A.value.duration)?void 0:n.min)||0)||((null==(l=A.value.duration)?void 0:l.max)||1/0)!==1/0||(A.value.travelers||1)>1)})),R=a((()=>_.value?_.value.filter((e=>{var i,a,n,l,r,s,t,o,d,u,m,c,v,p,g,x;if(F.value){const r=F.value.toLowerCase(),s=(null==(i=e.title_en)?void 0:i.toLowerCase().includes(r))||(null==(a=e.title_ar)?void 0:a.toLowerCase().includes(r)),t=(null==(n=e.description_en)?void 0:n.toLowerCase().includes(r))||(null==(l=e.description_ar)?void 0:l.toLowerCase().includes(r));if(!s&&!t)return!1}if((null==(s=null==(r=A.value)?void 0:r.destinations)?void 0:s.length)>0){const i=null==(t=null==e?void 0:e.travel_period)?void 0:t.toLowerCase();if(!i||!A.value.destinations.some((e=>{const a=e.toLowerCase();return i.includes(a)})))return!1}return!((null==e?void 0:e.price_per_person)<((null==(d=null==(o=A.value)?void 0:o.priceRange)?void 0:d.min)||0)||(null==(m=null==(u=A.value)?void 0:u.priceRange)?void 0:m.max)!==1/0&&(null==e?void 0:e.price_per_person)>A.value.priceRange.max||(null==e?void 0:e.duration_days)<((null==(v=null==(c=A.value)?void 0:c.duration)?void 0:v.min)||0)||(null==(g=null==(p=A.value)?void 0:p.duration)?void 0:g.max)!==1/0&&(null==e?void 0:e.duration_days)>A.value.duration.max||((null==(x=A.value)?void 0:x.travelers)||1)>1&&(null==e?void 0:e.max_persons)<A.value.travelers)})):[]));return l([A,F],(([e,i])=>{var a;t.replace({query:{...i&&{q:i},...(null==(a=e.destinations)?void 0:a.length)&&{periods:e.destinations.join(",")},...e.priceRange.min>0&&{priceMin:e.priceRange.min},...e.priceRange.max<1/0&&{priceMax:e.priceRange.max},...e.duration.min>0&&{durationMin:e.duration.min},...e.duration.max<1/0&&{durationMax:e.duration.max},...e.travelers>1&&{travelers:e.travelers}}})}),{deep:!0}),(i,a,n,l)=>{var t;const c=f,v=e;a(`<div${o(r({class:"min-h-screen bg-gray-50"},l))}><section class="relative bg-cover bg-center py-20"><div class="absolute inset-0">`),a(d(c,{src:"/images/packages/home/packages-hero-bg.jpeg",alt:"Stunning beachfront villa with private pool and ocean views",width:"1920",height:"1080",loading:"eager",format:"webp",quality:"90",class:"w-full h-full object-cover",placeholder:""},null,n)),a(`<div class="absolute inset-0 bg-gradient-to-b from-black/50 via-black/30 to-black/50"></div></div><div class="container relative z-10 mx-auto px-4 text-center text-white"><h1 class="text-2xl md:text-3xl font-bold mb-4">${u(s(h)("search.results.title"))}</h1><div class="flex items-center justify-center text-1xl gap-2 text-sm md:text-base mb-6 w-full">`),R.value.length>0?a(`<span>${u(s(h)("search.results.count",{count:R.value.length}))}</span>`):a(`<span>${u(s(h)("search.results.empty"))}</span>`),a('</div><div class="flex flex-wrap justify-center gap-3 mb-8">'),null!=(t=s(A))&&t.destinations&&s(A).destinations.length?a(`<div class="flex items-center gap-2 bg-white/10 backdrop-blur-sm px-4 py-2 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"></path></svg><span>${u($.value.join(", "))}</span></div>`):a("\x3c!----\x3e"),0!==s(A).priceRange.min||s(A).priceRange.max!==1/0?(a('<div class="flex items-center gap-2 bg-white/10 backdrop-blur-sm px-4 py-2 rounded-full">'),a(d(g,{size:20,class:"text-white"},null,n)),a(`<span>${u((e=>e.max===1/0?`${h("common.from")} ${e.min.toLocaleString()}`:`${e.min.toLocaleString()} - ${e.max.toLocaleString()}`)(s(A).priceRange))}</span></div>`)):a("\x3c!----\x3e"),0!==s(A).duration.min||s(A).duration.max!==1/0?a(`<div class="flex items-center gap-2 bg-white/10 backdrop-blur-sm px-4 py-2 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path></svg><span>${u((e=>e.max===1/0?`${h("common.from")} ${e.min} ${h("common.days")}`:`${e.min} - ${e.max} ${h("common.days")}`)(s(A).duration))}</span></div>`):a("\x3c!----\x3e"),s(A).travelers>1?a(`<div class="flex items-center gap-2 bg-white/10 backdrop-blur-sm px-4 py-2 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"></path></svg><span>${u(s(A).travelers)} ${u(s(h)("search.travelers_count",{count:s(A).travelers}))}</span></div>`):a("\x3c!----\x3e"),k.value?a(`<button class="flex items-center gap-2 bg-primary/20 hover:bg-primary/30 backdrop-blur-sm px-4 py-2 rounded-full transition-colors"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg> ${u(s(h)("search.active_filters.clear_filters"))}</button>`):a("\x3c!----\x3e"),a('</div></div></section><section class="py-16"><div class="container mx-auto px-4">'),s(w)?a('<div class="flex justify-center items-center min-h-[400px]"><div class="animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent"></div></div>'):s(j)?(a('<div class="text-center text-red-500 py-16"><div class="max-w-md mx-auto">'),a(d(v,{name:"material-symbols:error-outline",class:"h-16 w-16 mx-auto mb-4 text-red-400"},null,n)),a(`<h3 class="text-lg font-medium mb-2">${u(s(h)("common.error"))}</h3><p class="text-gray-500">${u(s(j).message||"An error occurred while loading packages")}</p></div></div>`)):0===s(_).length?(a('<div class="text-center text-gray-500 py-16"><div class="max-w-md mx-auto">'),a(d(v,{name:"material-symbols:package-2-outline",class:"h-16 w-16 mx-auto mb-4 text-gray-400"},null,n)),a(`<h3 class="text-lg font-medium mb-2">${u(s(h)("packages.no_packages"))}</h3><p class="text-gray-500">${u(s(h)("packages.no_packages_description"))}</p></div></div>`)):0===R.value.length?(a('<div class="text-center py-16"><div class="max-w-md mx-auto">'),a(d(v,{name:"material-symbols:search-off",class:"h-16 w-16 mx-auto mb-4 text-gray-400"},null,n)),a(`<h3 class="text-lg font-medium mb-2">${u(s(h)("search.results.empty"))}</h3><p class="text-gray-500 mb-6">${u(s(h)("search.results.empty_description"))}</p><button class="px-6 py-2 bg-primary text-white rounded-xl hover:bg-primary/90 transition-colors">${u(s(h)("search.actions.clear_filters"))}</button></div></div>`)):(a('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">\x3c!--[--\x3e'),m(R.value,(e=>{a(d(y,{key:e.id,package_:e},null,n))})),a("\x3c!--]--\x3e</div>")),a("</div></section></div>")}}}),b=h.setup;h.setup=(e,i)=>{const a=t();return(a.modules||(a.modules=new Set)).add("pages/packages/search.vue"),b?b(e,i):void 0};export{h as default};
//# sourceMappingURL=search.vue.mjs.map
