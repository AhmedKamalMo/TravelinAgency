import{computed as e,defineComponent as i,useAttrs as o,ref as n,unref as d,mergeProps as l}from"file://F:/TravelinAgency/node_modules/vue/index.mjs";import{ssrRenderSlot as c,ssrRenderAttrs as p}from"file://F:/TravelinAgency/node_modules/vue/server-renderer/index.mjs";import{defu as f}from"file://F:/TravelinAgency/node_modules/defu/dist/defu.mjs";import{p as m,g as v,a as w,Y as b,O as x,c as q,d as $,T as S,S as j,H as z}from"./server.mjs";import{appendHeader as W}from"file://F:/TravelinAgency/node_modules/h3/dist/index.mjs";async function h(e,i){return await async function(e){{const i=(await import("file://F:/TravelinAgency/node_modules/image-meta/dist/index.mjs").then((e=>e.imageMeta)))(await fetch(e).then((e=>e.buffer())));if(!i)throw new Error(`No metadata could be extracted from the image \`${e}\`.`);const{width:o,height:n}=i;return{width:o,height:n,ratio:o&&n?o/n:void 0}}}(i).catch((e=>(console.error("Failed to get image meta for "+i,e+""),{width:0,height:0,ratio:0})))}function u(e){return i=>i?e[i]||i:e.missingValue}function l$2(e=""){return"number"==typeof e?e:"string"==typeof e&&e.replace("px","").match(/^\d+$/g)?Number.parseInt(e,10):void 0}function a(e="",i=""){const o=[e,...i.split(", ").map((e=>e.trim().split(" ")[0].trim()))].filter((e=>e&&e.includes("/_ipx/")));o.length&&W(m(),"x-nitro-prerender",o.map((e=>encodeURIComponent(e))).join(", "))}function K(e){const i={options:e},r=(e,o={})=>{const n=k(i,e,o);return a(n.url),n},t=(e,i={},o={})=>r(e,{...o,modifiers:f(i,o.modifiers||{})}).url;for(const i in e.presets)t[i]=(o,n,d)=>t(o,n,{...e.presets[i],...d});return t.options=e,t.getImage=r,t.getMeta=(e,o)=>async function(e,i,o){const n=k(e,i,{...o});return"function"==typeof n.getMeta?await n.getMeta():await h(0,n.url)}(i,e,o),t.getSizes=(e,o)=>function(e,i,o){var n,d,l,c,p;const f=l$2(null==(n=o.modifiers)?void 0:n.width),m=l$2(null==(d=o.modifiers)?void 0:d.height),v=function(e){const i={};if("string"==typeof e)for(const o of e.split(/[\s,]+/).filter((e=>e))){const e=o.split(":");2!==e.length?i["1px"]=e[0].trim():i[e[0].trim()]=e[1].trim()}else Object.assign(i,e);return i}(o.sizes),w=null!=(l=o.densities)&&l.trim()?function(e=""){if(void 0===e||!e.length)return[];const i=new Set;for(const o of e.split(" ")){const e=Number.parseInt(o.replace("x",""));e&&i.add(e)}return Array.from(i)}(o.densities.trim()):e.options.densities;!function(e){if(0===e.length)throw new Error("`densities` must not be empty, configure to `1` to render regular size only (DPR 1.0)")}(w);const b=f&&m?m/f:0,x=[],q=[];if(Object.keys(v).length>=1){for(const n in v){const d=y(n,String(v[n]),m,b,e);if(void 0!==d){x.push({size:d.size,screenMaxWidth:d.screenMaxWidth,media:`(max-width: ${d.screenMaxWidth}px)`});for(const n of w)q.push({width:d._cWidth*n,src:_(e,i,o,d,n)})}}!function(e){var i;e.sort(((e,i)=>e.screenMaxWidth-i.screenMaxWidth));let o=null;for(let i=e.length-1;i>=0;i--){const n=e[i];n.media===o&&e.splice(i,1),o=n.media}for(let o=0;o<e.length;o++)e[o].media=(null==(i=e[o+1])?void 0:i.media)||""}(x)}else for(const n of w){const d=Object.keys(v)[0];let l=d?y(d,String(v[d]),m,b,e):void 0;void 0===l&&(l={size:"",screenMaxWidth:0,_cWidth:null==(c=o.modifiers)?void 0:c.width,_cHeight:null==(p=o.modifiers)?void 0:p.height}),q.push({width:n,src:_(e,i,o,l,n)})}!function(e){e.sort(((e,i)=>e.width-i.width));let i=null;for(let o=e.length-1;o>=0;o--){const n=e[o];n.width===i&&e.splice(o,1),i=n.width}}(q);const $=q[q.length-1],S=x.length?x.map((e=>`${e.media?e.media+" ":""}${e.size}`)).join(", "):void 0,j=S?"w":"x",z=q.map((e=>`${e.src} ${e.width}${j}`)).join(", ");return{sizes:S,srcset:z,src:null==$?void 0:$.src}}(i,e,o),i.$img=t,t}function k(e,i,o){var n,d;if(i&&"string"!=typeof i)throw new TypeError(`input must be a string (received ${typeof i}: ${JSON.stringify(i)})`);if(!i||i.startsWith("data:"))return{url:i};const{provider:l,defaults:c}=function(e,i){const o=e.options.providers[i];if(!o)throw new Error("Unknown provider: "+i);return o}(e,o.provider||e.options.provider),p=function(e,i){if(!i)return{};if(!e.options.presets[i])throw new Error("Unknown preset: "+i);return e.options.presets[i]}(e,o.preset);if(i=w(i)?i:v(i),!l.supportsAlias)for(const o in e.options.alias)if(i.startsWith(o)){const n=e.options.alias[o];n&&(i=b(n,i.slice(o.length)))}if(l.validateDomains&&w(i)){const o=x(i).host;if(!e.options.domains.find((e=>e===o)))return{url:i}}const m=f(o,p,c);m.modifiers={...m.modifiers};const q=m.modifiers.format;null!=(n=m.modifiers)&&n.width&&(m.modifiers.width=l$2(m.modifiers.width)),null!=(d=m.modifiers)&&d.height&&(m.modifiers.height=l$2(m.modifiers.height));const $=l.getImage(i,m,e);return $.format=$.format||q||"",$}function y(e,i,o,n,d){const l=d.options.screens&&d.options.screens[e]||Number.parseInt(e),c=i.endsWith("vw");if(!c&&/^\d+$/.test(i)&&(i+="px"),!c&&!i.endsWith("px"))return;let p=Number.parseInt(i);if(!l||!p)return;c&&(p=Math.round(p/100*l));return{size:i,screenMaxWidth:l,_cWidth:p,_cHeight:n?Math.round(p*n):o}}function _(e,i,o,n,d){return e.$img(i,{...o.modifiers,width:n._cWidth?n._cWidth*d:void 0,height:n._cHeight?n._cHeight*d:void 0},o)}const M=function({formatter:e,keyMap:i,joinWith:o="/",valueMap:n}={}){e||(e=(e,i)=>`${e}=${i}`),i&&"function"!=typeof i&&(i=u(i));const d=n||{};return Object.keys(d).forEach((e=>{"function"!=typeof d[e]&&(d[e]=u(d[e]))})),(n={})=>Object.entries(n).filter((([e,i])=>typeof i<"u")).map((([o,l])=>{const c=d[o];return"function"==typeof c&&(l=c(n[o])),o="function"==typeof i?i(o):o,e(o,l)})).join(o)}({keyMap:{format:"f",fit:"fit",width:"w",height:"h",resize:"s",quality:"q",background:"b"},joinWith:"&",formatter:(e,i)=>$(e)+"_"+$(i)}),g=(e,{modifiers:i={},baseURL:o}={},n)=>{i.width&&i.height&&(i.resize=`${i.width}x${i.height}`,delete i.width,delete i.height);const d=M(i)||"_";return o||(o=b(n.options.nuxt.baseURL,"/_ipx")),{url:b(o,d,q(e))}},A=!0,O=!0,I=Object.freeze({__proto__:null,getImage:g,supportsAlias:O,validateDomains:A}),N=Object.freeze({__proto__:null,getImage:g,supportsAlias:O,validateDomains:A}),E={screens:{xs:320,sm:640,md:768,lg:1024,xl:1280,xxl:1536,"2xl":1536},presets:{default:{modifiers:{format:"webp",quality:80}}},provider:"ipxStatic",domains:["images.unsplash.com","images.pexels.com"],alias:{},densities:[1,2,1,2],format:["jpg","jpeg","png","webp","webp"],quality:80};E.providers={ipx:{provider:I,defaults:{}},ipxStatic:{provider:N,defaults:{}}};const s=()=>{const e=S(),i=j();return i.$img||i._img||(i._img=K({...E,nuxt:{baseURL:e.app.baseURL},runtimeConfig:e}))},R={src:{type:String,required:!1},format:{type:String,required:!1},quality:{type:[Number,String],required:!1},background:{type:String,required:!1},fit:{type:String,required:!1},modifiers:{type:Object,required:!1},preset:{type:String,required:!1},provider:{type:String,required:!1},sizes:{type:[Object,String],required:!1},densities:{type:String,required:!1},preload:{type:[Boolean,Object],required:!1},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},alt:{type:String,required:!1},referrerpolicy:{type:String,required:!1},usemap:{type:String,required:!1},longdesc:{type:String,required:!1},ismap:{type:Boolean,required:!1},loading:{type:String,required:!1,validator:e=>["lazy","eager"].includes(e)},crossorigin:{type:[Boolean,String],required:!1,validator:e=>["anonymous","use-credentials","",!0,!1].includes(e)},decoding:{type:String,required:!1,validator:e=>["async","auto","sync"].includes(e)},nonce:{type:[String],required:!1}},U=i({__name:"NuxtImg",__ssrInlineRender:!0,props:{...R,placeholder:{type:[Boolean,String,Number,Array],required:!1},placeholderClass:{type:String,required:!1},custom:{type:Boolean,required:!1}},emits:["load","error"],setup(i,{emit:f}){const m=i,v=o(),w=!0,b=s(),x=(i=>{const o=e((()=>({provider:i.provider,preset:i.preset}))),n=e((()=>({width:l$2(i.width),height:l$2(i.height),alt:i.alt,referrerpolicy:i.referrerpolicy,usemap:i.usemap,longdesc:i.longdesc,ismap:i.ismap,crossorigin:!0===i.crossorigin?"anonymous":i.crossorigin||void 0,loading:i.loading,decoding:i.decoding,nonce:i.nonce}))),d=s();return{options:o,attrs:n,modifiers:e((()=>({...i.modifiers,width:l$2(i.width),height:l$2(i.height),format:i.format,quality:i.quality||d.options.quality,background:i.background,fit:i.fit})))}})(m),q=n(!1),$=n(),S=e((()=>b.getSizes(m.src,{...x.options.value,sizes:m.sizes,densities:m.densities,modifiers:{...x.modifiers.value,width:l$2(m.width),height:l$2(m.height)}}))),W=e((()=>{const e={...x.attrs.value,"data-nuxt-img":""};return(!m.placeholder||q.value)&&(e.sizes=S.value.sizes,e.srcset=S.value.srcset),e})),M=e((()=>{let e=m.placeholder;if(""===e&&(e=!0),!e||q.value)return!1;if("string"==typeof e)return e;const i=Array.isArray(e)?e:"number"==typeof e?[e,e]:[10,10];return b(m.src,{...x.modifiers.value,width:i[0],height:i[1],quality:i[2]||50,blur:i[3]||3},x.options.value)})),A=e((()=>m.sizes?S.value.src:b(m.src,x.modifiers.value,x.options.value))),O=e((()=>M.value?M.value:A.value));if(m.preload){const e=Object.values(S.value).every((e=>e));z({link:[{rel:"preload",as:"image",nonce:m.nonce,...e?{href:S.value.src,imagesizes:S.value.sizes,imagesrcset:S.value.srcset}:{href:O.value},..."boolean"!=typeof m.preload&&m.preload.fetchPriority?{fetchpriority:m.preload.fetchPriority}:{}}]})}return a(O.value,S.value.srcset),j().isHydrating,(e,i,o,n)=>{e.custom?c(e.$slots,"default",{...d(w)?{onerror:"this.setAttribute('data-error', 1)"}:{},imgAttrs:{...W.value,...d(v)},isLoaded:q.value,src:O.value},null,i,o):i(`<img${p(l({ref_key:"imgEl",ref:$,class:M.value&&!q.value?e.placeholderClass:void 0},{...d(w)?{onerror:"this.setAttribute('data-error', 1)"}:{},...W.value,...d(v)},{src:O.value},n))}>`)}}});export{U as G};
//# sourceMappingURL=NuxtImg.vue2.mjs.map
