import{M as e}from"./nuxt-link.mjs";import{q as t}from"./index2.mjs";import{ref as s,computed as r,watch as a,mergeProps as l,unref as o,withCtx as n,createVNode as i,createTextVNode as d,useSSRContext as u}from"file://F:/TravelinAgency/node_modules/vue/index.mjs";import{ssrRenderAttrs as c,ssrRenderComponent as m,ssrRenderAttr as p,ssrIncludeBooleanAttr as b,ssrLooseContain as g,ssrLooseEqual as v,ssrRenderList as f,ssrInterpolate as x}from"file://F:/TravelinAgency/node_modules/vue/server-renderer/index.mjs";import{k as _,H as A}from"./server.mjs";import"file://F:/TravelinAgency/node_modules/@iconify/utils/lib/css/icon.mjs";import"file://F:/TravelinAgency/node_modules/@iconify/vue/dist/iconify.mjs";import"file://F:/TravelinAgency/node_modules/hookable/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/unctx/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/h3/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/vue-router/dist/vue-router.node.mjs";import"file://F:/TravelinAgency/node_modules/radix3/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/defu/dist/defu.mjs";import"file://F:/TravelinAgency/node_modules/klona/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/nuxt/node_modules/cookie-es/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/destr/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/ohash/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/vue-devtools-stub/dist/index.mjs";import"../_/renderer.mjs";import"file://F:/TravelinAgency/node_modules/vue-bundle-renderer/dist/runtime.mjs";import"../_/nitro.mjs";import"file://F:/TravelinAgency/node_modules/ofetch/dist/node.mjs";import"file://F:/TravelinAgency/node_modules/node-mock-http/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/scule/dist/index.mjs";import"node:fs";import"node:url";import"file://F:/TravelinAgency/node_modules/pathe/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/@iconify/utils/lib/index.mjs";import"file://F:/TravelinAgency/node_modules/consola/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/ipx/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/unstorage/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/unstorage/drivers/fs.mjs";import"file:///F:/TravelinAgency/node_modules/nuxt/dist/core/runtime/nitro/utils/cache-driver.js";import"file://F:/TravelinAgency/node_modules/unstorage/drivers/fs-lite.mjs";import"file://F:/TravelinAgency/node_modules/nuxt/node_modules/unhead/dist/server.mjs";import"file://F:/TravelinAgency/node_modules/nuxt/node_modules/unhead/dist/utils.mjs";import"file://F:/TravelinAgency/node_modules/devalue/index.js";import"file://F:/TravelinAgency/node_modules/nuxt/node_modules/unhead/dist/plugins.mjs";import"file://F:/TravelinAgency/node_modules/@unhead/schema-org/dist/index.mjs";import"file://F:/TravelinAgency/node_modules/@unhead/schema-org/dist/vue.mjs";import"file://F:/TravelinAgency/node_modules/floating-vue/dist/floating-vue.mjs";const h={__name:"edit",__ssrInlineRender:!0,setup(u){const h=_().params.id,k=s(!0),$=s(!1),w=s([]),j=s(null),F=s({customer_name:"",customer_email:"",customer_phone:"",package_id:"",guests_count:1,departure_date:"",return_date:"",total_amount:0,paid_amount:0,currency:"SAR",payment_method:"",payment_reference:"",booking_status:"pending",payment_status:"pending",special_requests:"",notes:"",booking_number:"",confirmed_at:"",cancellation_reason:""}),T=r((()=>F.value.customer_name&&F.value.customer_email&&F.value.customer_phone&&F.value.package_id&&F.value.departure_date&&F.value.total_amount>0)),y=e=>e?new Intl.NumberFormat("ar-SA",{style:"currency",currency:"SAR"}).format(e):"0.00 ر.س";return a((()=>F.value.guests_count),(()=>{j.value&&(F.value.total_amount=j.value.price*F.value.guests_count)})),a((()=>F.value.departure_date),(()=>{var e;if(F.value.departure_date&&null!=(e=j.value)&&e.duration_days){const e=new Date(F.value.departure_date),t=new Date(e);t.setDate(t.getDate()+j.value.duration_days),F.value.return_date=t.toISOString().split("T")[0]}})),A({title:"تحرير الحجز - Wonder Land Admin",meta:[{name:"description",content:"تحرير تفاصيل الحجز"},{name:"robots",content:"noindex, nofollow"}]}),(s,r,a,u)=>{const _=e,A=t;r(`<div${c(l({class:"space-y-6"},u))}><div class="h-16"></div><div class="flex flex-col sm:flex-row sm:items-center sm:justify-between"><div><h1 class="text-2xl font-bold text-gray-900">تحرير الحجز</h1><p class="mt-1 text-sm text-gray-600">تعديل تفاصيل الحجز</p></div><div class="mt-4 sm:mt-0 flex space-x-3 space-x-reverse">`),r(m(_,{to:`/admin/bookings/${o(h)}`,class:"inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors"},{default:n(((e,t,s,r)=>{if(!t)return[i(A,{name:"material-symbols:visibility",class:"h-5 w-5 ml-2"}),d(" عرض ")];t(m(A,{name:"material-symbols:visibility",class:"h-5 w-5 ml-2"},null,s,r)),t(" عرض ")})),_:1},a)),r(m(_,{to:"/admin/bookings",class:"inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors"},{default:n(((e,t,s,r)=>{if(!t)return[i(A,{name:"material-symbols:arrow-back",class:"h-5 w-5 ml-2"}),d(" العودة ")];t(m(A,{name:"material-symbols:arrow-back",class:"h-5 w-5 ml-2"},null,s,r)),t(" العودة ")})),_:1},a)),r("</div></div>"),o(k)?(r('<div class="flex justify-center items-center py-12">'),r(m(A,{name:"material-symbols:progress-activity",class:"animate-spin h-8 w-8 text-blue-600"},null,a)),r('<span class="mr-3 text-gray-600">جارٍ تحميل الحجز...</span></div>')):(r(`<form class="space-y-6"><div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6"><div class="grid grid-cols-1 lg:grid-cols-3 gap-6"><div class="lg:col-span-2 space-y-6"><div><h2 class="text-lg font-semibold text-gray-900 mb-4">معلومات العميل</h2><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">اسم العميل *</label><input${p("value",o(F).customer_name)} type="text" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="أدخل اسم العميل"></div><div><label class="block text-sm font-medium text-gray-700 mb-2">البريد الإلكتروني *</label><input${p("value",o(F).customer_email)} type="email" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="أدخل البريد الإلكتروني"></div><div><label class="block text-sm font-medium text-gray-700 mb-2">رقم الهاتف *</label><input${p("value",o(F).customer_phone)} type="tel" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="+966501234567"></div><div><label class="block text-sm font-medium text-gray-700 mb-2">عدد الضيوف *</label><input${p("value",o(F).guests_count)} type="number" min="1" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></div></div></div><div><h2 class="text-lg font-semibold text-gray-900 mb-4">تفاصيل الباقة</h2><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">اختيار الباقة *</label><select required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"><option value=""${b(Array.isArray(o(F).package_id)?g(o(F).package_id,""):v(o(F).package_id,""))?" selected":""}>اختر الباقة</option>\x3c!--[--\x3e`),f(o(w),(e=>{r(`<option${p("value",e.id)}${b(Array.isArray(o(F).package_id)?g(o(F).package_id,e.id):v(o(F).package_id,e.id))?" selected":""}>${x(e.title_ar||e.title_en||e.title)} - ${x(y(e.price))}</option>`)})),r("\x3c!--]--\x3e</select></div>"),o(j)?r(`<div><label class="block text-sm font-medium text-gray-700 mb-2">مدة الرحلة</label><input${p("value",o(j).duration_days+" أيام")} type="text" readonly class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"></div>`):r("\x3c!----\x3e"),r(`<div><label class="block text-sm font-medium text-gray-700 mb-2">تاريخ المغادرة *</label><input${p("value",o(F).departure_date)} type="date" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></div><div><label class="block text-sm font-medium text-gray-700 mb-2">تاريخ العودة</label><input${p("value",o(F).return_date)} type="date" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></div></div>`),o(j)?r(`<div class="mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200"><h3 class="text-sm font-medium text-blue-900 mb-2">تفاصيل الباقة المختارة</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-800"><div><span class="font-medium">العنوان:</span> ${x(o(j).title_ar||o(j).title_en||o(j).title)}</div><div><span class="font-medium">السعر:</span> ${x(y(o(j).price))}</div><div><span class="font-medium">المدة:</span> ${x(o(j).duration_days)} أيام </div><div><span class="font-medium">الوجهة:</span> ${x(o(j).location||o(j).travel_period)}</div></div></div>`):r("\x3c!----\x3e"),r(`</div><div><h2 class="text-lg font-semibold text-gray-900 mb-4">تفاصيل الدفع</h2><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">المبلغ الإجمالي *</label><input${p("value",o(F).total_amount)} type="number" min="0" step="0.01" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0.00"></div><div><label class="block text-sm font-medium text-gray-700 mb-2">المبلغ المدفوع</label><input${p("value",o(F).paid_amount)} type="number" min="0" step="0.01" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0.00"></div><div><label class="block text-sm font-medium text-gray-700 mb-2">العملة</label><select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"><option value="SAR"${b(Array.isArray(o(F).currency)?g(o(F).currency,"SAR"):v(o(F).currency,"SAR"))?" selected":""}>ريال سعودي (SAR)</option><option value="USD"${b(Array.isArray(o(F).currency)?g(o(F).currency,"USD"):v(o(F).currency,"USD"))?" selected":""}>دولار أمريكي (USD)</option><option value="EUR"${b(Array.isArray(o(F).currency)?g(o(F).currency,"EUR"):v(o(F).currency,"EUR"))?" selected":""}>يورو (EUR)</option><option value="AED"${b(Array.isArray(o(F).currency)?g(o(F).currency,"AED"):v(o(F).currency,"AED"))?" selected":""}>درهم إماراتي (AED)</option></select></div><div><label class="block text-sm font-medium text-gray-700 mb-2">طريقة الدفع</label><select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"><option value=""${b(Array.isArray(o(F).payment_method)?g(o(F).payment_method,""):v(o(F).payment_method,""))?" selected":""}>اختر طريقة الدفع</option><option value="cash"${b(Array.isArray(o(F).payment_method)?g(o(F).payment_method,"cash"):v(o(F).payment_method,"cash"))?" selected":""}>نقداً</option><option value="bank_transfer"${b(Array.isArray(o(F).payment_method)?g(o(F).payment_method,"bank_transfer"):v(o(F).payment_method,"bank_transfer"))?" selected":""}>تحويل بنكي</option><option value="credit_card"${b(Array.isArray(o(F).payment_method)?g(o(F).payment_method,"credit_card"):v(o(F).payment_method,"credit_card"))?" selected":""}>بطاقة ائتمان</option><option value="online"${b(Array.isArray(o(F).payment_method)?g(o(F).payment_method,"online"):v(o(F).payment_method,"online"))?" selected":""}>دفع إلكتروني</option></select></div><div><label class="block text-sm font-medium text-gray-700 mb-2">مرجع الدفع</label><input${p("value",o(F).payment_reference)} type="text" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="رقم المرجع أو المعاملة"></div></div></div><div><h2 class="text-lg font-semibold text-gray-900 mb-4">طلبات خاصة وملاحظات</h2><div class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">طلبات خاصة</label><textarea rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="أي طلبات خاصة من العميل">${x(o(F).special_requests)}</textarea></div><div><label class="block text-sm font-medium text-gray-700 mb-2">ملاحظات إدارية</label><textarea rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ملاحظات إدارية أو تفاصيل إضافية">${x(o(F).notes)}</textarea></div></div></div></div><div class="space-y-6"><div class="bg-gray-50 rounded-lg p-4"><h3 class="text-lg font-semibold text-gray-900 mb-4">حالة الحجز</h3><div class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">حالة الحجز *</label><select required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"><option value="pending"${b(Array.isArray(o(F).booking_status)?g(o(F).booking_status,"pending"):v(o(F).booking_status,"pending"))?" selected":""}>في الانتظار</option><option value="confirmed"${b(Array.isArray(o(F).booking_status)?g(o(F).booking_status,"confirmed"):v(o(F).booking_status,"confirmed"))?" selected":""}>مؤكدة</option><option value="cancelled"${b(Array.isArray(o(F).booking_status)?g(o(F).booking_status,"cancelled"):v(o(F).booking_status,"cancelled"))?" selected":""}>ملغية</option><option value="completed"${b(Array.isArray(o(F).booking_status)?g(o(F).booking_status,"completed"):v(o(F).booking_status,"completed"))?" selected":""}>مكتملة</option></select></div><div><label class="block text-sm font-medium text-gray-700 mb-2">حالة الدفع *</label><select required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"><option value="pending"${b(Array.isArray(o(F).payment_status)?g(o(F).payment_status,"pending"):v(o(F).payment_status,"pending"))?" selected":""}>في الانتظار</option><option value="partial"${b(Array.isArray(o(F).payment_status)?g(o(F).payment_status,"partial"):v(o(F).payment_status,"partial"))?" selected":""}>مدفوع جزئياً</option><option value="paid"${b(Array.isArray(o(F).payment_status)?g(o(F).payment_status,"paid"):v(o(F).payment_status,"paid"))?" selected":""}>مدفوع بالكامل</option><option value="refunded"${b(Array.isArray(o(F).payment_status)?g(o(F).payment_status,"refunded"):v(o(F).payment_status,"refunded"))?" selected":""}>مسترد</option></select></div></div></div><div class="bg-blue-50 rounded-lg border border-blue-200 p-4"><h3 class="text-lg font-semibold text-blue-900 mb-3">ملخص الحجز</h3><div class="space-y-2 text-sm text-blue-800"><div class="flex justify-between"><span>العميل:</span><span>${x(o(F).customer_name||"غير محدد")}</span></div><div class="flex justify-between"><span>عدد الضيوف:</span><span>${x(o(F).guests_count||0)}</span></div><div class="flex justify-between"><span>تاريخ المغادرة:</span><span>${x(o(F).departure_date||"غير محدد")}</span></div><div class="flex justify-between"><span>المبلغ الإجمالي:</span><span>${x(y(o(F).total_amount))}</span></div><div class="flex justify-between"><span>المبلغ المدفوع:</span><span>${x(y(o(F).paid_amount))}</span></div><div class="flex justify-between"><span>المتبقي:</span><span>${x(y(o(F).total_amount-o(F).paid_amount))}</span></div><div class="flex justify-between"><span>حالة الحجز:</span><span>${x((e=>({confirmed:"مؤكدة",pending:"في الانتظار",cancelled:"ملغية",completed:"مكتملة"}[e]||e))(o(F).booking_status))}</span></div><div class="flex justify-between"><span>حالة الدفع:</span><span>${x((e=>({paid:"مدفوع",partial:"مدفوع جزئياً",pending:"في الانتظار",refunded:"مسترد"}[e]||e))(o(F).payment_status))}</span></div></div></div><div class="bg-gray-50 rounded-lg p-4"><h3 class="text-lg font-semibold text-gray-900 mb-4">معلومات إضافية</h3><div class="space-y-3"><div><label class="block text-sm font-medium text-gray-700 mb-2">رقم الحجز</label><input${p("value",o(F).booking_number)} type="text" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="رقم الحجز"></div><div><label class="block text-sm font-medium text-gray-700 mb-2">تاريخ التأكيد</label><input${p("value",o(F).confirmed_at)} type="datetime-local" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></div>`),"cancelled"===o(F).booking_status?r(`<div><label class="block text-sm font-medium text-gray-700 mb-2">سبب الإلغاء</label><textarea rows="2" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="سبب إلغاء الحجز">${x(o(F).cancellation_reason)}</textarea></div>`):r("\x3c!----\x3e"),r('</div></div></div></div><div class="flex justify-end space-x-3 space-x-reverse pt-6 border-t border-gray-200">'),r(m(_,{to:`/admin/bookings/${o(h)}`,class:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},{default:n(((e,t,s,r)=>{if(!t)return[d(" إلغاء ")];t(" إلغاء ")})),_:1},a)),r(`<button type="submit"${b(o($)||!o(T))?" disabled":""} class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50">`),o($)?r(m(A,{name:"material-symbols:progress-activity",class:"animate-spin h-4 w-4 ml-2 inline"},null,a)):r("\x3c!----\x3e"),r(` ${x(o($)?"جاري الحفظ...":"حفظ التغييرات")}</button></div></div></form>`)),r("</div>")}}},k=h.setup;h.setup=(e,t)=>{const s=u();return(s.modules||(s.modules=new Set)).add("pages/admin/bookings/[id]/edit.vue"),k?k(e,t):void 0};export{h as default};
//# sourceMappingURL=edit.vue3.mjs.map
