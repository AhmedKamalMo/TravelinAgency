#!/usr/bin/env node

console.log('ðŸ”§ FIXING MIME TYPES FOR _NUXT ASSETS');
console.log('======================================\n');

console.log('ðŸ“‹ FIXED .HTACCESS WITH PROPER MIME TYPES:');
console.log('===========================================');
console.log('');
console.log('# 1. Create .htaccess with proper MIME type handling');
console.log('cat > .htaccess << "EOF"');
console.log('RewriteEngine On');
console.log('');
console.log('# Set proper MIME types for _nuxt assets');
console.log('<FilesMatch "\\.(css)$">');
console.log('    Header set Content-Type "text/css"');
console.log('</FilesMatch>');
console.log('');
console.log('<FilesMatch "\\.(js)$">');
console.log('    Header set Content-Type "application/javascript"');
console.log('</FilesMatch>');
console.log('');
console.log('# Handle API routes');
console.log('RewriteCond %{REQUEST_URI} ^/api/');
console.log('RewriteRule ^(.*)$ /api-handler.php [QSA,L]');
console.log('');
console.log('# Handle _nuxt assets with proper MIME types');
console.log('RewriteCond %{REQUEST_URI} ^/_nuxt/');
console.log('RewriteCond %{DOCUMENT_ROOT}/output/public%{REQUEST_URI} -f');
console.log('RewriteRule ^(.*)$ /output/public$1 [L]');
console.log('');
console.log('# Handle static files from output/public');
console.log('RewriteCond %{REQUEST_URI} \\.(css|js|jpg|jpeg|png|gif|webp|svg|ico|woff|woff2|ttf|eot)$');
console.log('RewriteCond %{REQUEST_FILENAME} !-f');
console.log('RewriteCond %{DOCUMENT_ROOT}/output/public%{REQUEST_URI} -f');
console.log('RewriteRule ^(.*)$ /output/public$1 [L]');
console.log('');
console.log('# Serve index.html for all other requests');
console.log('RewriteCond %{REQUEST_FILENAME} !-f');
console.log('RewriteCond %{REQUEST_FILENAME} !-d');
console.log('RewriteRule ^(.*)$ /index.html [QSA,L]');
console.log('EOF');
console.log('');
console.log('# 2. Alternative: Create .htaccess with AddType directives');
console.log('cat > .htaccess << "EOF"');
console.log('RewriteEngine On');
console.log('');
console.log('# Add proper MIME types');
console.log('AddType text/css .css');
console.log('AddType application/javascript .js');
console.log('AddType image/jpeg .jpg .jpeg');
console.log('AddType image/png .png');
console.log('AddType image/gif .gif');
console.log('AddType image/webp .webp');
console.log('AddType image/svg+xml .svg');
console.log('AddType image/x-icon .ico');
console.log('AddType font/woff .woff');
console.log('AddType font/woff2 .woff2');
console.log('AddType font/ttf .ttf');
console.log('AddType font/eot .eot');
console.log('');
console.log('# Handle API routes');
console.log('RewriteCond %{REQUEST_URI} ^/api/');
console.log('RewriteRule ^(.*)$ /api-handler.php [QSA,L]');
console.log('');
console.log('# Handle _nuxt assets');
console.log('RewriteCond %{REQUEST_URI} ^/_nuxt/');
console.log('RewriteCond %{DOCUMENT_ROOT}/output/public%{REQUEST_URI} -f');
console.log('RewriteRule ^(.*)$ /output/public$1 [L]');
console.log('');
console.log('# Handle static files from output/public');
console.log('RewriteCond %{REQUEST_URI} \\.(css|js|jpg|jpeg|png|gif|webp|svg|ico|woff|woff2|ttf|eot)$');
console.log('RewriteCond %{REQUEST_FILENAME} !-f');
console.log('RewriteCond %{DOCUMENT_ROOT}/output/public%{REQUEST_URI} -f');
console.log('RewriteRule ^(.*)$ /output/public$1 [L]');
console.log('');
console.log('# Serve index.html for all other requests');
console.log('RewriteCond %{REQUEST_FILENAME} !-f');
console.log('RewriteCond %{REQUEST_FILENAME} !-d');
console.log('RewriteRule ^(.*)$ /index.html [QSA,L]');
console.log('EOF');
console.log('');
console.log('# 3. Test the MIME types');
console.log('curl -k -I https://travelin-agency-nlcs.vercel.app/_nuxt/entry.Cjk20dY-.css');
console.log('curl -k -I https://travelin-agency-nlcs.vercel.app/_nuxt/2Q_rtp48.js');
console.log('');
console.log('# 4. Test the website');
console.log('curl -k -I https://travelin-agency-nlcs.vercel.app/');
console.log('');
console.log('ðŸŽ¯ This will fix:');
console.log('âœ… MIME type errors for CSS files');
console.log('âœ… MIME type errors for JavaScript files');
console.log('âœ… Proper content-type headers');
console.log('âœ… Module script loading issues');
console.log('');
console.log('ðŸ”§ The fix includes:');
console.log('â€¢ AddType directives for proper MIME types');
console.log('â€¢ Handles all file extensions correctly');
console.log('â€¢ Ensures CSS files are served as text/css');
console.log('â€¢ Ensures JS files are served as application/javascript');
